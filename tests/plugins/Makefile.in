###################################################### -*- Makefile -*- #####
#                  ParaStation
#        Copyright (c) 2011 ParTec Cluster Competence Center GmbH, Munich
#############################################################################
#
# $Id$
#
# @author
#         Norbert Eicker <eicker@par-tec.com>
#############################################################################

CFLAGS += @CFLAG_WALL@ @CFLAG_G@ @CFLAG_COMPAT@ @CFLAG_SSP@
CPPFLAGS += -I@top_srcdir@/include -I@top_srcdir@/bin/daemon -I. @CPPFLAG_MMD@
SRCDIR = @srcdir@

VPATH += $(SRCDIR)


TARGETS= plugin1.so plugin2.so plugin3.so plugin4.so plugin5.so plugin6.so \
	plugin7.so plugin8.so plugin9.so

.PHONY: all install plugins
all:

install:

plugins: $(TARGETS)


$(TARGETS): CFLAGS+=-fPIC

$(TARGETS): %.so: %.o
	$(CC) -shared $< -o $@


# WARNING!!! if DEPEXTENSION from configure is empty, make clean remove all files!!
DEPFILES := $(wildcard *@DEPEXTENSION@) dummy.d

.PHONY: clean distclean

clean:
	$(RM) $(DEPFILES) $(EXTRACLEAN) *.o

distclean: clean
	$(RM) $(TARGETS)

-include $(DEPFILES)
