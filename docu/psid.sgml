<refentry id="psid">
  <refmeta>
    <refentrytitle>psid</refentrytitle>
    <manvolnum>8</manvolnum>
  </refmeta>

  <refnamediv>
    <refname>psid</refname>
    <refpurpose>
      the &ps; daemon. The organizer of the &ps; software architecture.
    </refpurpose>
  </refnamediv>

  <refsynopsisdiv>
    <cmdsynopsis>
      <command>psid</command>
      <arg>-v?</arg>
      <arg>-d <replaceable>level</replaceable></arg>
      <arg>-f <replaceable>configfile</replaceable></arg>
      <arg>-l <replaceable>logfile</replaceable></arg>
      <arg>--usage</arg>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsect1>
    <title>Description</title>
    <para>
      The &ps; daemon is implemented as a Unix daemon process. It supervises
      allocated resources, cleans up after application shutdowns, and controls
      access to common resources. Thus, it takes care of tasks which are
      usually managed by the operating system.
    </para>

    <para>
      The local daemon is usually started by executing <xref
	linkend="psiadmin"/>. If it is not running at the time a &ps; process
      is starting, the <citerefentry>
	<refentrytitle>inetd</refentrytitle>
	<manvolnum>8</manvolnum>
      </citerefentry> daemon is starting up <command>psid</command>
      automatically. The daemon can also be started using the command line.
      Parameters can be given at the command line or in the <citerefentry>
	<refentrytitle>inetd</refentrytitle>
	<manvolnum>8</manvolnum>
      </citerefentry> configuration file <citerefentry>
	<refentrytitle>inetd.conf</refentrytitle>
	<manvolnum>5</manvolnum>
      </citerefentry>. Most of the parameters can also be given in the &ps;
      configuration file <xref linkend="parastation_conf" />.
    </para>

    <para>
      Nodes without a running &ps; daemon are not visible within the cluster.
      Be aware of the fact that <xref linkend="psiadmin"/> usually only starts
      the local daemon. All other daemons managing the nodes configured to
      belong to the cluster may be started using the <command>add</command>
      directive from withing the &ps; administation tool <xref
	linkend="psiadmin"/>.
    </para>

    <para>
      If <xref linkend="psiadmin"/> is started with the <option>-s</option>
      option, all daemons within the cluster will be started automatically.
    </para>

    <para>
      The &ps; daemon must always run with root privileges.
    </para>

    <para>
      Before a process can communicate with the &ps; system, it has to register
      with the daemon. Access may be granted or denied. The daemon can deny the
      access due to several reasons:
    </para>
    <itemizedlist>
      <listitem>
	<para>the &ps; system library of the process and the &ps; daemon are
	  incompatible.
	</para>
      </listitem>
      <listitem>
	<para>the daemon is in a state where it does not accept new
	  connections.
	</para>
      </listitem>
      <listitem>
	<para>insufficient resources.
	</para>
      </listitem>
      <listitem>
	<para>the user is temporally not allowed to access &ps; (see <xref
	    linkend="psiadmin"/>).
	</para>
      </listitem>
      <listitem>
	<para>the group is temporally not allowed to access &ps; (see <xref
	    linkend="psiadmin"/>).
	</para>
      </listitem>
      <listitem>
	<para>the number of processes exceed the maximum set by <xref
	    linkend="psiadmin"/>.
	</para>
      </listitem>
    </itemizedlist>

    <para>
      The &ps; daemon can restrict the access to the communication subsystem to
      a specific user or a maximum number of processes. This enables the
      cluster to run in an optimized way, since multiple processes slow down
      application execution due to scheduling overhead. (See <xref
	linkend="psiadmin"/>, <command>set user</command>, <command>set
	group</command> and <command>set maxproc</command> for this features.)
    </para>

    <para>
      All &ps; daemons are connected to each other. They exchange local
      information and transmit demands of local processes to the
      <command>psid</command> of the destination node. With this cooperation,
      the &ps; system offers a distributed resource management.
    </para>

    <para>
      The &ps; daemon spawns and kills client processes on demand of a parent
      process. The &ps; system transfers remote spawning or killing requests to
      the daemon of the destination node. Then operating system functionality
      is used to spawn and kill the processes on the local node. The spawned
      process runs with same user and group id as the spawning process. The
      &ps; system redirects the output of spawned process to the terminal of
      the parent process.
    </para>

    <para>
      The &ps; daemon checks periodically if the &ps; license daemon <xref
	linkend="psld"/> is running. If the license daemon is not running for a
      period of time, the &ps; daemon shuts down operation. If this happens,
      please check your log file.
    </para>
  </refsect1>

  <refsect1>
    <title>Options</title>
    <variablelist>
      <varlistentry>
	<term>
	  <option>-d</option>
	  <option>, --debug=<replaceable>level</replaceable></option>
        </term>
	<listitem>
	  <para>Activate the debugging mode and set the debugging level to
	    <replaceable>level</replaceable>. If debugging is enabled, i.e. if
	    <replaceable>level</replaceable> is larger than 0, no
	    <citerefentry>
	      <refentrytitle>fork</refentrytitle>
	      <manvolnum>2</manvolnum>
	    </citerefentry> is made on startup, which is usually done in order
	    to run <command>psid</command> as a daemon process in background.
	  </para>
	  <para>
	    The debugging level of the daemon can also be modified during
	    runtime using the <command>set psiddebug</command> command of <xref
	      linkend="psiadmin"/>.
	  </para>
	  <para>
	    Be aware of the fact that high values of
	    <replaceable>level</replaceable> lead to excessively much debugging
	    output spoiling the
	    <citerefentry>
	      <refentrytitle>syslog</refentrytitle>
	      <manvolnum>3</manvolnum>
	    </citerefentry>
	    or the logfile.
	  </para>
	</listitem>
      </varlistentry>
      <varlistentry>
	<term>
	  <option>-f</option>
	  <option>, --configfile=<replaceable>file</replaceable></option>
        </term>
	<listitem>
	  <para>Choose <replaceable>file</replaceable> to be the &ps;
	    configuration file. The default is to use
	    <filename>/etc/parastation.conf</filename>.
	  </para>
	  <para>
            Use <xref linkend="test_config"/> in order to test the
            syntactical correctnes of the configuration file to use.
	  </para>
	</listitem>
      </varlistentry>
      <varlistentry>
	<term>
	  <option>-l</option>
	  <option>, --logfile=<replaceable>file</replaceable></option>
        </term>
	<listitem>
	  <para>Choose <replaceable>file</replaceable> to be the destination
	    for logging output. <replaceable>file</replaceable> may be the name
	    of an ordinary file or <filename>stdin</filename> or
	    <filename>stdout</filename>. The default is to use
	    <citerefentry>
	      <refentrytitle>syslog</refentrytitle>
	      <manvolnum>3</manvolnum>
	    </citerefentry> for any logging output.
	  </para>
	</listitem>
      </varlistentry>
      <varlistentry>
	<term>
	  <option>-v</option>
	  <option>, --version</option>
        </term>
	<listitem>
	  <para>Output version information and exit.</para>
	</listitem>
      </varlistentry>
      <varlistentry>
	<term>
	  <option>-?</option>
	  <option>, --help</option>
        </term>
	<listitem>
	  <para>Show a help message.</para>
	</listitem>
      </varlistentry>
      <varlistentry>
        <term>
	  <option>--usage</option>
	</term>
        <listitem>
          <para>Display a brief usage message.</para>
        </listitem>
      </varlistentry>
    </variablelist>
  </refsect1>
  <refsect1>
    <title>See also</title>
    <para>
      <xref linkend="parastation_conf"/>, <xref linkend="psiadmin"/>, <xref
	linkend="mlisten"/>, <xref linkend="psld"/>, <xref
        linkend="test_config"/>
    </para>
  </refsect1>
</refentry>
  <!-- Keep this comment at the end of the file
  Local variables:
  mode: xml
  sgml-omittag:nil
  sgml-shorttag:nil
  sgml-namecase-general:nil
  sgml-general-insert-case:lower
  sgml-minimize-attributes:nil
  sgml-always-quote-attributes:t
  sgml-indent-step:2
  sgml-indent-data:t
  sgml-parent-document:("adminguide.xml" "book" "reference" "reference" ("title"))
  sgml-exposed-tags:nil
  sgml-local-catalogs:nil
  sgml-local-ecat-files:nil
  End:
  -->
