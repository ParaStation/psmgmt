------------------------------------------------------------------------
02b3053 | Norbert Eicker | Mon, 13 Feb 2017 18:07:30 +0100

New psslurm version 116

------------------------------------------------------------------------
98538ed | Norbert Eicker | Mon, 13 Feb 2017 16:53:05 +0100

Bugfix: pluginforwarder shall ignore PSP_CC_ERROR messages

 - Provide additional warning if unexpected messages are received

------------------------------------------------------------------------
7d20c7a | Norbert Eicker | Fri, 10 Feb 2017 09:52:01 +0100

Push plugin API version to 117 for PSIDspawn_localTask()

------------------------------------------------------------------------
fd13663 | Norbert Eicker | Thu, 9 Feb 2017 23:33:46 +0100

Add new testplugin to delay SLURM messages

------------------------------------------------------------------------
159c0aa | Norbert Eicker | Thu, 9 Feb 2017 23:31:52 +0100

Make message duplication/cleanup accessible to other plugins

------------------------------------------------------------------------
16202cc | Norbert Eicker | Thu, 9 Feb 2017 23:28:18 +0100

Allow to duplicate and cleanup SLURM messages

------------------------------------------------------------------------
b608a90 | Norbert Eicker | Thu, 9 Feb 2017 23:20:47 +0100

Enhancement: New function dupDataBuffer()

------------------------------------------------------------------------
a84db38 | Norbert Eicker | Thu, 9 Feb 2017 23:16:30 +0100

Fix typo in Makefile

------------------------------------------------------------------------
da164d3 | Norbert Eicker | Thu, 9 Feb 2017 13:48:09 +0100

Make psslurm protocol switch accessible to other plugins

------------------------------------------------------------------------
f4a4dd8 | Norbert Eicker | Thu, 9 Feb 2017 13:07:36 +0100

Add central protocol switch to psslurm

------------------------------------------------------------------------
c107bca | Thomas Moschny | Wed, 8 Feb 2017 22:47:08 +0100

Fix and simplify the pam_psmom.so symlink generation.

------------------------------------------------------------------------
a7f65e3 | Thomas Moschny | Wed, 8 Feb 2017 22:42:49 +0100

Fix 'make distcheck'.

------------------------------------------------------------------------
fdca1e7 | Thomas Moschny | Wed, 8 Feb 2017 22:34:59 +0100

Do not include the the psconfig sample file twice (it's in the psconfig subdir).

------------------------------------------------------------------------
2297b27 | Michael Rauh | Wed, 8 Feb 2017 11:51:59 +0100

Remove PSI_INPUTDEST in rank environment instead of mpiexec

------------------------------------------------------------------------
f74913c | Norbert Eicker | Wed, 8 Feb 2017 11:33:43 +0100

Actually implement PSIDspawn_delayTask()

------------------------------------------------------------------------
bbb75bf | Norbert Eicker | Wed, 8 Feb 2017 11:10:29 +0100

More equalization between master and psslurm-devel

------------------------------------------------------------------------
e5fdb1d | Norbert Eicker | Tue, 7 Feb 2017 18:43:40 +0100

Equalize between psslurm-devel and master

------------------------------------------------------------------------
e4d6e3e | Norbert Eicker | Tue, 7 Feb 2017 17:29:01 +0100

Bugfix: Fix delayed spawns waiting for step (#6354)

------------------------------------------------------------------------
c5522f0 | Stephan Krempel | Tue, 7 Feb 2017 13:01:02 +0100

Fix memory allocation in pluginstrv

------------------------------------------------------------------------
1b17a4e | Norbert Eicker | Tue, 7 Feb 2017 11:30:02 +0100

Streamline pmiclientspawn again

------------------------------------------------------------------------
7db88f2 | Stephan Krempel | Tue, 7 Feb 2017 10:20:20 +0100

Fix memory allocation in PMI spawn handling

------------------------------------------------------------------------
8cc256a | Michael Rauh | Mon, 6 Feb 2017 14:16:50 +0100

Merge branch 'psslurm-devel' of git.ccc:/psmgmt into psslurm-devel

------------------------------------------------------------------------
813bd7d | Norbert Eicker | Mon, 6 Feb 2017 12:05:42 +0100

Prepare for 5.1.x releases

------------------------------------------------------------------------
be4e1de | Norbert Eicker | Mon, 6 Feb 2017 11:53:41 +0100

New version (psmgmt-5.0.54)

------------------------------------------------------------------------
5c8d37e | Michael Rauh | Mon, 6 Feb 2017 14:12:56 +0100

Make psslurm forwarders dumpable

------------------------------------------------------------------------
cbc4864 | Michael Rauh | Mon, 6 Feb 2017 11:21:04 +0100

Merge branch 'psslurm-devel' of git.ccc:/psmgmt into psslurm-devel

------------------------------------------------------------------------
d712649 | Norbert Eicker | Fri, 3 Feb 2017 17:20:16 +0100

Let mpiexec provide appnum independently of PMI

------------------------------------------------------------------------
06b8070 | Norbert Eicker | Fri, 3 Feb 2017 17:09:59 +0100

Receive the same type as sent by psaccount plugin

------------------------------------------------------------------------
a2ef960 | Norbert Eicker | Fri, 3 Feb 2017 16:55:08 +0100

Merge remote-tracking branch 'refs/remotes/origin/psslurm-devel' into psslurm-devel

------------------------------------------------------------------------
4b5f8a5 | Norbert Eicker | Fri, 3 Feb 2017 16:53:24 +0100

Pass --enable-slurm_proto_1605 from configure to make rpm

------------------------------------------------------------------------
ed1123d | Norbert Eicker | Fri, 3 Feb 2017 16:11:43 +0100

Fix and simplify spec file

------------------------------------------------------------------------
a19140e | Michael Rauh | Mon, 6 Feb 2017 11:19:33 +0100

The pam plugin now expects the jobid instead of the plugin name

------------------------------------------------------------------------
c9eba69 | Michael Rauh | Fri, 3 Feb 2017 16:18:05 +0100

Actually activate the flow control for pssslurm forwarders

------------------------------------------------------------------------
54dbc96 | Norbert Eicker | Thu, 2 Feb 2017 15:15:46 +0100

Merge minor changes of the buildsystem from master

------------------------------------------------------------------------
9493db3 | Norbert Eicker | Thu, 2 Feb 2017 15:14:32 +0100

Merge fix for incorrect prototypes from master

------------------------------------------------------------------------
5541b63 | Norbert Eicker | Thu, 2 Feb 2017 14:52:58 +0100

Redo autoreconf with version 2.69

------------------------------------------------------------------------
3aad60e | Michael Rauh | Thu, 2 Feb 2017 14:39:50 +0100

Merge branch 'psslurm-devel' of git.ccc:/psmgmt into psslurm-devel

------------------------------------------------------------------------
efb1c94 | Norbert Eicker | Thu, 2 Feb 2017 14:21:17 +0100

Adapt psaccount.conf to recent changes

------------------------------------------------------------------------
0abf41f | Norbert Eicker | Thu, 2 Feb 2017 14:18:29 +0100

Minor whitespace change merged from master

------------------------------------------------------------------------
d0f524c | Norbert Eicker | Thu, 2 Feb 2017 14:16:31 +0100

Merge new release strategy description from master

------------------------------------------------------------------------
3dcf826 | Michael Rauh | Thu, 2 Feb 2017 14:32:29 +0100

Merge pspam changes from master and re-enable the psmom plugin.

------------------------------------------------------------------------
f9923e0 | Norbert Eicker | Wed, 1 Feb 2017 19:43:09 +0100

Remove obsolete m4 files

------------------------------------------------------------------------
de53853 | Norbert Eicker | Wed, 1 Feb 2017 19:30:25 +0100

Minor changes to unify between master and psslurm-devel

------------------------------------------------------------------------
66f2d62 | Norbert Eicker | Thu, 3 Nov 2016 08:56:53 +0100

Minor simplification

------------------------------------------------------------------------
94bbc4e | Norbert Eicker | Sat, 7 Jan 2017 00:59:53 +0100

Bugfix: Fix one error found by clang's scan-build

------------------------------------------------------------------------
0e66794 | Norbert Eicker | Tue, 31 Jan 2017 18:17:19 +0100

Re-enable psmom in configure

------------------------------------------------------------------------
4d78fe5 | Norbert Eicker | Tue, 31 Jan 2017 18:08:57 +0100

Force plugins/psmom into the same state as on master

------------------------------------------------------------------------
98ccbd2 | Norbert Eicker | Tue, 24 Jan 2017 11:36:57 +0100

Let psaccount ignore procs with loginuid -1

------------------------------------------------------------------------
c587f20 | Norbert Eicker | Tue, 24 Jan 2017 11:05:12 +0100

Let psaccount ignore zombie processes

------------------------------------------------------------------------
7241175 | Norbert Eicker | Tue, 24 Jan 2017 10:46:32 +0100

Bugfix: Determine UID more reliably in psaccount

 - /proc/<PID>/state is not always owned by user
 - Use owner of /proc/<PID>/task instead

------------------------------------------------------------------------
ffdbe83 | Norbert Eicker | Tue, 31 Jan 2017 17:23:39 +0100

Rework pluginconfig's hash accumulation API

 - Adapt psslurm to new API, too

------------------------------------------------------------------------
5eec8bc | Michael Rauh | Tue, 31 Jan 2017 15:18:35 +0100

Merge branch 'psslurm-devel' of git.ccc:/psmgmt into psslurm-devel

------------------------------------------------------------------------
7c7d199 | Norbert Eicker | Tue, 24 Jan 2017 11:14:42 +0100

Remove unused psAccountReadProcStat from psaccount's API

------------------------------------------------------------------------
c08876a | Thomas Moschny | Wed, 7 Dec 2016 21:37:01 +0100

Fix a bunch of incorrect prototypes.

------------------------------------------------------------------------
086551e | Norbert Eicker | Wed, 4 Jan 2017 16:54:16 +0100

Bugfix: Fix one issue introduced in ea10c832

 - PMI shall disable accounting temporarily during the initial update of the
   KVS. This worked before but broke in ea10c832.

------------------------------------------------------------------------
cf58fb0 | Norbert Eicker | Thu, 22 Dec 2016 17:15:05 +0100

Fix insecure history file creation for linenoise

 - This patch stems from linenoise upstream repo and was contributed
   there by Chris Lamb (@lamby)
 - See https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=832460

------------------------------------------------------------------------
ceb26da | Thomas Moschny | Thu, 8 Dec 2016 09:42:53 +0100

Make linenoise's internal functions static.

------------------------------------------------------------------------
82e2e3f | Norbert Eicker | Tue, 31 Jan 2017 09:47:23 +0100

Remove useless check different from master

------------------------------------------------------------------------
8a49495 | Norbert Eicker | Fri, 13 Jan 2017 16:49:04 +0100

Update references to libreadline to linenoise

------------------------------------------------------------------------
7b8d42f | Norbert Eicker | Sun, 20 Nov 2016 09:16:52 +0100

Modernize psid's plugin handling

 - Booleanize psidplugin
 - Add remark to documentation

------------------------------------------------------------------------
c610e1c | Norbert Eicker | Fri, 9 Dec 2016 13:44:08 +0100

Booleanize and cleanup timer

------------------------------------------------------------------------
ef43bb0 | Norbert Eicker | Mon, 30 Jan 2017 18:11:59 +0100

Adapt buildsytem to the one found in master

------------------------------------------------------------------------
024ef16 | Norbert Eicker | Mon, 30 Jan 2017 18:06:49 +0100

Remove one obsolete directory with all content

------------------------------------------------------------------------
ec73de1 | Michael Rauh | Tue, 31 Jan 2017 15:15:59 +0100

Fix memory corruption for large np per node (PCT:#253)

------------------------------------------------------------------------
a33aba7 | Michael Rauh | Wed, 25 Jan 2017 15:12:01 +0100

Compute configuration hash value (PCT:#254)

------------------------------------------------------------------------
1207a8c | Michael Rauh | Tue, 24 Jan 2017 17:48:45 +0100

Merge master changes for pelogue, psaccount and pluginforwarder

------------------------------------------------------------------------
82d4eaf | Michael Rauh | Mon, 23 Jan 2017 15:19:43 +0100

Make sure all steps are gone when receiving a abort request (#3565)

------------------------------------------------------------------------
bf53ac4 | Michael Rauh | Mon, 23 Jan 2017 14:05:05 +0100

Fix invalid RPC response for abort job request (JRT:#5404)

------------------------------------------------------------------------
448dab4 | Michael Rauh | Mon, 23 Jan 2017 13:51:48 +0100

Rework psslurmauth, psslurmcomm and introduce psslurmpack

------------------------------------------------------------------------
8177fd8 | Michael Rauh | Tue, 3 Jan 2017 11:26:44 +0100

New psslurm version 114.

------------------------------------------------------------------------
c40152a | Dorian Krause | Fri, 16 Dec 2016 09:48:32 +0100

Accept error codes > 99 in ticket-159

------------------------------------------------------------------------
924f897 | Stephan Krempel | Mon, 2 Jan 2017 11:32:59 +0100

Update distribution enum for slurm protocol 16.05

------------------------------------------------------------------------
c6985b3 | Michael Rauh | Wed, 21 Dec 2016 16:35:27 +0100

Adopted pspmi changes to psslurm.

------------------------------------------------------------------------
1fff7b9 | Michael Rauh | Wed, 21 Dec 2016 16:21:55 +0100

Merge pspmi from master.

------------------------------------------------------------------------
9195a55 | Norbert Eicker | Tue, 20 Dec 2016 18:22:04 +0100

Bugfix: psslurm must fetch sbcast payload with getDataM()

------------------------------------------------------------------------
6ac58e7 | Norbert Eicker | Tue, 20 Dec 2016 17:23:41 +0100

Add debug to psslurmproto for failing sbcast test

------------------------------------------------------------------------
607da61 | Norbert Eicker | Tue, 20 Dec 2016 16:10:58 +0100

Switch to blocking read()s in pspam

------------------------------------------------------------------------
d2960d5 | Norbert Eicker | Tue, 20 Dec 2016 15:43:25 +0100

Bugfix: Allow NULL as buf in addDataToMsg()

------------------------------------------------------------------------
ee5d45d | Norbert Eicker | Tue, 20 Dec 2016 13:49:07 +0100

Switch to blocking read()s in pluginforwarder

------------------------------------------------------------------------
68278bf | Norbert Eicker | Tue, 20 Dec 2016 13:47:12 +0100

Suppress warning on normal close of connection

------------------------------------------------------------------------
4a7945d | Norbert Eicker | Tue, 20 Dec 2016 12:59:18 +0100

Better handling of doRead*() and more debug in psslurmcomm

------------------------------------------------------------------------
79db925 | Norbert Eicker | Tue, 20 Dec 2016 12:48:54 +0100

Enhance doRead[Ext][P]'s behavior

 - Actually switch back and forth between blocking and non-blocking
   read()s when changing the pedantic flag

------------------------------------------------------------------------
e5640bb | Norbert Eicker | Tue, 20 Dec 2016 12:01:35 +0100

More debug and streamlining in psslurmcomm

------------------------------------------------------------------------
f4c32ca | Norbert Eicker | Tue, 20 Dec 2016 10:45:53 +0100

More debug in psslurmcomm

------------------------------------------------------------------------
4a43992 | Norbert Eicker | Tue, 20 Dec 2016 10:28:48 +0100

Some streamlining of psslurmcomm and more debug

------------------------------------------------------------------------
57ce317 | Norbert Eicker | Mon, 19 Dec 2016 11:40:18 +0100

Adapt to new plugincomm API

------------------------------------------------------------------------
eb32705 | Norbert Eicker | Mon, 19 Dec 2016 11:36:55 +0100

Help suppress warning when using get*Array()

------------------------------------------------------------------------
a3405c6 | Norbert Eicker | Mon, 19 Dec 2016 11:34:32 +0100

Merge plugincomm from master.

------------------------------------------------------------------------
8593b37 | Michael Rauh | Fri, 16 Dec 2016 13:42:27 +0100

Add comment to NETWORK CALLERID RPC

------------------------------------------------------------------------
e1bc35d | Michael Rauh | Fri, 16 Dec 2016 11:12:47 +0100

The MESSAGE_COMPOSITE request should not be send to psslurm

------------------------------------------------------------------------
4272f74 | Michael Rauh | Thu, 15 Dec 2016 11:38:51 +0100

Support empty accounting data for slurm 16.05.

------------------------------------------------------------------------
41a64ec | Michael Rauh | Tue, 13 Dec 2016 11:00:00 +0100

Increase the backlog queue in psslurm main listen call.

------------------------------------------------------------------------
9325ddc | Michael Rauh | Mon, 12 Dec 2016 10:51:04 +0100

Update regression test suite:

    commit 44b102f876aee287b851a708b6eaff4fd1bfefba
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Sat Dec 10 22:04:27 2016 +0100

	Fix test timeout-exit-15 for Slurm 16.05

    commit ebadc7cf208cc910d583595bdbd7cf991ffac40f
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Sat Dec 10 21:26:38 2016 +0100

	Fix test accounting-1 for Slurm 16.05

    commit 6c5e2d9612455f786ae894abd136d281b466ebe1
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Sat Dec 10 21:16:39 2016 +0100

	Fix test ticket-33 for Slurm 16.05

    commit f1c7c76b0ca56e83bd8992d1e23ba6ca512a5e6b
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Sat Dec 10 21:16:24 2016 +0100

	Allow tests to query the Slurm version

    commit d90393f02e0a1fb56acd472065bbf96fc6ad19f8
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Thu Nov 24 18:14:53 2016 +0100

	Bug fix for ticket-165-2

    commit 0cc23b64e65e8c7596a6ab013abac870f67a75d5
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Thu Nov 24 18:10:24 2016 +0100

	Remove tests ticket-[30,106,108]

    commit 91032d9c3c87a8f0253d687ac334becfd86d2246
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Mon Nov 7 09:05:40 2016 +0100

	Add cgroup tests (ticket 252)

------------------------------------------------------------------------
6ef17e8 | Michael Rauh | Mon, 12 Dec 2016 10:41:34 +0100

Bugfix: make sure input from global file gets redirected only once

------------------------------------------------------------------------
7df2c27 | Norbert Eicker | Wed, 7 Dec 2016 13:30:27 +0100

Release request upon providing partition (jrt:5879)

------------------------------------------------------------------------
7e81f28 | Michael Rauh | Fri, 2 Dec 2016 12:28:42 +0100

Enhancement: update psslurm kvs help message.
Enhancement: added more infos to psslurm kvs step query.

------------------------------------------------------------------------
59ded47 | Michael Rauh | Thu, 1 Dec 2016 10:35:00 +0100

Bugfix: suppress warning messages from psslurm when using pssh.

------------------------------------------------------------------------
4f04d92 | Michael Rauh | Wed, 30 Nov 2016 15:20:21 +0100

New psslurm version 112.

------------------------------------------------------------------------
085ceae | Stephan Krempel | Wed, 30 Nov 2016 14:24:25 +0100

Add some BuildDepends

------------------------------------------------------------------------
580c341 | Stephan Krempel | Tue, 29 Nov 2016 16:48:05 +0100

Buffer PSP_SPAWN_END message until step is created

Resolves jrt#5792

------------------------------------------------------------------------
df87a29 | Stephan Krempel | Thu, 24 Nov 2016 16:42:02 +0100

Split-up getJobIDbyForwarderMsg()

------------------------------------------------------------------------
5acef2b | Stephan Krempel | Tue, 18 Oct 2016 13:39:53 +0200

Renaming oldSpawnHandler to oldSpawnFailedHandler

------------------------------------------------------------------------
e1237f2 | Stephan Krempel | Tue, 29 Nov 2016 13:34:27 +0100

Print caller in sendFWMsg() error output

------------------------------------------------------------------------
62d9685 | Stephan Krempel | Tue, 15 Nov 2016 11:28:09 +0100

Enhance behaviour of connect() in case of EINTR

------------------------------------------------------------------------
2d3f6b3 | Michael Rauh | Mon, 21 Nov 2016 14:31:06 +0100

Merge psmunge changes from master.

------------------------------------------------------------------------
951980b | Michael Rauh | Mon, 21 Nov 2016 13:08:03 +0100

Merge psexec changes from master.

------------------------------------------------------------------------
ee26ef4 | Michael Rauh | Thu, 17 Nov 2016 15:52:25 +0100

Bugfix: fix test signal-3 for slurm 16.05.

------------------------------------------------------------------------
9c48a14 | Michael Rauh | Mon, 14 Nov 2016 15:43:49 +0100

Bugfix: delete psslurm configuration in pelogue plugin if loading
of psslurm fails (JRT:#6086).
Bugfix: let psslurm, pelogue, psexec, psmunge and pspam be unloaded without force.

------------------------------------------------------------------------
d9f5029 | Michael Rauh | Thu, 10 Nov 2016 12:26:23 +0100

Enhancement: Buffered I/O flags changed in slurm 16.05.

------------------------------------------------------------------------
3f07162 | Michael Rauh | Wed, 2 Nov 2016 14:42:30 +0100

Update regression test suite:

    commit 33eca31fbbbbb9860c8c3b80f3b83cf3faa0b96f
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Thu Oct 27 17:12:30 2016 +0200

	Update documentation

    commit fccb50b8c65c26e49a59f9686d858ee6fbe45869
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Mon Aug 15 12:49:21 2016 +0200

	Fix exit-code tests on systems with slow database

	This commit changes the exit-code-.* evaluation routines
	to poll the database entries until they are complete. This
	fixes test failures on our 16.05 test system.

	At the same time the following tests are renamed:
	  - exit-code-6 -> exit-code-5
	  - exit-code-7 -> exit-code-6

    commit 3e1040c21f322b81799e9d6b3176a56b0c4dedc3
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Wed Apr 20 17:19:32 2016 +0200

	Add a test for ticket 225

    commit 0713d81278af94203edd94f4b652e0a256bf3c18
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Tue Nov 18 10:20:27 2014 +0100

	test ticket-77: Update time values

	On JUROPATEST we noticed test failures in rare cases. Increasing
	the sleep times fixes the problem.

    commit 0db2ba470e320eb2658af7409809e409d30ad367
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Thu Oct 27 16:22:19 2016 +0200

	Fix expect folder download script

	This commit fixes two problems with the upstream/download.py
	file:

	  - Use correct upstream/patches folder
	  - Support older git versions

    commit e92201d1723dd3feb461c60377a1d208f99fbbee
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Thu Oct 27 16:09:04 2016 +0200

	Add tools to download upstream testsuite

	This commit adds a new command upstream/download.py that can
	be used to download the correct upstream expect folder and apply
	patches that may be required for our test environment.

    commit adc47f45d9df76bf7399aaae3174bead6181090c
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Tue Oct 11 16:41:14 2016 +0200

	Fix job array tests for version 16.05

------------------------------------------------------------------------
98715e2 | Michael Rauh | Wed, 2 Nov 2016 14:08:08 +0100

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
663a414 | Michael Rauh | Thu, 27 Oct 2016 16:26:05 +0200

New psslurm version 110.

------------------------------------------------------------------------
83a964f | Michael Rauh | Thu, 27 Oct 2016 16:23:56 +0200

Actually fix growBuffer() of plugincomm.

------------------------------------------------------------------------
5c48be8 | krempel | Tue, 18 Oct 2016 11:03:49 +0000

Make spawnTasks public for using in plugins

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9442 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
6c26de5 | Michael Rauh | Mon, 17 Oct 2016 15:52:29 +0200

Bugfix: limit the size of line buffered output (JRT:#6067).
Bugfix: fix overflow in growBuffer() of plugincomm.

------------------------------------------------------------------------
6c50379 | Michael Rauh | Wed, 12 Oct 2016 11:25:19 +0200

Merge master excluding complicated plugincomm changes.

------------------------------------------------------------------------
6339817 | Michael Rauh | Tue, 11 Oct 2016 10:12:30 +0200

Update regression test suite:

    commit d832bf9ab7fcf33fd03ec7166a663e6ab1808f94
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Tue Oct 11 09:21:49 2016 +0200

	Bug fix for ticket-251 tests

    commit 12dadb2bde47bf788ab6106be00e28bcf6f1a6ca
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Tue Oct 11 08:53:43 2016 +0200

	Add additional umask tests

	With commit 58dea24602fe7b6cd98ae21df7780e13e6ae4d3a
	to the Slurm repository SLURM_UMASK is now exported
	to the batch script. Therefore srun will pick up the
	value of SLURM_UMASK rather than read the umask() via
	glibc. In contrast to umask-[1,2] the tests umask-[3,4]
	change the SLURM_UMASK value to ensure that this change
	has no impact on the test outcome.

    commit a60d158237e55666adeaf5d24a62040571f21a08
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Mon Oct 10 17:30:08 2016 +0200

	Fix ticket-63 for RHEL7 systems

    commit 874b385cc28b3e14fd8ef3c7fe0c2d0fd7cec80e
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Mon Oct 10 17:11:54 2016 +0200

	Fix huge-env tests

	Fix the huge-env tests for systems with soft stack size
	limits (CentOS 7).

    commit 27feb886e2be428a0773b8e55fdf866dc0bb5d1f
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Mon Oct 10 17:02:18 2016 +0200

	Fix labels-2 test for small cluster

    commit d08be36a96b87032b6a8a9cc988649fa69ef4cda
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Mon Oct 10 16:14:21 2016 +0200

	Add second umask test with salloc

    commit 1c7d703118eef908785a4dbd9825c59b267c0f1a
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Mon Oct 10 15:57:27 2016 +0200

	Fix more tests for Slurm version 16.05

	This is a follow-up to commit e06c0d.

------------------------------------------------------------------------
80db00d | Michael Rauh | Mon, 10 Oct 2016 16:20:00 +0200

Merge pluginfrag changes from master.

------------------------------------------------------------------------
26895df | Michael Rauh | Mon, 10 Oct 2016 13:04:03 +0200

Merge pluginenv, pluginlog and pluginmalloc changes from master.

------------------------------------------------------------------------
ebef2c6 | Michael Rauh | Mon, 10 Oct 2016 12:39:23 +0200

Merge psmom changes from master.

------------------------------------------------------------------------
6482f2a | Michael Rauh | Wed, 28 Sep 2016 11:45:59 +0200

Update regression test suite:

    commit 9fa0291250ecabaed283a7c1a50cab02ea929eca
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Wed Sep 21 18:45:35 2016 +0200

	Add new tests for ticket 251

    commit 15abdfd61671f25de978aa4ac337ef7f6c9e921c
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Wed Sep 21 18:41:10 2016 +0200

	Add new pmi-{rank,size} tests

    commit 7b3dbc49a04ea511d2939a617feef3fdbec89dae
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Mon Sep 12 09:28:45 2016 +0200

	Update test mpi-comm-spawn-intel

	The module structure on JUROPA3 has
	changed recently.

------------------------------------------------------------------------
5ebd6d5 | Michael Rauh | Tue, 27 Sep 2016 16:35:59 +0200

Bugfix: fix bug introduced in 90ca9c21.

------------------------------------------------------------------------
372f5bd | eicker | Fri, 23 Sep 2016 10:22:29 +0000

Allow cleanup of futile spawn information (jrt:#5792)


git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9434 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
90ca9c2 | Michael Rauh | Mon, 26 Sep 2016 12:51:15 +0200

Bugfix: first received step does not have to be step 0 (PCT:#230).

------------------------------------------------------------------------
7b7935f | Michael Rauh | Tue, 20 Sep 2016 17:02:51 +0200

Bugfix: lookup username for pam ssh access in allocation (PSC:#172).

------------------------------------------------------------------------
802dd30 | Michael Rauh | Tue, 20 Sep 2016 14:36:02 +0200

Enhancement: disable the PMI layer if SLURM_MPI_TYPE is set
to "none" (#5501).

------------------------------------------------------------------------
08b447e | Michael Rauh | Tue, 20 Sep 2016 13:59:07 +0200

Enhancement: export SLURM_MPI_TYPE to job environment.

------------------------------------------------------------------------
9f526d9 | Michael Rauh | Tue, 20 Sep 2016 13:48:02 +0200

Added MEASURE_KVS_PROVIDER for debugging the kvs phase to the whitelist.

------------------------------------------------------------------------
bc3a33b | Michael Rauh | Mon, 5 Sep 2016 16:46:02 +0200

New psslurm version 108.

------------------------------------------------------------------------
28c564e | Michael Rauh | Mon, 5 Sep 2016 15:51:23 +0200

Merge branch 'psslurm-devel' of git.ccc:/psmgmt into psslurm-devel

------------------------------------------------------------------------
0bc1729 | Stephan Krempel | Thu, 1 Sep 2016 13:58:41 +0200

Fix number format in some log messages

------------------------------------------------------------------------
3d8f86f | Stephan Krempel | Thu, 1 Sep 2016 13:41:32 +0200

Fix typos

------------------------------------------------------------------------
a361231 | Stephan Krempel | Thu, 1 Sep 2016 13:58:41 +0200

Fix number format in some log messages

------------------------------------------------------------------------
f6c222b | Stephan Krempel | Thu, 1 Sep 2016 13:41:32 +0200

Fix typos

------------------------------------------------------------------------
c9abcb3 | Michael Rauh | Mon, 5 Sep 2016 15:25:48 +0200

Let psslurm 14.03 version use the old behaviour with buffered stderr.

------------------------------------------------------------------------
3448fbe | Michael Rauh | Mon, 5 Sep 2016 13:47:05 +0200

Enhancement: improved error messages if finding the corresponding step to
a task fails.

------------------------------------------------------------------------
eadc6aa | Michael Rauh | Mon, 29 Aug 2016 15:28:49 +0200

Update regression test suite:

    Bug fix

    This commit fixes a problem introduced in commit
    e06c0da297ab89d68cd781f47f1200982c21b367.

------------------------------------------------------------------------
c871e49 | eicker | Thu, 25 Aug 2016 09:37:23 +0000

Bugfix: Ensure all fds are handled if number increased in config (jrt:#5879)


git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9418 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
839fa1e | Stephan Krempel | Wed, 24 Aug 2016 16:30:05 +0200

Bugfix: Finalize FragComm in case of init error

This is needed to unregisters node down hook registered by FragComm.

------------------------------------------------------------------------
48904b8 | Stephan Krempel | Wed, 24 Aug 2016 16:26:32 +0200

Fix error message for gethostbyname errors in plugincommon

------------------------------------------------------------------------
aba85f6 | Michael Rauh | Fri, 19 Aug 2016 11:18:35 +0200

Bugfix: don't set PMI_APPNUM if PMI is disabled.

------------------------------------------------------------------------
2cc14f0 | Michael Rauh | Thu, 18 Aug 2016 12:55:07 +0200

Enhancement: prevent users from overwriting various PMI environment
variables.

------------------------------------------------------------------------
8a3235e | Michael Rauh | Thu, 18 Aug 2016 10:02:53 +0200

Enhancement: improve logging of psexec plugin.

------------------------------------------------------------------------
d584147 | Michael Rauh | Wed, 10 Aug 2016 10:07:36 +0200

Update regression test suite:

    commit 1cd4796529647383361aca26f9410c72596472b4
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Sun Jul 31 14:14:14 2016 +0200

	Fix tests for Slurm version 16.05

------------------------------------------------------------------------
03d7196 | moschny | Thu, 9 Jun 2016 20:11:37 +0000

Fix copy-and-paste error.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9385 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
0d0aff4 | Michael Rauh | Tue, 9 Aug 2016 12:02:21 +0200

Disable munge version check temporarly.

------------------------------------------------------------------------
7ca90f1 | Michael Rauh | Thu, 4 Aug 2016 11:53:45 +0200

Merge branch 'psslurm-devel' of git.ccc:/psmgmt into psslurm-devel

------------------------------------------------------------------------
4a9616b | Stephan Krempel | Thu, 14 Jul 2016 16:40:44 +0200

Bugfix: Compile error building without libnuma

------------------------------------------------------------------------
1e55e5b | moschny | Wed, 3 Aug 2016 15:25:15 +0000

Try to fix handling of CONFIGARGS in toplevel Makefile.

- Fix quoting.
- Fix merging of internal and external CONFIGARGS.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9409 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
d3e8aab | Michael Rauh | Mon, 1 Aug 2016 16:31:36 +0200

Log failures when registering a socket fails.

------------------------------------------------------------------------
389fd54 | Michael Rauh | Mon, 25 Jul 2016 14:54:38 +0200

Enhancement: fix signal sending for slurm 16.05 protocol.

------------------------------------------------------------------------
58376e9 | Michael Rauh | Fri, 22 Jul 2016 14:57:00 +0200

Bugfix: STDERR is always unbuffered.

------------------------------------------------------------------------
d36c870 | Michael Rauh | Fri, 22 Jul 2016 13:56:49 +0200

Bugfix: make sure label and raw IO options don't clash in slurm 16.05.

------------------------------------------------------------------------
c0c06ee | Michael Rauh | Fri, 22 Jul 2016 13:24:48 +0200

Bugfix: make sure srun terminates on task launch failures.

------------------------------------------------------------------------
a01a164 | Michael Rauh | Fri, 22 Jul 2016 13:21:56 +0200

Switch to Slurm 16.05.0-0rc2.

------------------------------------------------------------------------
66cbe03 | Michael Rauh | Tue, 19 Jul 2016 11:43:06 +0200

Update regression test suite:

    commit a654ae18159ab25bb8d527158177881b45d5e1e1
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Thu Jul 7 17:00:54 2016 +0200

	Add tests for ticket 172

    commit 43bd17dd2f0f4eabedaab8fc057c7af297bc56d8
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Tue May 10 18:02:58 2016 +0200

	Bug fix for ticket 244

	Remove the "--ntasks 192" argument from salloc.

    commit 49625e92e3eaa93f2cacfcc2dcd7a75a7f4a9fee
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Tue May 10 17:18:41 2016 +0200

	Improve tests for ticket 165

	srun might print the message "srun: Job step created" when the
	launch takes long(er). We need to filter this out when checking
	file sizes.

    commit 5e5ecfcfa009ed770f537e3260146b1eb8572a40
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Thu Jul 7 16:47:20 2016 +0200

	Reduce environment dependencies when compiling with gcc

    commit bde52aea7f1ab4356c28e341e95fbfa7265e9303
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Thu Jul 7 16:44:48 2016 +0200

	Add a test for ticket #249

    commit 9db9bdf4767aba6a676ce9e7472cf7d7ac583d46
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Mon May 9 16:45:08 2016 +0200

	Add a test for ticket 246

    commit 847de1078e41b6115089beee7ac048d800e155bd
    Author: Dorian Krause <d.krause@fz-juelich.de>
    Date:   Thu Apr 28 21:20:19 2016 +0200

	Add a test for ticket 244

------------------------------------------------------------------------
de03c00 | Michael Rauh | Fri, 15 Jul 2016 12:12:25 +0200

Added debug function to print binary data in hex format.

------------------------------------------------------------------------
0bfe915 | Michael Rauh | Fri, 1 Jul 2016 16:23:21 +0200

Enhancement: answer all 1605 protocol request correct.

------------------------------------------------------------------------
8b82823 | Stephan Krempel | Thu, 30 Jun 2016 14:12:21 +0200

Enable building of rpms with slurm 16.05 support

Use make CONFIGARGS='-with slurm1605' rpm.

------------------------------------------------------------------------
eaabf31 | Michael Rauh | Fri, 10 Jun 2016 13:26:47 +0200

Enhancement: first steps to add support for slurm  protocol version 1605.
Added configure option "--enable-slurm_proto_1605".

------------------------------------------------------------------------
2dbd3cc | Michael Rauh | Thu, 9 Jun 2016 17:45:50 +0200

Move function listenUnixSocket() from plugin library to pspam.

------------------------------------------------------------------------
b392462 | Michael Rauh | Thu, 9 Jun 2016 14:01:14 +0200

New psslurm version 106.

------------------------------------------------------------------------
24a54f9 | Michael Rauh | Thu, 9 Jun 2016 12:36:54 +0200

Merge branch 'psslurm-devel' of git.ccc:/psmgmt into psslurm-devel

------------------------------------------------------------------------
9e27995 | Stephan Krempel | Thu, 9 Jun 2016 12:14:08 +0200

psslurm: Set working directory for task epilog

------------------------------------------------------------------------
4707810 | Michael Rauh | Thu, 9 Jun 2016 10:00:08 +0200

Fix merge error with master branch.

------------------------------------------------------------------------
27ab470 | Michael Rauh | Thu, 9 Jun 2016 09:49:12 +0200

Merge branch 'psslurm-devel' of git.ccc:/psmgmt into psslurm-devel

------------------------------------------------------------------------
f80e76e | Stephan Krempel | Wed, 8 Jun 2016 16:23:23 +0200

psslurm: New mechanism for task epilog execution

------------------------------------------------------------------------
895e54b | Michael Rauh | Tue, 7 Jun 2016 17:13:00 +0200

Bugfix: let psexec handle timeout for prologue/epilogue scripts.

------------------------------------------------------------------------
3244203 | Michael Rauh | Tue, 7 Jun 2016 15:43:11 +0200

Bugfix: save forwarded message result if sister node dies.

------------------------------------------------------------------------
023676a | Michael Rauh | Fri, 3 Jun 2016 10:38:25 +0200

Enhancement: psslurm will refuse to load if the slurm controller
addresses cannot be resolved into ParaStation IDs.
Enhancement: improved error messages if resolving hostnames in the
plugin library fails.

------------------------------------------------------------------------
ef31558 | Michael Rauh | Wed, 1 Jun 2016 16:47:32 +0200

Bugfix: make sure gres list is properly init.

------------------------------------------------------------------------
dfd60c0 | Michael Rauh | Wed, 1 Jun 2016 16:11:45 +0200

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
8908eaf | Michael Rauh | Wed, 1 Jun 2016 16:11:02 +0200

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
5ebeab3 | Michael Rauh | Wed, 1 Jun 2016 14:48:47 +0200

Bugfix: don't exit on gres parsing errors.

------------------------------------------------------------------------
ef56060 | Michael Rauh | Tue, 31 May 2016 10:43:04 +0200

Cleanup obsolete code.

------------------------------------------------------------------------
8afe5c9 | Michael Rauh | Mon, 30 May 2016 15:55:18 +0200

Bugfix: never exit in hook PSIDHOOK_EXEC_CLIENT_USER.

------------------------------------------------------------------------
9a9a82c | Michael Rauh | Wed, 25 May 2016 13:35:04 +0200

Merge remote-tracking branch 'dorian/pstest' into psslurm-devel

------------------------------------------------------------------------
847de10 | Dorian Krause | Thu, 28 Apr 2016 21:20:19 +0200

Add a test for ticket 244

------------------------------------------------------------------------
dbcecb5 | Dorian Krause | Wed, 20 Apr 2016 17:34:58 +0200

Added a test for ticket 240

------------------------------------------------------------------------
632599a | Dorian Krause | Wed, 20 Apr 2016 16:55:50 +0200

Add a test for ticket 243

------------------------------------------------------------------------
655987c | Dorian Krause | Wed, 20 Apr 2016 16:06:34 +0200

Fix second bug in mpi-comm-spawn-parastation test

------------------------------------------------------------------------
b162eb7 | Dorian Krause | Wed, 20 Apr 2016 16:04:43 +0200

Bug fix for test mpi-comm-spawn-parastation

------------------------------------------------------------------------
1c9851b | Dorian Krause | Tue, 19 Apr 2016 17:29:47 +0200

Update mpi-comm-spawn tests

Add a new test for ParaStation MPI

------------------------------------------------------------------------
418e246 | Dorian Krause | Thu, 31 Mar 2016 11:34:16 +0200

Add tests for ticket 230

------------------------------------------------------------------------
2c8fe78 | Dorian Krause | Thu, 31 Mar 2016 09:56:41 +0200

Add a test for #242.

------------------------------------------------------------------------
685b38f | Dorian Krause | Thu, 17 Mar 2016 19:43:59 +0100

Fix test for ticket 238

------------------------------------------------------------------------
94f3373 | Dorian Krause | Fri, 29 Jan 2016 14:21:23 +0100

Add a test for ticket 238

------------------------------------------------------------------------
926b908 | Dorian Krause | Tue, 5 Jan 2016 15:40:12 +0100

Add tests for ticket 235

------------------------------------------------------------------------
9703a88 | Dorian Krause | Thu, 10 Dec 2015 15:49:31 +0100

Update mem_bind tests

Update the mem_bind tests (use --cpu_bind=sockets) and
fix a bug in mem_bind_local.

------------------------------------------------------------------------
8a89056 | Michael Rauh | Wed, 25 May 2016 12:34:08 +0200

Merge branch 'psslurm-devel' of git.ccc:/psmgmt into psslurm-devel

------------------------------------------------------------------------
cc77b33 | Stephan Krempel | Tue, 24 May 2016 16:19:43 +0200

pspmi: Slightly better debugging output

------------------------------------------------------------------------
5723565 | Michael Rauh | Wed, 25 May 2016 12:31:49 +0200

Enhancment: add support for cgroup plugin in psslurm.

------------------------------------------------------------------------
e102629 | Michael Rauh | Tue, 24 May 2016 13:17:09 +0200

Merge branch 'psslurm-devel' of git.ccc:/psmgmt into psslurm-devel

------------------------------------------------------------------------
9af1142 | Stephan Krempel | Thu, 19 May 2016 11:15:55 +0200

pspmi: Bugfix in MPI_Comm_spawn handling

------------------------------------------------------------------------
22c0afa | Stephan Krempel | Tue, 17 May 2016 17:47:14 +0200

pspmi: Use pluginstrv string arrays in spawn handling

------------------------------------------------------------------------
e10d7d8 | Stephan Krempel | Tue, 17 May 2016 17:45:48 +0200

plugincommon: Remove useless const modifiers

------------------------------------------------------------------------
a5c3503 | Stephan Krempel | Fri, 13 May 2016 16:37:25 +0200

pspmi: Fix potential problem found by clang

------------------------------------------------------------------------
f253350 | Stephan Krempel | Fri, 13 May 2016 16:36:41 +0200

pspmi: Fallback to default spawn handling

If the PMI fill spawn task function tells she is not responsible,
try to use the default fill spawn task function as fallback.
This is needed if you start a job directly using mpiexec while
psslurm is loaded.

------------------------------------------------------------------------
0ce1ef1 | Stephan Krempel | Wed, 11 May 2016 23:53:54 +0200

pspmi: More debug output from pmi client

------------------------------------------------------------------------
cd7f012 | Michael Rauh | Tue, 24 May 2016 12:52:47 +0200

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
f9f7a02 | Michael Rauh | Tue, 24 May 2016 12:33:01 +0200

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
289a360 | Michael Rauh | Tue, 17 May 2016 16:39:43 +0200

New psslurm version 104.

------------------------------------------------------------------------
e793741 | Michael Rauh | Tue, 17 May 2016 16:37:01 +0200

Bugfix: Use seperate receive buffers for the fragmentation layer (#5465).
Bugfix: fix segfault when freeing forward data (#5481).
Bugfix: fix memory leak.
Fixed bug in psexec script examples.
Mask PMI spawn debug print.

------------------------------------------------------------------------
54f169b | Michael Rauh | Tue, 10 May 2016 13:48:16 +0200

New psslurm version 102.

------------------------------------------------------------------------
9162eb7 | Michael Rauh | Tue, 10 May 2016 11:30:30 +0200

Bugfix: distribute the job local node id to sister nodes (#5485).

------------------------------------------------------------------------
0959916 | Stephan Krempel | Tue, 10 May 2016 09:43:26 +0200

Merge master version '5.0.50-1' into psslurm-devel

------------------------------------------------------------------------
a9a8dd4 | Michael Rauh | Mon, 2 May 2016 12:51:03 +0200

New psslurm version 100.

------------------------------------------------------------------------
8c0f091 | Michael Rauh | Mon, 2 May 2016 09:56:20 +0200

Bugfix: fix memory leaks.

------------------------------------------------------------------------
5d0314c | Michael Rauh | Thu, 28 Apr 2016 12:51:14 +0200

New psslurm version 98.

------------------------------------------------------------------------
eeaf651 | Michael Rauh | Thu, 28 Apr 2016 10:29:14 +0200

Cleanup obsolete code.

------------------------------------------------------------------------
a97b735 | Michael Rauh | Thu, 28 Apr 2016 09:55:11 +0200

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
ec25a03 | Stephan Krempel | Thu, 28 Apr 2016 06:56:54 +0200

Use pluginstrv in psslurm process spawn handling

This removes a limitation when using multiple binaries

------------------------------------------------------------------------
7ff5fdb | Stephan Krempel | Thu, 28 Apr 2016 06:56:14 +0200

plugincommon: Add strv* functions for string array handling

------------------------------------------------------------------------
14f727e | Stephan Krempel | Thu, 21 Apr 2016 16:24:51 +0200

psslurm: Update the regression test suite

Squashed commit of the following:

commit dbcecb5d8f0781d04937b346f02aceb223aaeb3e
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Wed Apr 20 17:34:58 2016 +0200

    Added a test for ticket 240

commit 632599a74b40fbaeb8ad7cbe6c8633e8e46daf1a
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Wed Apr 20 16:55:50 2016 +0200

    Add a test for ticket 243

commit 655987c79fe85a75bcc4f5425842a3a218b30e4a
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Wed Apr 20 16:06:34 2016 +0200

    Fix second bug in mpi-comm-spawn-parastation test

commit b162eb71b9103355ad7412515931edea68a2d7ba
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Wed Apr 20 16:04:43 2016 +0200

    Bug fix for test mpi-comm-spawn-parastation

commit 1c9851b466c2bbdbd35400db5712c4ce51edeaa2
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Tue Apr 19 17:29:47 2016 +0200

    Update mpi-comm-spawn tests

    Add a new test for ParaStation MPI

------------------------------------------------------------------------
da1eed7 | Michael Rauh | Fri, 15 Apr 2016 14:24:33 +0200

New psslurm version 96.

------------------------------------------------------------------------
b48c674 | Stephan Krempel | Thu, 14 Apr 2016 12:09:52 +0200

psslurm: Support MPI_comm_spawn

------------------------------------------------------------------------
ea10c83 | Stephan Krempel | Thu, 14 Apr 2016 12:07:40 +0200

pspmi: Make spawn handling changeable

------------------------------------------------------------------------
bf06c03 | Michael Rauh | Wed, 13 Apr 2016 13:19:57 +0200

Enhancement: send accounting updates in aggregated form.

------------------------------------------------------------------------
db7f82a | Michael Rauh | Mon, 11 Apr 2016 14:43:13 +0200

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
2b3d860 | Michael Rauh | Fri, 1 Apr 2016 11:16:00 +0200

New psslurm version 94.

------------------------------------------------------------------------
707d988 | Michael Rauh | Thu, 31 Mar 2016 16:14:26 +0200

Bugfix: add DISPLAY environment variable to white-list (#242).
Enhancement: remove PSI_INPUTDEST from process environment.
Enhancement: only signal non complete steps at job obit (#236).
Enhancement: implemented KVS interface in psslurm.

------------------------------------------------------------------------
8b89a97 | Michael Rauh | Thu, 31 Mar 2016 15:57:12 +0200

Update regression test suite:
    * Add tests for ticket 230
    * Add a test for #242.

------------------------------------------------------------------------
6a1d000 | Stephan Krempel | Thu, 24 Mar 2016 00:37:48 +0100

Fix argument parsing in psslurm's multi-procs option

------------------------------------------------------------------------
ef73151 | Stephan Krempel | Thu, 24 Mar 2016 00:32:38 +0100

Add *.swp to gitignore

------------------------------------------------------------------------
510319f | Michael Rauh | Fri, 18 Mar 2016 15:19:39 +0100

Merge branch 'psslurm-devel' of git.ccc:/psmgmt into psslurm-devel

------------------------------------------------------------------------
961127d | Stephan Krempel | Wed, 9 Mar 2016 12:56:58 +0100

Remove double header including in pmikvs.c

------------------------------------------------------------------------
45f4de8 | Michael Rauh | Fri, 18 Mar 2016 14:51:01 +0100

New psslurm version 92.

------------------------------------------------------------------------
7eb04ad | Michael Rauh | Fri, 18 Mar 2016 14:50:27 +0100

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
926ead8 | Michael Rauh | Fri, 18 Mar 2016 14:39:28 +0100

Bugfix: fix segfault in pelogue plugin.
Bugfix: fix no allocation for step problem (#238).
Bugfix: fix invalid local node id leading to failed startup (#240).
Bugfix: don't execute expilogue for every step (#239).
Enhancement: isolate service processes from user environment (#233).
Enhancement:  use uint32_t for I/O rank handling.
Enhancement: report the correct count of gres resources even if some are
    missing (#232).
Update regression test suite.
Get rid of obsolete psslurmaccount.c file.

------------------------------------------------------------------------
15b4964 | Michael Rauh | Tue, 8 Mar 2016 16:54:28 +0100

New psslurm version 90.

------------------------------------------------------------------------
c44959b | Michael Rauh | Tue, 8 Mar 2016 16:17:37 +0100

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
711e6d7 | Michael Rauh | Tue, 8 Mar 2016 10:22:00 +0100

Unset __PSI_EXPORTS in mpiexec to reduce environment.

------------------------------------------------------------------------
3006150 | Michael Rauh | Tue, 8 Mar 2016 10:05:08 +0100

Get rid of temorarly fix now that we are using openChannel() for stdin.

------------------------------------------------------------------------
13ebc7e | Michael Rauh | Tue, 8 Mar 2016 09:48:25 +0100

Removed obsolete file no_flowcontroll.c.

------------------------------------------------------------------------
b4f979d | Michael Rauh | Tue, 8 Mar 2016 09:47:44 +0100

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
7ff7419 | Michael Rauh | Mon, 7 Mar 2016 16:23:35 +0100

Push plugin api requirements for psslurm, psaccount and pelogue plugin
to version 114.

------------------------------------------------------------------------
c0f90bc | Michael Rauh | Mon, 7 Mar 2016 15:38:46 +0100

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
5edfce2 | Michael Rauh | Mon, 7 Mar 2016 15:23:48 +0100

Undo change in kvsprovider which can lead to strange signals.

------------------------------------------------------------------------
ddfc96a | Michael Rauh | Thu, 3 Mar 2016 13:20:30 +0100

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
34508f5 | Michael Rauh | Thu, 3 Mar 2016 10:56:51 +0100

Fix merge error.

------------------------------------------------------------------------
53d1042 | Michael Rauh | Thu, 3 Mar 2016 10:43:09 +0100

Fix merge error and cleanup obsolete code in mpiexec.

------------------------------------------------------------------------
b84c534 | Michael Rauh | Thu, 3 Mar 2016 10:35:44 +0100

Bugfix: temporary fix to prevent closing of the stdin socket if it is
  also used for stdout or stderr.

------------------------------------------------------------------------
c4cb325 | Michael Rauh | Thu, 3 Mar 2016 10:27:02 +0100

Blocking of SIGUSR1 and SIGUSR2 will be moved into PSID_resetSigs()
after merge.

------------------------------------------------------------------------
a7528e9 | Michael Rauh | Thu, 3 Mar 2016 10:21:29 +0100

Increase plugin api version for new hooks
    PSIDHOOK_PELOGUE_FINISH and PSIDHOOK_FRWRD_DSOCK.

------------------------------------------------------------------------
028e3ec | Michael Rauh | Thu, 3 Mar 2016 10:14:51 +0100

Enhancement: Improved some comments.
Enhancement: rename PSI_LOGGER_UNBUFFERED to mark it private.

------------------------------------------------------------------------
af0650d | Michael Rauh | Wed, 2 Mar 2016 10:11:23 +0100

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
b5dd5a8 | moschny | Tue, 1 Mar 2016 15:19:48 +0000

Restore x-bit for sysv init script.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9300 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
08bddf6 | moschny | Tue, 1 Mar 2016 15:10:10 +0000

Fix rpmbuild for non-systemd systems.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9299 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
5aef0fc | Michael Rauh | Tue, 1 Mar 2016 11:42:07 +0100

Close stdin socket of psidforwarder if no data is avaiable.

------------------------------------------------------------------------
6adba39 | Michael Rauh | Mon, 29 Feb 2016 15:29:12 +0100

Bugfix: unblock SIGUSR1/SIGUSR2 for psidforwarder children.

------------------------------------------------------------------------
eca3dd1 | Michael Rauh | Fri, 26 Feb 2016 15:34:05 +0100

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
ae76246 | Michael Rauh | Thu, 11 Feb 2016 15:07:37 +0100

New psslurm version 88.

------------------------------------------------------------------------
1c896ff | Michael Rauh | Thu, 11 Feb 2016 15:06:44 +0100

Undo 6c11990a2f0.

------------------------------------------------------------------------
4a5b8f0 | Michael Rauh | Thu, 11 Feb 2016 15:00:53 +0100

Bugfix: fix various prototype errors.
Bugfix: fix segfault in pelogue plugin.
Enhancement: detect invalid nrOfNodes at job start.

------------------------------------------------------------------------
2ea4650 | moschny | Tue, 2 Feb 2016 18:42:04 +0000

Simplify, and fix a clang warning.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9245 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
eef7a29 | moschny | Tue, 2 Feb 2016 18:41:36 +0000

Fix undefined behavior.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9244 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
6c11990 | Michael Rauh | Wed, 10 Feb 2016 11:40:25 +0100

Bugfix: fix possible memory corruption.

------------------------------------------------------------------------
8102373 | Thomas Moschny | Mon, 8 Feb 2016 17:05:29 +0100

Remove extraneous parentheses.

------------------------------------------------------------------------
990fd6d | Michael Rauh | Tue, 2 Feb 2016 09:52:34 +0100

New psslurm version 86.

------------------------------------------------------------------------
9b7598f | Michael Rauh | Tue, 2 Feb 2016 09:51:45 +0100

Bugfix: fix possible segfault.

------------------------------------------------------------------------
5dea1fe | Michael Rauh | Mon, 1 Feb 2016 18:42:24 +0100

New psslurm version 84.

------------------------------------------------------------------------
d7ddca0 | moschny | Mon, 1 Feb 2016 15:37:57 +0000

Merge current state of the systemd branch.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9243 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
4da0b2a | moschny | Mon, 1 Feb 2016 15:07:19 +0000

Define install dirs explicitly, seems to be needed for F23+.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9242 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
6e446a3 | eicker | Fri, 29 Jan 2016 17:33:19 +0000

Enhancement: Delayed finalization of psid's parent process (#2522)


git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9240 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
03e4e9d | Michael Rauh | Mon, 1 Feb 2016 15:45:42 +0100

Enhancement: new psexec plugin to execute scripts on remote nodes.
Enhancement: let psslurm use psexec to offline nodes and requeue jobs.
Enhancement: disable accounting in PMI startup phase.

Update regression test suite:
    * Add tests for ticket 235
    * Update mem_bind tests
    * Update the mem_bind tests (use --cpu_bind=sockets) and
    	fix a bug in mem_bind_local.
    * Bug fix for test ticket-203-2
    * Add --propagate=CPU to the srun arguments in case CPU limits
    	are not propagated (the standard on most systems).

------------------------------------------------------------------------
06248e9 | Michael Rauh | Mon, 1 Feb 2016 15:41:38 +0100

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
7999b99 | Stephan Krempel | Thu, 14 Jan 2016 13:54:01 +0100

psslurm: Fix relative path of task pro/epilogue script

------------------------------------------------------------------------
cafb967 | Michael Rauh | Wed, 30 Dec 2015 14:49:13 +0100

New psslurm version 82.

------------------------------------------------------------------------
e11cb2b | Michael Rauh | Wed, 30 Dec 2015 14:43:07 +0100

Enhancement: make sure all step forwarders are gone at batch job end.
Enhancement: remove __PSI_EXPORTS, __PMI_PROVIDER_FD and
__PSI_LOGGER_TID from user env.
Enhancement: add debug mask and malloc check to psslurm configuration.
Enhancement: Improved logging.
Enhancement: kill all remaining steps hard when a job finishes.
Bugfix: send epilogue complete from sister nodes only once.
Bugfix: use fragmented messages for job launch infos.
Bugfix: let all steps wait until prologue is finished (psc:#230).
Bugfix: test for already deleted tasks when cloning the environment.

Enhancement: Provide PSIDclient_clearMem() to help with #1218

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9220 21b3a009-d9f9-44df-8eaf-6b729cfaa075

Enhancement: Provide PSIDRDP_clearMem() to help with #1218

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9219 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
4f2be61 | Michael Rauh | Thu, 17 Dec 2015 10:05:28 +0100

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
d1d51be | Michael Rauh | Thu, 10 Dec 2015 10:57:20 +0100

New psslurm version 80.

------------------------------------------------------------------------
bc1e270 | Michael Rauh | Wed, 9 Dec 2015 15:26:29 +0100

Fix merge problem.

------------------------------------------------------------------------
7c5af21 | Michael Rauh | Wed, 9 Dec 2015 15:25:09 +0100

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
ce87df3 | Michael Rauh | Wed, 9 Dec 2015 15:24:41 +0100

Merge branch 'psslurm-devel' of git.ccc:/psmgmt into psslurm-devel

------------------------------------------------------------------------
2285e89 | Stephan Krempel | Tue, 8 Dec 2015 15:37:07 +0100

Make default membind type configurable

------------------------------------------------------------------------
c3203bb | Stephan Krempel | Tue, 8 Dec 2015 09:38:31 +0100

Merge branch 'pstest' into psslurm-devel

------------------------------------------------------------------------
fb215b4 | Dorian Krause | Tue, 1 Dec 2015 08:32:31 +0100

Bug fix for test ticket-203-2

Add --propagate=CPU to the srun arguments in case CPU limits
are not propagated (the standard on most systems).

------------------------------------------------------------------------
34c7716 | Dorian Krause | Sat, 7 Nov 2015 14:22:31 +0100

Add test mem_bind-default

------------------------------------------------------------------------
accdda9 | Dorian Krause | Sun, 1 Nov 2015 14:52:08 +0100

Add --cleanup option

If --cleanup is specified the output of a test execution that
succeeded, has been canceled or not executed due to a lack of
resources will be removed from the filesystem.

------------------------------------------------------------------------
24127b5 | Dorian Krause | Sun, 1 Nov 2015 13:56:05 +0100

Move print_test_outcome into main thread

Let the main thread print the test outcomes.

------------------------------------------------------------------------
001cb67 | Dorian Krause | Sun, 11 Oct 2015 20:20:02 +0200

Fix errors in the accounting-* tests

The SystemCPU can, in some cases, be so low that the error
will fail even though the accounting information is overall
reasonable.

------------------------------------------------------------------------
e0711fb | Dorian Krause | Sat, 10 Oct 2015 18:43:02 +0200

Workaround scheduling delays caused by the GIL

Due to locking (so it seems) the execution of a frontend process
relative to a submitted batchjob can be more than a minute (I have
observed delays longer than two minutes). This commit provides
workarounds for the three tests that use batch submission in
combination with frontend processes.

------------------------------------------------------------------------
ff87cae | Dorian Krause | Sat, 10 Oct 2015 15:51:00 +0200

Add PMI_Init()/PMI_Finalize() calls to fail.py

------------------------------------------------------------------------
349d37d | Dorian Krause | Thu, 10 Sep 2015 15:42:36 +0200

Add huge-env tests

------------------------------------------------------------------------
ca0a160 | Dorian Krause | Wed, 2 Sep 2015 18:26:09 +0200

Bug fix for test multi-prog-5

------------------------------------------------------------------------
598faf3 | Dorian Krause | Wed, 26 Aug 2015 18:17:45 +0200

Use cpu_bind=socket in mem_bind-local test

------------------------------------------------------------------------
7282844 | Dorian Krause | Wed, 26 Aug 2015 18:17:20 +0200

Revert "Add a new test mem_bind-local-2"

This reverts commit f44a765adde19127f527ca5118a878b89879067a.

------------------------------------------------------------------------
57f8196 | Dorian Krause | Wed, 26 Aug 2015 18:12:55 +0200

Add a new test mem_bind-local-2

------------------------------------------------------------------------
398e948 | Dorian Krause | Wed, 26 Aug 2015 17:36:47 +0200

Add test multi-prog-5

------------------------------------------------------------------------
02f0678 | Dorian Krause | Wed, 26 Aug 2015 13:57:01 +0200

Adapt test ticket-159 to new requirements

------------------------------------------------------------------------
65ec8f3 | Dorian Krause | Tue, 25 Aug 2015 17:50:53 +0200

Remove env-CPU_BIND-{1,2} tests

The --cpu_bind argument to sbatch and salloc
is deprecated and will be dropped in version 15.08.

------------------------------------------------------------------------
7b55e4a | Dorian Krause | Tue, 4 Aug 2015 17:00:53 +0200

Fix bugs in tests that use expect for interaction

The tests srun-within-srun, ticket-165-2 and
ticket-42 implicitly assumed a PS1 variable that
included \s. We now explicitly set PS1.

------------------------------------------------------------------------
6a9d61c | Stephan Krempel | Mon, 7 Dec 2015 14:00:48 +0100

Fix calculation of core map index in pinning code

------------------------------------------------------------------------
3781f64 | Michael Rauh | Wed, 9 Dec 2015 10:07:27 +0100

Bugfix: cloning for non sorted nodelist can lead errors.

------------------------------------------------------------------------
5118152 | Michael Rauh | Fri, 4 Dec 2015 14:59:19 +0100

New psslurm version 78.

------------------------------------------------------------------------
e048770 | Michael Rauh | Fri, 4 Dec 2015 14:53:45 +0100

Bugfix: print timeout messages for steps running in a batch script.
Bugfix: fixed some memory leaks.
Bugfix: allow ssh access to sister nodes in the job.
Removed some obsolete code and disabled psspank.
Fixed some minor TODOs.
Bugfix: fixed invalid RPC msg_type=8001 in bcast.
Enhancement: added SLURM_UID and SLURM_USER to prologue/epilogue environment.
Enhancement: added support for sbatch/srun option --acctg-freq=task.
Suppress confusing psaccount error message.

------------------------------------------------------------------------
fe582cf | Michael Rauh | Fri, 27 Nov 2015 14:33:12 +0100

Enhancement: use parent taskid to find sister tasks to copy the
environment from (fixes MPI_Comm_Spawn()).
Enhancement: support non sorted node list (e.g. PSI_LOOP_NODES) for
clone environment feature.

------------------------------------------------------------------------
ccb1830 | Michael Rauh | Wed, 25 Nov 2015 12:33:32 +0100

New psslurm version 76.

------------------------------------------------------------------------
766f538 | Michael Rauh | Wed, 25 Nov 2015 12:31:49 +0100

Enhancement: send task environment once per node.

------------------------------------------------------------------------
6bfa68d | Michael Rauh | Wed, 25 Nov 2015 12:30:23 +0100

New psslurm version 74.

------------------------------------------------------------------------
a950bb5 | Michael Rauh | Tue, 24 Nov 2015 10:05:12 +0100

Enhancement: set some environment vars later.
Enhancement: added option to set distributed start per config.

------------------------------------------------------------------------
5e5e65e | Michael Rauh | Mon, 23 Nov 2015 15:02:01 +0100

Enhancement: new method for reporting back the task ids to srun.

------------------------------------------------------------------------
d3754b9 | Michael Rauh | Fri, 20 Nov 2015 09:21:48 +0100

New psslurm version 72.

------------------------------------------------------------------------
581028f | Michael Rauh | Fri, 20 Nov 2015 09:19:12 +0100

Bugfix: report return codes from slurmctld correct.
Enhancement: improved logging.
Enhancement: trim memory on batch job start.
Enhancement: allow messages from service processes located not on mother
 superior.
Bugfix: don't delete partition request too early.
Enhancement: also check for bad file descriptors in psidforwarder and
 pluginforwarder.
Bugfix: pelogue plugin should only react to dying nodes if a
  pro/epilogue is actual running.
Bugfix: fix endless loop while deleting account clients (pct:#223).

Update regression test suite:

    Add test mem_bind-default

    Add --cleanup option

    If --cleanup is specified the output of a test execution that
    succeeded, has been canceled or not executed due to a lack of
    resources will be removed from the filesystem.

    Move print_test_outcome into main thread

    Let the main thread print the test outcomes.

------------------------------------------------------------------------
d0d9da2 | Michael Rauh | Fri, 6 Nov 2015 14:09:04 +0100

New psslurm version 70.

------------------------------------------------------------------------
522279b | Michael Rauh | Fri, 6 Nov 2015 14:06:06 +0100

Bugfix: fixed memory corruption in task pro/epilogue.
Bugifx: Discontinue the blocking of SIGUSR2 after fork(). This was
    triggered by r9205.
Bugfix: Fixed various problems detected by valgrind.
Bugfix: init pelogue data correct.
Bugfix: fixed problems reported by scan-build.
Bugfix: fixed segfault in step forwarder callback (jrc:#3862).
Corrected indenting.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9206 21b3a009-d9f9-44df-8eaf-6b729cfaa075

Enhancement: Make psid's behavior under SIGUSR2 bombardment nicer. This
    shall help with jrt:#3694

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9205 21b3a009-d9f9-44df-8eaf-6b729cfaa075

Fix typo preventing compilation introduced in r9202.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9204 21b3a009-d9f9-44df-8eaf-6b729cfaa075

Bugfix: Fix memory corruption if realloc() actually moves data.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9202 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
96f24c3 | Michael Rauh | Thu, 29 Oct 2015 14:17:10 +0100

New psslurm version 68.

------------------------------------------------------------------------
2529218 | Michael Rauh | Thu, 29 Oct 2015 14:16:26 +0100

Enhancement: use signalfd() to handle SIGCHLD.

------------------------------------------------------------------------
655035b | Michael Rauh | Wed, 28 Oct 2015 11:45:34 +0100

New psslurm version 66.

------------------------------------------------------------------------
33ebe17 | Michael Rauh | Wed, 28 Oct 2015 11:27:09 +0100

Undo 2cc7f49674e62c48 to not trigger more SIGCHLD problems.

------------------------------------------------------------------------
50bccc4 | Michael Rauh | Wed, 28 Oct 2015 11:14:10 +0100

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
68a099b | Michael Rauh | Wed, 28 Oct 2015 11:01:12 +0100

Bugfix: don't use lighweight SIGCHLD blocking.
Bugfix: fixed segfault in slurm messages forwarding (jrt:#3554).
Bugfix: fixed possible segfault.
Bugfix: report correct errno when opening a tcp connection fails.
Enhancement: Improved logging.
Enhancement: Don't catch SIGFPE.

------------------------------------------------------------------------
f70ac34 | Michael Rauh | Tue, 27 Oct 2015 11:36:46 +0100

Bugfix: fixed segfault in slurm messages forwarding (jrt:#3554).

------------------------------------------------------------------------
f276408 | Michael Rauh | Wed, 21 Oct 2015 15:26:54 +0200

New psslurm version 64.

------------------------------------------------------------------------
519858e | Michael Rauh | Wed, 21 Oct 2015 14:24:01 +0200

Update regression test suite:

    Fix errors in the accounting-* tests

    The SystemCPU can, in some cases, be so low that the error
    will fail even though the accounting information is overall
    reasonable.

    Workaround scheduling delays caused by the GIL

    Due to locking (so it seems) the execution of a frontend process
    relative to a submitted batchjob can be more than a minute (I have
    observed delays longer than two minutes). This commit provides
    workarounds for the three tests that use batch submission in
    combination with frontend processes.

    Add PMI_Init()/PMI_Finalize() calls to fail.py

    Add huge-env tests

    Bug fix for test multi-prog-5

    Use cpu_bind=socket in mem_bind-local test

------------------------------------------------------------------------
674fe0d | Michael Rauh | Wed, 21 Oct 2015 12:56:55 +0200

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
f66e1d4 | Michael Rauh | Wed, 21 Oct 2015 12:55:32 +0200

Bugfix: fixed segfault in pelogue plugin (pct:#204).
Enhancement: obit psslurm jobs faster if a node failure while prologue
occurs.
Enhancement: kill the job if mother superior dies.
Cleanup pelogue plugin.
Disabled catching of signal SIGFPE so there will be a core file to analyse.

------------------------------------------------------------------------
7cce77d | Michael Rauh | Mon, 19 Oct 2015 15:15:06 +0200

Bugfix: fixed segfault in job state request.
Bugfix: don't send signals to the main psid if a new child gets spawned.
Enhancement: confirm task startup to srun faster.
Bugfix: don't send signals to the main psid if a new child gets spawned.
Enhancement: detect and handle broken I/O connections to srun faster.
Enhancement: don't forward I/O messages to psilogger if there is no
related step found.
Bugfix: answer job state request correctly.

------------------------------------------------------------------------
066f249 | Michael Rauh | Fri, 9 Oct 2015 10:33:17 +0200

Bugfix: fix permission problem when setting default resource limits.

------------------------------------------------------------------------
da1dc79 | Michael Rauh | Thu, 8 Oct 2015 16:10:53 +0200

New psslurm version 58.

------------------------------------------------------------------------
ff5d87c | Michael Rauh | Thu, 8 Oct 2015 16:08:22 +0200

Enhancement: kill hanging psslurm forwarders at jobend after grace time.

------------------------------------------------------------------------
b23a96d | Michael Rauh | Thu, 8 Oct 2015 14:28:03 +0200

Enhancement: inform psslurm forwarders about the grace kill time.

------------------------------------------------------------------------
80ad128 | Michael Rauh | Thu, 8 Oct 2015 13:45:57 +0200

Enhancement: track job grace time additionally to forwarder also in main
daemon.

------------------------------------------------------------------------
5af4d7b | Michael Rauh | Thu, 8 Oct 2015 12:16:08 +0200

Enhancement: support setting default resource limits via psslurm
    configuration.
Enhancement: allow large fragmented messages.

------------------------------------------------------------------------
c30fef0 | Stephan Krempel | Wed, 7 Oct 2015 00:11:54 +0200

Implement verbose memory pinning output

------------------------------------------------------------------------
8deda31 | Michael Rauh | Mon, 14 Sep 2015 15:26:57 +0200

New psslurm version 56.

------------------------------------------------------------------------
306d145 | Michael Rauh | Fri, 11 Sep 2015 10:22:15 +0200

Bugfix: let processes be stopped and resumed with signalfd().
Enhancement: let batch script exit successful if terminated by SIGUSR1
    (pct:#133).
Bugfix: send message task exit after closing of all I/O connections.
Enhancement: set correct derived exit code on step timeout (pct:#20).
Enhancement: improved log messages.
Enhancement: correct error message for pam ssh logins if the prologue is
    still running (pct:#171).

Update regression test suite:
 * Add huge-env tests
 * Bug fix for test multi-prog-5
 * Use cpu_bind=socket in mem_bind-local test
 * Revert "Add a new test mem_bind-local-2"
     This reverts commit f44a765adde19127f527ca5118a878b89879067a.
 * Add a new test mem_bind-local-2
 * Add test multi-prog-5

------------------------------------------------------------------------
6ee8a74 | Stephan Krempel | Thu, 10 Sep 2015 17:49:31 +0200

Implement missing membind types mem_map, mem_mask and rank

------------------------------------------------------------------------
15dc8ad | Michael Rauh | Fri, 28 Aug 2015 15:47:58 +0200

New psslurm prototype version 50.

------------------------------------------------------------------------
8adc19e | Michael Rauh | Fri, 28 Aug 2015 15:46:46 +0200

Bugfix: undo lightweigth SIGCHLD blocking, since it leads to hanging
    forwarders.

------------------------------------------------------------------------
f783cd2 | Michael Rauh | Thu, 27 Aug 2015 14:57:19 +0200

Bugfix: don't wait again for already dead child (pct:206).
Bugfix: fixed argv array size for multiprog parsing (pct:#15).
Removed debug print.
Enhancement: display encode/decode time of munge credential if it
    expired.

------------------------------------------------------------------------
e618061 | Michael Rauh | Thu, 27 Aug 2015 14:53:42 +0200

Merge branch 'psslurm-devel' of git.ccc:/psmgmt into psslurm-devel

------------------------------------------------------------------------
da2edb0 | Stephan Krempel | Wed, 26 Aug 2015 16:08:54 +0200

Fix memory accounting

* Closes psc#27

------------------------------------------------------------------------
9e6a978 | Michael Rauh | Mon, 24 Aug 2015 15:07:25 +0200

Bugfix: don't close stdin for sub srun calls in pty mode (pct:#165).

------------------------------------------------------------------------
49c3e1e | Michael Rauh | Fri, 21 Aug 2015 16:05:59 +0200

New psslurm prototype version 48.

------------------------------------------------------------------------
f26b7d5 | Michael Rauh | Fri, 21 Aug 2015 16:03:59 +0200

Merge branch 'psslurm-devel-work' into psslurm-devel

------------------------------------------------------------------------
18535c3 | Michael Rauh | Fri, 21 Aug 2015 12:53:03 +0200

Bugfix: prevent socket timeouts for rpc:6009 in slurmctld.

------------------------------------------------------------------------
43e483b | Michael Rauh | Fri, 21 Aug 2015 09:50:19 +0200

Merge branch 'psslurm' into psslurm-devel-work

------------------------------------------------------------------------
f0525f3 | Michael Rauh | Fri, 21 Aug 2015 09:49:43 +0200

Removed debug print.

------------------------------------------------------------------------
7614cf5 | Michael Rauh | Thu, 20 Aug 2015 12:45:31 +0200

Enhancement: set SO_REUSEADDR for listen sockets.

------------------------------------------------------------------------
888af5b | Michael Rauh | Wed, 19 Aug 2015 17:16:50 +0200

Merge branch 'psslurm-devel' of git.ccc:/psmgmt into psslurm-devel

------------------------------------------------------------------------
98afcfc | Stephan Krempel | Wed, 19 Aug 2015 17:11:09 +0200

Move task pro-/epilogue stuff to psslurmpelogue.[ch]

------------------------------------------------------------------------
38f89b3 | Michael Rauh | Wed, 19 Aug 2015 16:46:52 +0200

Merge branch 'psslurm-devel-work' into psslurm-devel

------------------------------------------------------------------------
04285d6 | Michael Rauh | Wed, 19 Aug 2015 16:24:32 +0200

Bugfix: forward srun address and port when forwarding the task launch
message.

------------------------------------------------------------------------
8e4aa33 | Michael Rauh | Wed, 19 Aug 2015 15:28:38 +0200

Enhancement: implemented REQUEST_JOB_NOTIFY to notify job steps.

------------------------------------------------------------------------
3570d90 | Michael Rauh | Wed, 19 Aug 2015 11:46:40 +0200

Merge branch 'psslurm-devel' into psslurm-devel-work

------------------------------------------------------------------------
bda34d5 | Michael Rauh | Mon, 17 Aug 2015 15:02:32 +0200

Removed debug print.

------------------------------------------------------------------------
32e3ea2 | Michael Rauh | Mon, 17 Aug 2015 12:16:12 +0200

Merge branch 'psslurm-devel' into psslurm-devel-work

------------------------------------------------------------------------
dfdb0b4 | Michael Rauh | Mon, 17 Aug 2015 12:08:21 +0200

Merge branch 'psslurm-devel' into psslurm-devel-work

------------------------------------------------------------------------
96e18df | Michael Rauh | Mon, 10 Aug 2015 14:05:11 +0200

Bugfix: fixed handling of dropped pelogue messages (Jureca:#429).

------------------------------------------------------------------------
d13ad46 | Michael Rauh | Fri, 7 Aug 2015 14:36:21 +0200

Removed debug print.

------------------------------------------------------------------------
ec6f46c | Michael Rauh | Fri, 7 Aug 2015 14:28:59 +0200

Update regression test suite.

------------------------------------------------------------------------
41a3573 | Michael Rauh | Fri, 7 Aug 2015 14:24:31 +0200

Bugfix: don't close stdin if rank input files are defined.

------------------------------------------------------------------------
2ec21dd | Michael Rauh | Fri, 7 Aug 2015 09:48:08 +0200

Bugfix: fixed floating point exception in accounting plugin
(jureca:#346).

------------------------------------------------------------------------
7069e95 | Michael Rauh | Wed, 5 Aug 2015 17:23:24 +0200

Bugfix: fixed sending task ids if spawn fails (PCT#62).

------------------------------------------------------------------------
23cab6b | Michael Rauh | Wed, 5 Aug 2015 10:08:02 +0200

Enhanced errror message.

------------------------------------------------------------------------
93fd548 | Michael Rauh | Mon, 3 Aug 2015 15:54:59 +0200

Merge branch 'psslurm-work' into psslurm-devel-work

------------------------------------------------------------------------
30ef249 | Michael Rauh | Thu, 30 Jul 2015 11:33:43 +0200

Merge branch 'psslurm-devel' into psslurm-devel-work

------------------------------------------------------------------------
2e3f180 | Michael Rauh | Thu, 30 Jul 2015 10:01:01 +0200

cleanup

------------------------------------------------------------------------
b8d0b6f | Michael Rauh | Thu, 9 Jul 2015 16:57:11 +0200

Merge branch 'psslurm' into psslurm-devel-work

------------------------------------------------------------------------
d41c9bb | Michael Rauh | Thu, 9 Jul 2015 16:54:49 +0200

Some cleanup.
Check for spawn failed messages.

TODO: use internal task structure for sendTaskPids
TODO: answer to srun SLURM_SUCCESS immediate after prologue finished
successful.
TODO: get correct error codes for RESPONSE_TASK_LAUNCH message.

------------------------------------------------------------------------
4906e82 | Michael Rauh | Fri, 3 Jul 2015 16:38:27 +0200

Enhancement: sattach support ready.

------------------------------------------------------------------------
e88bdcd | Michael Rauh | Fri, 3 Jul 2015 16:19:43 +0200

bugfix not working, just suppress the error message.

------------------------------------------------------------------------
ec44435 | Michael Rauh | Fri, 3 Jul 2015 13:26:36 +0200

Bugfix: don't let blocking srun connections block the psid.

------------------------------------------------------------------------
3eba343 | Michael Rauh | Tue, 30 Jun 2015 17:05:19 +0200

beautify

------------------------------------------------------------------------
49fef8a | Michael Rauh | Tue, 30 Jun 2015 16:12:17 +0200

First steps to support sattach command.

------------------------------------------------------------------------
96ec7ba | Michael Rauh | Mon, 29 Jun 2015 14:30:08 +0200

Merge branch 'psslurm' into psslurm-devel-work

------------------------------------------------------------------------
ca5e480 | Michael Rauh | Fri, 26 Jun 2015 13:30:22 +0200

Merge branch 'psslurm-devel' into psslurm-devel-work

------------------------------------------------------------------------
06f1705 | Michael Rauh | Mon, 22 Jun 2015 17:09:00 +0200

Merge branch 'psslurm-devel' into psslurm-devel-work

------------------------------------------------------------------------
47f4d45 | Michael Rauh | Mon, 15 Jun 2015 13:45:29 +0200

Bugfix: don't remove MALLOC_CHECK_ environment variable set by the user.

------------------------------------------------------------------------
c71a398 | Michael Rauh | Mon, 15 Jun 2015 13:18:44 +0200

Bugfix: allow ssh access to all sister nodes if batch job starts.

------------------------------------------------------------------------
044389c | Michael Rauh | Wed, 19 Aug 2015 16:29:03 +0200

Merge branch 'psslurm-devel' of git.ccc:/psmgmt into psslurm-devel

------------------------------------------------------------------------
3502311 | Stephan Krempel | Wed, 19 Aug 2015 14:40:14 +0200

Enhancement: Support for task pro-/epilogue scripts

* Closes psc#14

------------------------------------------------------------------------
08de1b2 | Stephan Krempel | Fri, 7 Aug 2015 00:34:34 +0200

Using lightweight SIGCHLD blocking where possible

------------------------------------------------------------------------
4ae8cba | Stephan Krempel | Wed, 19 Aug 2015 14:21:23 +0200

Set environment variable SLURM_TASKS_PER_NODE

* Closes psc#138

------------------------------------------------------------------------
b5667e5 | Michael Rauh | Wed, 19 Aug 2015 11:45:29 +0200

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
f17b461 | Michael Rauh | Wed, 19 Aug 2015 11:44:54 +0200

Merge branch 'psslurm-work' into psslurm-devel

------------------------------------------------------------------------
9673697 | Michael Rauh | Wed, 19 Aug 2015 11:33:39 +0200

Enhancement: improved log output for sending signals to tasks.

------------------------------------------------------------------------
ad0be8e | eicker | Tue, 18 Aug 2015 17:29:40 +0000

Bugfix: Prevent duplicating message on ENOBUFS in RDP's sendto()

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9188 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
756fc5b | eicker | Tue, 18 Aug 2015 14:46:13 +0000

Enhancement: Replace getdtablesize() by sysconf(_SC_OPEN_MAX) and call
    less frequently

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9187 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
c88b4ae | eicker | Tue, 18 Aug 2015 12:04:52 +0000

Enhancement: Ensure fd in valid range within the selector facility.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9186 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
7ddf8f2 | Michael Rauh | Wed, 19 Aug 2015 10:37:32 +0200

Merge branch 'psslurm' into psslurm-work

------------------------------------------------------------------------
a09327c | Michael Rauh | Tue, 18 Aug 2015 14:40:00 +0200

New psslurm prototype version 47.

------------------------------------------------------------------------
38386bc | Michael Rauh | Tue, 18 Aug 2015 14:27:49 +0200

Bugfix: fixed segfault in handle_PS_JobStateRes().

------------------------------------------------------------------------
b0f9e57 | Michael Rauh | Wed, 19 Aug 2015 10:35:42 +0200

Enhancement:  Replace getdtablesize() by sysconf(_SC_OPEN_MAX) and set
max value to 1024.

------------------------------------------------------------------------
a12fe49 | Michael Rauh | Mon, 17 Aug 2015 11:05:42 +0200

Merge branch 'psslurm' into psslurm-work

------------------------------------------------------------------------
366feb7 | Michael Rauh | Mon, 3 Aug 2015 16:34:32 +0200

Enhancement: send freeram info in ping and registration messages.

------------------------------------------------------------------------
d46f522 | Michael Rauh | Fri, 14 Aug 2015 13:31:00 +0200

Test: block SIGCHLD via signal mask in pssacount.

------------------------------------------------------------------------
84d6af0 | Michael Rauh | Fri, 14 Aug 2015 13:22:21 +0200

Enhancement: added addtitional debug output.
Bugfix: only react to dead node events in pelogue if a current job is
running (Jurec:#417).
Bugfix: don't start epilogue if a node dies before the user processes
are gone (Jureca:#417).

------------------------------------------------------------------------
f6188f8 | Michael Rauh | Mon, 10 Aug 2015 14:05:11 +0200

Bugfix: fixed handling of dropped pelogue messages (Jureca:#429).

------------------------------------------------------------------------
55d90e1 | Michael Rauh | Fri, 14 Aug 2015 10:53:24 +0200

Bugfix: don't remove signalfd() socket in sighandler.

------------------------------------------------------------------------
4191205 | Michael Rauh | Fri, 7 Aug 2015 09:48:08 +0200

Bugfix: fixed floating point exception in accounting plugin
(jureca:#346).

------------------------------------------------------------------------
091a987 | Michael Rauh | Fri, 7 Aug 2015 14:24:31 +0200

Bugfix: don't close stdin if rank input files are defined.

------------------------------------------------------------------------
8dc0d69 | Michael Rauh | Mon, 3 Aug 2015 17:23:17 +0200

Update regression test suite.

------------------------------------------------------------------------
906032a | Michael Rauh | Mon, 3 Aug 2015 17:22:22 +0200

Merge remote-tracking branch 'dorian/pstest' into psslurm-work

------------------------------------------------------------------------
93dff5c | Dorian Krause | Fri, 31 Jul 2015 16:53:21 +0200

Followup to 646e28da

------------------------------------------------------------------------
2300d8a | Dorian Krause | Fri, 31 Jul 2015 16:47:40 +0200

Update line-count-4 test

------------------------------------------------------------------------
a20905d | Dorian Krause | Fri, 31 Jul 2015 16:04:00 +0200

Add tests for ticket 203

------------------------------------------------------------------------
c907285 | Dorian Krause | Fri, 31 Jul 2015 16:03:43 +0200

Fix a bug in test ticket-165-2

------------------------------------------------------------------------
e38d5c4 | Dorian Krause | Fri, 31 Jul 2015 16:03:30 +0200

Fix bugs in gen-* scripts

------------------------------------------------------------------------
77df44a | Dorian Krause | Fri, 31 Jul 2015 13:08:26 +0200

Add new ticket-165-2 test

------------------------------------------------------------------------
7705fec | Dorian Krause | Thu, 16 Jul 2015 10:28:42 +0200

Use re.DOTALL in combination with re.MULTILINE

------------------------------------------------------------------------
f13e90f | Dorian Krause | Sat, 4 Jul 2015 11:50:59 +0200

Add new faulty-srun test that check for error messages

------------------------------------------------------------------------
f9787aa | Dorian Krause | Sat, 4 Jul 2015 11:50:42 +0200

Delete old env-MALLOC_CHECK_ test

------------------------------------------------------------------------
1f2928e | Dorian Krause | Fri, 12 Jun 2015 14:40:56 +0200

Replace env-MALLOC_CHECK_ by two new tests

------------------------------------------------------------------------
af00b15 | Dorian Krause | Tue, 9 Jun 2015 17:56:01 +0200

Add test env-MALLOC_CHECK_

------------------------------------------------------------------------
403b342 | Dorian Krause | Thu, 7 May 2015 15:14:41 +0200

Add a test for ticket #189

------------------------------------------------------------------------
d5e578e | Dorian Krause | Mon, 20 Apr 2015 15:12:50 +0200

Bug fix for test ticket-165

------------------------------------------------------------------------
c83ab6e | Dorian Krause | Mon, 20 Apr 2015 15:11:25 +0200

regetest.py: Warn if expect folder is not present

Some tests reuse the Slurm testsuite. These tests report a
failure if the "expect" folder is not present in the top of
the testsuite directory structure. To avoid misinterpretation
of these test failures we warn about the missing folder.

------------------------------------------------------------------------
81b5359 | Dorian Krause | Mon, 20 Apr 2015 14:43:21 +0200

regtest.py: Set LANG=C in process environment

This commit changes the environment for executed processes
such that LANG is always set to C, irrespectively of the
environment of the regtest.py process.

------------------------------------------------------------------------
5be4622 | Dorian Krause | Wed, 25 Mar 2015 12:59:39 +0100

Merge branch 'master' of zam2136:/srv/repos/kraused/psmgmt into pstest

------------------------------------------------------------------------
6ae7dd3 | Dorian Krause | Wed, 1 Oct 2014 13:28:37 +0200

Merge branch 'pstest'

------------------------------------------------------------------------
35e68e5 | Dorian Krause | Wed, 1 Oct 2014 13:28:24 +0200

Merge branch 'master' of ssh://zam2136.zam.kfa-juelich.de:/srv/repos/psmgmt

------------------------------------------------------------------------
ef71646 | Dorian Krause | Tue, 24 Mar 2015 11:17:35 +0100

Add test ticket-183

------------------------------------------------------------------------
78df8e6 | Dorian Krause | Fri, 20 Mar 2015 15:38:48 +0100

Add a test for #165

------------------------------------------------------------------------
670e4fd | Dorian Krause | Fri, 20 Mar 2015 15:38:29 +0100

Delete old test ticket-181

------------------------------------------------------------------------
12cdd58 | Dorian Krause | Fri, 20 Mar 2015 14:05:51 +0100

Add more tests for ticket #181

------------------------------------------------------------------------
08c8c8f | Dorian Krause | Fri, 20 Mar 2015 13:44:28 +0100

Add test for #181

------------------------------------------------------------------------
68c584a | Dorian Krause | Fri, 20 Mar 2015 13:44:16 +0100

Update the hint-* tests

------------------------------------------------------------------------
f16b018 | Dorian Krause | Fri, 20 Mar 2015 11:56:28 +0100

srun-B-* tests: Do not check the pinning

We decided that -B should not influence the pinning. This
commit removes the affinity checks from the tests.

------------------------------------------------------------------------
3e96144 | Dorian Krause | Fri, 20 Mar 2015 11:40:29 +0100

Update the --cpu_bind=cores test

We decided to disallow --cpu_bind=cores and give a "not suppored"
message to the user.

------------------------------------------------------------------------
c5661c2 | Dorian Krause | Wed, 18 Mar 2015 16:41:22 +0100

Fix cpu_bind-boards test

------------------------------------------------------------------------
bbd5003 | Dorian Krause | Fri, 20 Feb 2015 11:07:12 +0100

Add faulty-srun-2 command

------------------------------------------------------------------------
5ce58ba | Dorian Krause | Fri, 20 Feb 2015 11:04:02 +0100

Update gen-affinity-tests.py script

We decided to change the affinity masks generated by psslurm
compared to the ones generated by the task/affinity plugin.

------------------------------------------------------------------------
6697614 | Dorian Krause | Fri, 30 Jan 2015 09:44:26 +0100

Bug fix for test ticket-42

------------------------------------------------------------------------
c215209 | Dorian Krause | Thu, 22 Jan 2015 11:08:54 +0100

Make ticket-63/submit.sh executable

------------------------------------------------------------------------
ec47dcc | Dorian Krause | Mon, 23 Feb 2015 15:17:54 +0100

Bug fix for test ticket-42

------------------------------------------------------------------------
fc840e0 | Dorian Krause | Wed, 4 Mar 2015 08:22:05 +0100

Update distribution-* tests

------------------------------------------------------------------------
853cb61 | Dorian Krause | Fri, 20 Feb 2015 10:56:27 +0100

Add cpu_bind-default test and fix cpu_bind-{cores,threads}

------------------------------------------------------------------------
135044a | Dorian Krause | Thu, 22 Jan 2015 11:08:54 +0100

Make ticket-63/submit.sh executable

------------------------------------------------------------------------
d04ac58 | Dorian Krause | Wed, 21 Jan 2015 17:23:13 +0100

Remove faulty tests

------------------------------------------------------------------------
ee6cd5a | Dorian Krause | Wed, 21 Jan 2015 11:08:21 +0100

Bug fix

------------------------------------------------------------------------
e77834c | Dorian Krause | Wed, 21 Jan 2015 11:05:34 +0100

Handle exceptions during test execution

------------------------------------------------------------------------
8245d02 | Dorian Krause | Wed, 21 Jan 2015 10:57:32 +0100

Replace subprocess.Popen() calls by popen()

------------------------------------------------------------------------
2d9c942 | Dorian Krause | Tue, 25 Nov 2014 16:09:00 +0100

regtest.py: Add --account option

------------------------------------------------------------------------
08caf64 | Dorian Krause | Fri, 5 Dec 2014 14:00:29 +0100

regtest.py: Export PSTEST_ACCOUNT to frontend process

------------------------------------------------------------------------
a94e98e | Dorian Krause | Mon, 8 Dec 2014 15:32:00 +0100

Update tests to work with non-standard QoS/account

------------------------------------------------------------------------
7b98d17 | Dorian Krause | Mon, 8 Dec 2014 14:24:48 +0100

Add new test for ticket #159

------------------------------------------------------------------------
207f9b1 | Dorian Krause | Tue, 2 Dec 2014 15:45:50 +0100

Fix commit 7eeb0e6db

------------------------------------------------------------------------
a0d214d | Dorian Krause | Tue, 2 Dec 2014 15:41:44 +0100

Rewrite of ticket-105

------------------------------------------------------------------------
08e8b71 | Dorian Krause | Tue, 2 Dec 2014 15:00:22 +0100

Add new test mpi-comm-spawn

------------------------------------------------------------------------
3329776 | Dorian Krause | Fri, 21 Nov 2014 13:18:43 +0100

regtest.py: Add option for randomizing the test list

------------------------------------------------------------------------
a5eee3a | Dorian Krause | Fri, 21 Nov 2014 10:41:58 +0100

Remove partitions/reservations from tests

Due to the changes introduce in commit 05c71380 it is
not necessary anymore to specify "partitions" and
"reservations" in the test descr.json file.

------------------------------------------------------------------------
e65c96b | Dorian Krause | Fri, 21 Nov 2014 10:30:44 +0100

regtest.py: Change reservation/partition/qos handling

The testsuite was designed with the ability to be able to run tests
on different partitions at the same time and then compare results
in the evaluation procedure. This feature however was not very useful
in practice and had the downside that the partitions and reservations
had to be specified in the testfile. The -i/--ignorep option was
added as a workaround to allow for excluding selected partitions.

This commit introduces a backwards-incompatible change to the way
partitions and reservations are handled. At the same time support
for a qos specification is added. Instead of using the "partition"
and "reservation" specification from the test the partition, reservation
and qos can be specified on the command line using --reservation,
--partition and --qos. If --partition is not specified the default
partition is used.

------------------------------------------------------------------------
eaf43cc | Dorian Krause | Fri, 21 Nov 2014 10:29:49 +0100

regtest.py: Add submission host to key

Include the submission host to the test key so that it is safe(r)
to submit from different hosts at the same time on a shared file
system.

------------------------------------------------------------------------
c2a48ef | Dorian Krause | Fri, 21 Nov 2014 10:13:51 +0100

gen-srun-B-tests.py: Use x instead of * for test names

------------------------------------------------------------------------
93edfea | Dorian Krause | Fri, 21 Nov 2014 10:13:00 +0100

Replace * in folder names by x

This commit changes the * in the name of the srun-B tests
by an x to avoid problems with bash expansion.

------------------------------------------------------------------------
adf4e7c | Dorian Krause | Mon, 17 Nov 2014 13:57:33 +0100

Add new test sgather-2

This commit renames sgather -> sgather-1

------------------------------------------------------------------------
665a662 | Dorian Krause | Mon, 17 Nov 2014 13:48:59 +0100

Add tests for ticket 154

------------------------------------------------------------------------
562c51b | Dorian Krause | Fri, 14 Nov 2014 15:56:11 +0100

Add new test umask

------------------------------------------------------------------------
0de8441 | Michael Rauh | Fri, 31 Jul 2015 16:34:48 +0200

Enhancement: forward task launch request to all sister nodes.

------------------------------------------------------------------------
6716c7b | Michael Rauh | Fri, 31 Jul 2015 11:28:11 +0200

Merge branch 'psslurm' into psslurm-work

------------------------------------------------------------------------
9c49307 | Michael Rauh | Thu, 30 Jul 2015 17:00:42 +0200

Enhancement: added additional debug output for decoding a job
credential.

------------------------------------------------------------------------
1fd17b2 | Michael Rauh | Thu, 30 Jul 2015 11:34:28 +0200

Merge branch 'psslurm' into psslurm-work

------------------------------------------------------------------------
c93900e | Michael Rauh | Wed, 1 Jul 2015 10:29:46 +0200

Merge branch 'psslurm' into psslurm-work

------------------------------------------------------------------------
be3820f | Michael Rauh | Fri, 26 Jun 2015 11:34:23 +0200

Bugfix: fixed possible race condition in SIGCHLD blocking.

------------------------------------------------------------------------
64d641a | Michael Rauh | Mon, 22 Jun 2015 15:50:05 +0200

Bugfix: set nodelist from slurm if admin users starting jobs via srun.

------------------------------------------------------------------------
bf8fdd0 | Michael Rauh | Mon, 15 Jun 2015 13:45:29 +0200

Bugfix: don't remove MALLOC_CHECK_ environment variable set by the user.

------------------------------------------------------------------------
ff1b219 | Michael Rauh | Mon, 15 Jun 2015 13:18:44 +0200

Bugfix: allow ssh access to all sister nodes if batch job starts.

------------------------------------------------------------------------
c3a8a51 | Michael Rauh | Mon, 17 Aug 2015 12:14:46 +0200

Merge branch 'psslurm' into psslurm-devel

------------------------------------------------------------------------
c18e96a | Michael Rauh | Fri, 14 Aug 2015 16:56:21 +0200

New psslurm prototype version 45.

------------------------------------------------------------------------
f9cb2c5 | Michael Rauh | Fri, 14 Aug 2015 16:52:18 +0200

Enhancement: send freeram info in ping and registration messages.
Test: block SIGCHLD via signal mask in pssacount.
Enhancement: added addtitional debug output.
Bugfix: only react to dead node events in pelogue if a current job is
running (Jurec:#417).
Bugfix: don't start epilogue if a node dies before the user processes
are gone (Jureca:#417).
Bugfix: fixed handling of dropped pelogue messages (Jureca:#429).
Bugfix: don't remove signalfd() socket in sighandler.
Bugfix: fixed floating point exception in accounting plugin
(jureca:#346).
Bugfix: don't close stdin if rank input files are defined.
Enhancement: forward task launch request to all sister nodes.

------------------------------------------------------------------------
27393c0 | eicker | Mon, 10 Aug 2015 17:15:34 +0000

Bugfix: Suppress the disfigurement discussed in jrt:#394

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9181 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
bd46a3e | eicker | Mon, 10 Aug 2015 17:09:28 +0000

Enhancement: Introduce PSP_tryPutTypedMsgBuf() and make the PSP_*put*MsgBuf()
    family of calls more modular.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9180 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
8951484 | eicker | Mon, 10 Aug 2015 08:51:23 +0000

Bugfix: According to signal(2) catching SIGFPE (and SIGILL) in order to
    perform a normal shutdown of psid is a bad idea (jrt:#424)

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9179 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
400f0a0 | krempel | Mon, 13 Jul 2015 10:11:41 +0000

Bugfix: Handling of AdminUsers configuration

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9175 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
51e4e09 | Michael Rauh | Fri, 31 Jul 2015 09:59:39 +0200

New psslurm prototype version 43.

------------------------------------------------------------------------
f56aaa3 | Michael Rauh | Fri, 31 Jul 2015 09:55:47 +0200

Enhancement: added additional debug output for decoding a job credential.

------------------------------------------------------------------------
2804d2b | Stephan Krempel | Mon, 10 Aug 2015 17:22:35 +0200

Remove debugging output

------------------------------------------------------------------------
b1aa991 | Michael Rauh | Mon, 3 Aug 2015 16:35:59 +0200

New psslurm prototype version 44.

------------------------------------------------------------------------
71efbc2 | Michael Rauh | Mon, 3 Aug 2015 16:34:32 +0200

Enhancement: send freeram info in ping and registration messages.

------------------------------------------------------------------------
1318682 | Michael Rauh | Mon, 3 Aug 2015 16:00:07 +0200

Enhancement: added additional debug output for decoding a job
credential.
Enhancement: forward task launch request to all sister nodes.

------------------------------------------------------------------------
ebacf44 | Michael Rauh | Thu, 30 Jul 2015 11:31:08 +0200

New psslurm prototype version 42.

------------------------------------------------------------------------
455e247 | Michael Rauh | Thu, 30 Jul 2015 10:31:00 +0200

Enhancement: process spawn failed messages from psid.

------------------------------------------------------------------------
ecc98ce | Michael Rauh | Wed, 29 Jul 2015 14:44:01 +0200

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
9491a1a | Michael Rauh | Wed, 29 Jul 2015 12:05:36 +0200

Merge branch 'psslurm' into psslurm-devel

------------------------------------------------------------------------
77007fd | Michael Rauh | Wed, 29 Jul 2015 12:03:12 +0200

Enhancement: let PMI clients try different protocol versions.

------------------------------------------------------------------------
c5784a6 | eicker | Wed, 1 Jul 2015 09:39:36 +0000

Bugfix: Guard psaccount's periodicMain (j3t:#679)

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9170 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
28da3df | Michael Rauh | Mon, 27 Jul 2015 14:41:26 +0200

Bugfix: fix segfault in pelogue plugin if sister node disappears.

------------------------------------------------------------------------
32d70ab | Stephan Krempel | Wed, 15 Jul 2015 13:27:20 +0200

New psslurm prototype version 41.

------------------------------------------------------------------------
9e37e2c | eicker | Fri, 10 Jul 2015 15:34:15 +0000

Bugfix: Ensure myUse is big enough for huge partThrds (JURECA #273)

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9172 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
11b76c7 | Michael Rauh | Thu, 9 Jul 2015 16:38:24 +0200

New psslurm prototype version 39.

------------------------------------------------------------------------
67021c6 | Michael Rauh | Thu, 9 Jul 2015 16:34:38 +0200

Bugfix: map I/O messages from service tasks to rank 0.

------------------------------------------------------------------------
0bebeb9 | Michael Rauh | Mon, 29 Jun 2015 14:28:33 +0200

New psslurm prototype version 37.

------------------------------------------------------------------------
065a2a9 | krempel | Mon, 29 Jun 2015 11:41:29 +0000

Fix reading of resource limits with psconfig

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9167 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
6b911f2 | Michael Rauh | Mon, 27 Jul 2015 14:44:45 +0200

Merge branch 'psslurm-devel' of git.ccc:/psmgmt into psslurm-devel

------------------------------------------------------------------------
1ea4495 | Stephan Krempel | Thu, 2 Jul 2015 19:53:01 +0200

Merge branch 'psslurm-cpubind' into psslurm-devel

------------------------------------------------------------------------
8c3a7b0 | Stephan Krempel | Thu, 2 Jul 2015 16:12:36 +0200

Set SLURM_CPU_BIND_LIST to empty sting if unused

------------------------------------------------------------------------
7e81284 | Stephan Krempel | Fri, 26 Jun 2015 16:02:53 +0200

Merge branch 'psslurm-cpubind' into psslurm-devel

------------------------------------------------------------------------
059d2f3 | Stephan Krempel | Fri, 26 Jun 2015 14:33:32 +0200

Merge branch 'psslurm-devel' into psslurm-cpubind

------------------------------------------------------------------------
9bbf8c9 | Stephan Krempel | Fri, 26 Jun 2015 14:15:42 +0200

Enhancement: Support for cpu_bind=verbose

------------------------------------------------------------------------
d52ebed | Stephan Krempel | Tue, 23 Jun 2015 12:15:54 +0200

Fix indentation in psslurmpin.c

------------------------------------------------------------------------
6c66a8b | Stephan Krempel | Tue, 23 Jun 2015 12:00:48 +0200

Fix vim modeline in psslurmpscomm.c

------------------------------------------------------------------------
16b108e | Michael Rauh | Mon, 6 Jul 2015 14:30:25 +0200

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
66e3572 | Michael Rauh | Mon, 6 Jul 2015 14:27:11 +0200

Enhancement: added support for sattach.

------------------------------------------------------------------------
8be192c | Michael Rauh | Fri, 26 Jun 2015 11:52:37 +0200

Merge branch 'psslurm' into psslurm-devel

------------------------------------------------------------------------
6eb2921 | Michael Rauh | Fri, 26 Jun 2015 11:47:41 +0200

New psslurm prototype version 35.

------------------------------------------------------------------------
a097cf3 | Michael Rauh | Fri, 26 Jun 2015 11:46:29 +0200

Bugfix: fixed possible race condition in SIGCHLD blocking.

------------------------------------------------------------------------
4ac4de1 | Michael Rauh | Mon, 22 Jun 2015 17:07:15 +0200

Merge branch 'psslurm' into psslurm-devel

------------------------------------------------------------------------
3be1246 | Michael Rauh | Mon, 22 Jun 2015 16:26:52 +0200

New psslurm prototype version 33.

------------------------------------------------------------------------
3071e36 | Michael Rauh | Mon, 22 Jun 2015 16:23:18 +0200

Merge branch 'psslurm' of git.ccc:/psmgmt into psslurm

------------------------------------------------------------------------
6edb88e | Stephan Krempel | Mon, 22 Jun 2015 16:18:40 +0200

Revert "Implement verbose cpu_bind output"

This reverts commit 4ced69fde8983ae31425631c2fe0b2719c0a6b29.

------------------------------------------------------------------------
c186c8e | Michael Rauh | Mon, 22 Jun 2015 16:19:17 +0200

Merge branch 'psslurm' of git.ccc:/psmgmt into psslurm

------------------------------------------------------------------------
4ced69f | Stephan Krempel | Mon, 15 Jun 2015 15:12:37 +0200

Implement verbose cpu_bind output

------------------------------------------------------------------------
b84d6e1 | Michael Rauh | Mon, 22 Jun 2015 15:52:40 +0200

Bugfix: set nodelist from slurm if admin users starting jobs via srun.
Bugfix: don't remove MALLOC_CHECK_ environment variable set by the user.
Bugfix: allow ssh access to all sister nodes if batch job starts.

------------------------------------------------------------------------
d2fbd7f | Dorian Krause | Fri, 12 Jun 2015 14:40:56 +0200

Replace env-MALLOC_CHECK_ by two new tests

------------------------------------------------------------------------
da5f27f | Michael Rauh | Thu, 11 Jun 2015 16:14:33 +0200

Merge branch 'master' into psslurm-devel

------------------------------------------------------------------------
dcfafc9 | Michael Rauh | Thu, 11 Jun 2015 15:27:06 +0200

New psslurm prototype version 31.

------------------------------------------------------------------------
05d4849 | eicker | Mon, 1 Jun 2015 17:47:38 +0000

Bugfix: Prevent segfault if libedit (not updating rl_line_buffer) is used.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9147 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
0e1eab5 | moschny | Tue, 9 Jun 2015 20:04:45 +0000

For older git versions, the -z option to check-attr works only on the input, not the output, so don't use it.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9161 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
a1bafde | moschny | Tue, 9 Jun 2015 17:42:35 +0000

Make script executable.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9160 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
d1c9845 | moschny | Tue, 9 Jun 2015 15:53:25 +0000

Script for expanding RCS-style keywords.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9158 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
e17cddf | moschny | Tue, 9 Jun 2015 15:52:21 +0000

When NODIRTY is non-empty, pass --no-dirty to vcversion.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9157 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
187efb6 | moschny | Tue, 9 Jun 2015 09:59:37 +0000

Merge changes from psbuild.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9156 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
d00bed3 | Michael Rauh | Thu, 11 Jun 2015 12:47:22 +0200

Bugfix: make sure fowarders connect timeout is always removed.
Bugfix: fixed possible segfault in srun message handling.
Bugfix: only start I/O forwader on prologue exit.

commit 35fc3bf02c52543786c700ae7ef417a2a28ec278
Author: eicker <eicker@21b3a009-d9f9-44df-8eaf-6b729cfaa075>
Date:   Wed Jun 10 16:25:14 2015 +0000

    Bugfix: Yet another fix for psc:#192 now in the selector context.

    git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9162 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
19ea26c | Dorian Krause | Tue, 9 Jun 2015 17:56:01 +0200

Add test env-MALLOC_CHECK_

------------------------------------------------------------------------
db809c9 | eicker | Mon, 1 Jun 2015 18:04:57 +0000

Bugfix: Yet another fix for psc:#192.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9148 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
5ec4981 | Michael Rauh | Wed, 10 Jun 2015 09:57:50 +0200

Bugfix: unset "MALLOC_CHECK_" in environment of psidforwarder children.
Enhancement: return ESCRIPT_CHDIR_FAILED to srun when changing to
    working directory failed (#159).
Bugfix: don't send RESPONSE_SLURM_RC multiple times when a batch job
    time limit is reached (#194).
Bugfix: handle dropped PSP_FORWARD_SMSG correct (#194).

------------------------------------------------------------------------
a2a3207 | eicker | Tue, 9 Jun 2015 16:59:27 +0000

Bugfix: prevent getPSIEnv() from wrongly matching longer names (psc:#183)

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9159 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
33be457 | Michael Rauh | Wed, 3 Jun 2015 16:56:59 +0200

New psslurm prototype version 29.

------------------------------------------------------------------------
026c743 | Michael Rauh | Wed, 3 Jun 2015 16:54:46 +0200

Enhancement: workaround for two more malloc deadlocks in psid SIGCHLD
sighandler.
Bugfix: let I/O forwarder start after prologue is finished (PCT:#190).

------------------------------------------------------------------------
7b636dd | Michael Rauh | Tue, 26 May 2015 17:12:05 +0200

New psslurm prototype version 28.

------------------------------------------------------------------------
8776b5d | Michael Rauh | Tue, 26 May 2015 17:09:57 +0200

Merge with psmgmt master:

    Bugfix: Block SIGCHLD during dynamic memory operations in RDP (psc:#192)
    Add missing parentheses.

------------------------------------------------------------------------
7507d98 | Michael Rauh | Tue, 26 May 2015 17:05:02 +0200

Enhancement: allow ParaStation admin users to call mpiexec directly.
Bugfix: fix blocking stdin in batch scripts (#189).

Update regression test suite:

commit 403b34288baf64677b9a015b2623668907bf11fe
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Thu May 7 15:14:41 2015 +0200

    Add a test for ticket #189

------------------------------------------------------------------------
06081f7 | Michael Rauh | Fri, 22 May 2015 13:30:30 +0200

New psslurm prototype version 27.

------------------------------------------------------------------------
a9a2ae0 | Michael Rauh | Fri, 22 May 2015 11:38:43 +0200

Merge branch 'master' into psslurm

------------------------------------------------------------------------
074484b | Michael Rauh | Fri, 22 May 2015 11:37:18 +0200

Enhancement: merge with psmgmt-5.0.47-3.
Enhancement: disable build of broken psmom.

------------------------------------------------------------------------
b28bde5 | Michael Rauh | Fri, 22 May 2015 11:05:47 +0200

Merge tag '5.0.47-0' into psslurm

------------------------------------------------------------------------
3021417 | Michael Rauh | Fri, 22 May 2015 11:04:11 +0200

Enhancement: merge with psmgmt-5.0.47-0

------------------------------------------------------------------------
4f7dc65 | Michael Rauh | Tue, 19 May 2015 13:42:20 +0200

Enhancement: replace dangerous mktemp() function with mkdtemp().

------------------------------------------------------------------------
94cfec2 | Michael Rauh | Fri, 15 May 2015 17:14:05 +0200

New psslurm prototype version 26.

------------------------------------------------------------------------
ed178e5 | Michael Rauh | Fri, 15 May 2015 17:13:15 +0200

Bugfix: fix broken cleanup of service processes.

------------------------------------------------------------------------
b097641 | Michael Rauh | Tue, 5 May 2015 13:32:43 +0200

New psslurm prototype version 25.

------------------------------------------------------------------------
cdc7537 | Michael Rauh | Tue, 5 May 2015 13:28:49 +0200

Bugfix: fixed forwarder taskID collection.

------------------------------------------------------------------------
07c104f | Michael Rauh | Thu, 30 Apr 2015 14:11:45 +0200

New psslurm prototype version 24.

------------------------------------------------------------------------
5cb8219 | Michael Rauh | Thu, 30 Apr 2015 12:19:17 +0200

Enhancement: workaround for another malloc deadlock in psid SIGCHLD sighandler.

------------------------------------------------------------------------
6e92b1a | Michael Rauh | Thu, 30 Apr 2015 12:06:34 +0200

Enhancement: implemented new I/O architecture.
Bugfix: fixed invalid triggering of FD callback.

------------------------------------------------------------------------
bc51ccf | Michael Rauh | Wed, 22 Apr 2015 00:59:50 +0200

Update regression test suite:

commit d5e578e5c09c5eb43db9f7db56ebcb2d77ece163
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Mon Apr 20 15:12:50 2015 +0200

    Bug fix for test ticket-165

commit c83ab6ea40919cd1500c9d03922b32173adee3f0
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Mon Apr 20 15:11:25 2015 +0200

    regetest.py: Warn if expect folder is not present

    Some tests reuse the Slurm testsuite. These tests report a
    failure if the "expect" folder is not present in the top of
    the testsuite directory structure. To avoid misinterpretation
    of these test failures we warn about the missing folder.

commit 81b53594ebbe36664983797aaa06047872a4c540
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Mon Apr 20 14:43:21 2015 +0200

    regtest.py: Set LANG=C in process environment

    This commit changes the environment for executed processes
    such that LANG is always set to C, irrespectively of the
    environment of the regtest.py process.

------------------------------------------------------------------------
dc1d6a5 | eicker | Fri, 17 Apr 2015 17:14:59 +0000

Enhancement: Close unneded file-descriptor before exec()ing the actual
    client process.

git-svn-id: http://svn.ipd.uka.de/repos/ParaStation/trunk/psmgmt@9141 21b3a009-d9f9-44df-8eaf-6b729cfaa075

------------------------------------------------------------------------
a462d25 | Michael Rauh | Thu, 16 Apr 2015 09:39:19 +0200

Enhancement: workaround for malloc deadlock in psid SIGCHLD sighandler.

------------------------------------------------------------------------
6d9484f | Michael Rauh | Wed, 15 Apr 2015 11:10:45 +0200

Update regression test suite:

commit ef71646adc72925bdbc3c0c57ac25c35550ab882
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Tue Mar 24 11:17:35 2015 +0100

    Add test ticket-183

commit 78df8e628132ea8abb3a955e921729e16645f203
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Fri Mar 20 15:38:48 2015 +0100

    Add a test for #165

commit 670e4fdeb8ccb227252e2bf4c3a98f70725e0416
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Fri Mar 20 15:38:29 2015 +0100

    Delete old test ticket-181

commit 12cdd58c1f99d6316c9dbef034c423941cb2775a
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Fri Mar 20 14:05:51 2015 +0100

    Add more tests for ticket #181

commit 08c8c8fcab3db2f1429dd097cf444eb82cc9f00a
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Fri Mar 20 13:44:28 2015 +0100

    Add test for #181

commit 68c584a7a833e6271881fc0ee810e2dd32946baf
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Fri Mar 20 13:44:16 2015 +0100

    Update the hint-* tests

commit f16b018992d622761a725edbc4aef3ca4feaf05f
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Fri Mar 20 11:56:28 2015 +0100

    srun-B-* tests: Do not check the pinning

    We decided that -B should not influence the pinning. This
    commit removes the affinity checks from the tests.

commit 3e961443a5eabbdc16858a7530f8d2c2d155cd19
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Fri Mar 20 11:40:29 2015 +0100

    Update the --cpu_bind=cores test

    We decided to disallow --cpu_bind=cores and give a "not suppored"
    message to the user.

commit c5661c2cb64e5609ca1a81832e5cc75e886b1fc6
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Wed Mar 18 16:41:22 2015 +0100

    Fix cpu_bind-boards test

commit bbd5003e405a23906e846194d26161ed1c496ebf
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Fri Feb 20 11:07:12 2015 +0100

    Add faulty-srun-2 command

commit 5ce58ba051819bd4350416db0a0d97151e6e17bf
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Fri Feb 20 11:04:02 2015 +0100

    Update gen-affinity-tests.py script

    We decided to change the affinity masks generated by psslurm
    compared to the ones generated by the task/affinity plugin.

commit 66976142fda0b481ff4426c7df4fd7774fc612af
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Fri Jan 30 09:44:26 2015 +0100

    Bug fix for test ticket-42

commit c2152094c5b0fa215d1260a99e22afd222a0fea4
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Thu Jan 22 11:08:54 2015 +0100

    Make ticket-63/submit.sh executable

commit ec47dcc3bbf5f9a29d004bf09f3c6ade15653440
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Mon Feb 23 15:17:54 2015 +0100

    Bug fix for test ticket-42

commit fc840e0472479256e148359aab5f063b3ca9a37e
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Wed Mar 4 08:22:05 2015 +0100

    Update distribution-* tests

commit 853cb61567e6d33f3d859229dd8f9d42cbbf1f7d
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Fri Feb 20 10:56:27 2015 +0100

    Add cpu_bind-default test and fix cpu_bind-{cores,threads}

commit 135044a25cd01dd265029a6d297dccc97f3c8458
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Thu Jan 22 11:08:54 2015 +0100

    Make ticket-63/submit.sh executable

------------------------------------------------------------------------
09a551c | Michael Rauh | Mon, 30 Mar 2015 15:06:57 +0200

New psslurm prototype version 23.

------------------------------------------------------------------------
b96214f | Michael Rauh | Fri, 27 Mar 2015 13:12:54 +0100

Bugfix: always return '0' in callback of selector facility.

------------------------------------------------------------------------
887a886 | Michael Rauh | Tue, 24 Mar 2015 15:57:09 +0100

Bugfix: allow empty gres.conf.

------------------------------------------------------------------------
a791734 | Michael Rauh | Tue, 24 Mar 2015 15:47:34 +0100

Enhancement: answer reboot request as "not supported".

------------------------------------------------------------------------
917e6ed | Michael Rauh | Tue, 24 Mar 2015 15:29:13 +0100

Enhancement: don't use /tmp as fallback when changing to working dir
fails.

------------------------------------------------------------------------
e4c103d | Michael Rauh | Mon, 23 Mar 2015 16:46:14 +0100

Bugfix: set correct gid for step output/error files.

------------------------------------------------------------------------
292815e | Stephan Krempel | Tue, 24 Mar 2015 11:27:34 +0100

Pinning: Set SBATCH_CPU_BIND and SBATCH_MEM_BIND

------------------------------------------------------------------------
6e3e776 | Stephan Krempel | Mon, 23 Mar 2015 19:18:19 +0100

Pinning: Set SLURM_MEM_BIND entironment variable

------------------------------------------------------------------------
74e2184 | Stephan Krempel | Mon, 23 Mar 2015 19:05:03 +0100

Pinning: Set SLURM_CPU_BIND entironment variable

------------------------------------------------------------------------
84d0325 | Stephan Krempel | Thu, 19 Mar 2015 17:08:37 +0100

Pinning: Implement --cpu_bind=[map|mask]_ldom

------------------------------------------------------------------------
1471b6c | Stephan Krempel | Thu, 19 Mar 2015 11:55:25 +0100

Pinning: Implement --cpu_bind=rank_ldom

------------------------------------------------------------------------
bbebd60 | Michael Rauh | Tue, 17 Mar 2015 15:01:02 +0100

New psslurm prototype version 22.

------------------------------------------------------------------------
a51ba8e | Stephan Krempel | Tue, 17 Mar 2015 13:58:44 +0100

Pinning: Better implementation of --hint=nomultithread

------------------------------------------------------------------------
a9524c8 | Stephan Krempel | Mon, 16 Mar 2015 22:29:27 +0100

Pinning: Round robin with --hint=nomultithread

------------------------------------------------------------------------
e611d23 | Stephan Krempel | Mon, 16 Mar 2015 20:45:46 +0100

Pinning: Set undocumented SBATCH_* environment variables

------------------------------------------------------------------------
1d4fc3d | Stephan Krempel | Mon, 16 Mar 2015 20:37:40 +0100

Pinning: Fake implementation of --cpu-bind=boards

------------------------------------------------------------------------
5377fa9 | Michael Rauh | Tue, 17 Mar 2015 11:19:05 +0100

Enhancement: added support for Slurm message forwarding.
Enhancement: handle obsolete REQUEST_SUSPEND protocol message.
Enhancement: set correct slurm protocol version shown via scontrol.
Enhancement: use /tmp as fallback when changing to working dir fails.
Bugfix: let psslurm free all accounting data.

------------------------------------------------------------------------
7c25d4d | Michael Rauh | Fri, 20 Feb 2015 11:27:37 +0100

New psslurm prototype version 21.

------------------------------------------------------------------------
bfbde3a | Michael Rauh | Fri, 20 Feb 2015 10:16:14 +0100

Updated header comments.

------------------------------------------------------------------------
4efb07b | Michael Rauh | Wed, 18 Feb 2015 13:12:31 +0100

Enhancement: use all srun control and I/O ports.

------------------------------------------------------------------------
9acdb75 | Stephan Krempel | Fri, 20 Feb 2015 08:15:53 +0100

Pinning: Implement cyclic distribution over sockets

------------------------------------------------------------------------
c52720d | Stephan Krempel | Thu, 19 Feb 2015 18:52:57 +0100

New process binding concept

* Support pinning to ranks/threads and make it the default
* Support pinning to sockets (ldoms)
* Support cpu_bind types mask_cpu and map_cpu
* Support for SLURM_CPU_BIND_* and SLURM_MEM_BIND_* variables
* Support disabling process binding with --mem_bind=no
* Support --hint=nomultithread
* Additional debugging output for cpubind and membind

------------------------------------------------------------------------
7fabf93 | Michael Rauh | Mon, 16 Feb 2015 11:25:46 +0100

Enhancement: added support for basic slurm accounting data.
Enhancement: cleanup psaccount plugin.
Enhancement: workaround for malloc deadlock in psid SIGCHLD sighandler.
Enhancement: retry writing messages in pedantic mode.
Enhancement: log rc code of protocol requests.
Enhancement: cleanup account plugin.
Bugfix: suppress wrong error messages when using label I/O option.
Bugfix: the init script should be able to restart the psid after a
    package update.
Bugfix: don't remove accounting information before psslurm can read it.

------------------------------------------------------------------------
f93b441 | Michael Rauh | Thu, 22 Jan 2015 12:05:39 +0100

New psslurm prototype version 20.

------------------------------------------------------------------------
4a179b9 | Michael Rauh | Thu, 22 Jan 2015 09:40:51 +0100

Update regression test suite:

commit d04ac5892d4f1db9ed0c44fc232849789d26529e
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Wed Jan 21 17:23:13 2015 +0100

Remove faulty tests

commit ee6cd5a541f47806684e63d46b3e3441ae54af6f
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Wed Jan 21 11:08:21 2015 +0100

Bug fix

commit e77834c58d53de904a3e83c6c1d6ddfb4702cda2
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Wed Jan 21 11:05:34 2015 +0100

Handle exceptions during test execution

commit 8245d02d0c105252e68c763365461fecc4b79b6a
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Wed Jan 21 10:57:32 2015 +0100

Replace subprocess.Popen() calls by popen()

------------------------------------------------------------------------
6b42614 | Stephan Krempel | Tue, 20 Jan 2015 14:09:47 +0100

Fix regression test suite

Squashed commit of the following:

commit 15458f7fc6a2ab44addf4ceb469aaebd71afa0a5
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Tue Nov 25 16:09:00 2014 +0100

    regtest.py: Add --account option

commit 0704b4d8e743b3164955cfe28ecce72cc94d2e18
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Fri Dec 5 14:00:29 2014 +0100

    regtest.py: Export PSTEST_ACCOUNT to frontend process

------------------------------------------------------------------------
26e619a | Stephan Krempel | Thu, 15 Jan 2015 16:07:15 +0100

Update regression test suite

Squashed commit of the following:

commit 83bfa029a6487d07015be03d7d3e9aca9f2e4163
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Mon Dec 8 15:32:00 2014 +0100

    Update tests to work with non-standard QoS/account

commit 8dd507062c17fb6e304c9aac9f9e7f3e6b0a532c
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Mon Dec 8 14:24:48 2014 +0100

    Add new test for ticket #159

commit f6652da8247e784f233699787d9c1a99775077f9
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Tue Dec 2 15:45:50 2014 +0100

    Fix commit 7eeb0e6db

commit 578fc89dcf523a240202970cb01a05fb850d9009
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Tue Dec 2 15:41:44 2014 +0100

    Rewrite of ticket-105

commit bb66b6fbd8ab2c1694785960fb6e2a966bbc8622
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Tue Dec 2 15:00:22 2014 +0100

    Add new test mpi-comm-spawn

------------------------------------------------------------------------
df0e7e1 | Stephan Krempel | Wed, 14 Jan 2015 12:17:11 +0100

Implement cpu_bind types mask_cpu and map_cpu

------------------------------------------------------------------------
16841e2 | Stephan Krempel | Mon, 8 Dec 2014 18:36:45 +0100

Fix asymmetry in send/recv of JobLaunch request

------------------------------------------------------------------------
037a0b7 | Michael Rauh | Mon, 24 Nov 2014 11:47:30 +0100

Bugfix: don't re-enter malloc.

------------------------------------------------------------------------
4ff109d | Stephan Krempel | Thu, 4 Dec 2014 16:21:27 +0100

Add psslurm regression test result files to .gitignore

------------------------------------------------------------------------
82e62ad | Thomas Moschny | Mon, 8 Dec 2014 15:00:55 +0100

Remove wrong path to psjsonglib pkgconfig file.

------------------------------------------------------------------------
cd0724c | Thomas Moschny | Mon, 24 Nov 2014 17:48:52 +0100

Add missing files and fix .gitignore.

------------------------------------------------------------------------
6a031a1 | Stephan Krempel | Mon, 24 Nov 2014 16:20:11 +0100

Merge branch 'pstest' of /srv/repos/kraused/psmgmt

Squashed commit of the following:

commit 33297767bebfb912b8152dcf4f98bdf4160f9c4f
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Fri Nov 21 13:18:43 2014 +0100

    regtest.py: Add option for randomizing the test list

commit a5eee3a27a1323bc16824a75b0bf510022516f08
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Fri Nov 21 10:41:58 2014 +0100

    Remove partitions/reservations from tests

    Due to the changes introduce in commit 05c71380 it is
    not necessary anymore to specify "partitions" and
    "reservations" in the test descr.json file.

commit e65c96badc6143a1c7c9539ff1fe87ece65230d8
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Fri Nov 21 10:30:44 2014 +0100

    regtest.py: Change reservation/partition/qos handling

    The testsuite was designed with the ability to be able to run tests
    on different partitions at the same time and then compare results
    in the evaluation procedure. This feature however was not very useful
    in practice and had the downside that the partitions and reservations
    had to be specified in the testfile. The -i/--ignorep option was
    added as a workaround to allow for excluding selected partitions.

    This commit introduces a backwards-incompatible change to the way
    partitions and reservations are handled. At the same time support
    for a qos specification is added. Instead of using the "partition"
    and "reservation" specification from the test the partition, reservation
    and qos can be specified on the command line using --reservation,
    --partition and --qos. If --partition is not specified the default
    partition is used.

commit eaf43cccfaf019604e664629ae25cf9a69f68553
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Fri Nov 21 10:29:49 2014 +0100

    regtest.py: Add submission host to key

    Include the submission host to the test key so that it is safe(r)
    to submit from different hosts at the same time on a shared file
    system.

commit c2a48ef8cd43da6334cee34621f035fac020da6f
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Fri Nov 21 10:13:51 2014 +0100

    gen-srun-B-tests.py: Use x instead of * for test names

commit 93edfea11c491175f798ba75eaa6253931113fe2
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Fri Nov 21 10:13:00 2014 +0100

    Replace * in folder names by x

    This commit changes the * in the name of the srun-B tests
    by an x to avoid problems with bash expansion.

commit adf4e7c950db8724473531438ae63e29ce538519
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Mon Nov 17 13:57:33 2014 +0100

    Add new test sgather-2

    This commit renames sgather -> sgather-1

commit 665a6628ec186e3a72479a2a1cde9dede580a530
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Mon Nov 17 13:48:59 2014 +0100

    Add tests for ticket 154

commit 562c51b6b183aaa51e071e5dcd65ee7b9d3aa5bf
Author: Dorian Krause <d.krause@fz-juelich.de>
Date:   Fri Nov 14 15:56:11 2014 +0100

    Add new test umask

------------------------------------------------------------------------
65f89f7 | Michael Rauh | Fri, 21 Nov 2014 15:03:30 +0100

New psslurm prototype version 19.

------------------------------------------------------------------------
ec07f8b | Michael Rauh | Tue, 18 Nov 2014 13:35:14 +0100

New psslurm prototype version 18.

------------------------------------------------------------------------
c966d96 | Michael Rauh | Thu, 6 Nov 2014 10:11:06 +0100

New psslurm prototype version 17.

------------------------------------------------------------------------
6d6033e | Dorian Krause | Fri, 31 Oct 2014 07:46:20 +0100

Add new multi-prog (formerly: multiprog) tests

------------------------------------------------------------------------
6c5dabd | partec | Thu, 30 Oct 2014 13:54:26 +0100

New psslurm prototype version 16.

------------------------------------------------------------------------
a7e77bd | partec | Tue, 28 Oct 2014 09:28:58 +0100

Merge branch 'pstest' of /srv/repos/kraused/psmgmt

------------------------------------------------------------------------
d7f3052 | Dorian Krause | Tue, 28 Oct 2014 08:30:10 +0100

sstat-1 test: Bug fix

We need to account for the time a job ispending.
The previous version of the test failed if a job
was pending in the queue for too long.

------------------------------------------------------------------------
55ea549 | Dorian Krause | Mon, 27 Oct 2014 13:03:09 +0100

Merge branch 'master' of ssh://zam2136.zam.kfa-juelich.de:/srv/repos/psmgmt into pstest

------------------------------------------------------------------------
918ac09 | partec | Mon, 27 Oct 2014 16:24:11 +0100

Merge branch 'pstest' of /srv/repos/kraused/psmgmt

------------------------------------------------------------------------
0b00baf | Dorian Krause | Fri, 17 Oct 2014 16:00:36 +0200

Check DerivedExitCode in ticket-20/eval.py

------------------------------------------------------------------------
902240f | partec | Thu, 23 Oct 2014 15:24:52 +0200

New psslurm prototype version 15.

------------------------------------------------------------------------
a41c564 | partec | Fri, 10 Oct 2014 15:04:56 +0200

New psslurm prototype version 14.

------------------------------------------------------------------------
005eb2c | Dorian Krause | Wed, 1 Oct 2014 13:28:15 +0200

Merge branch 'master' of ssh://zam2136.zam.kfa-juelich.de:/srv/repos/psmgmt into pstest

------------------------------------------------------------------------
478564e | partec | Wed, 1 Oct 2014 10:51:27 +0200

New psslurm prototype version 13.

------------------------------------------------------------------------
50eb08a | Dorian Krause | Wed, 1 Oct 2014 13:18:07 +0200

Add new test env-TASKS_PER_NODE-1

------------------------------------------------------------------------
1c69b13 | Dorian Krause | Wed, 1 Oct 2014 13:17:48 +0200

sbatch-env: Ignore SLURM_TASKS_PER_NODE

------------------------------------------------------------------------
4287f01 | Dorian Krause | Tue, 30 Sep 2014 10:48:31 +0200

Add test for TOPOLOGY_ADDR env variables

------------------------------------------------------------------------
caf7094 | Dorian Krause | Tue, 30 Sep 2014 10:48:02 +0200

Add test for CPU_BIND env variables

------------------------------------------------------------------------
74564e1 | Dorian Krause | Tue, 30 Sep 2014 10:38:23 +0200

Update {sbatch,srun}-env tests

This commit changes the tests sbatch-env and srun-env to use a
static list of keys to check for rather than comparing two queues.
Nowadays tests are mostly run on a single partition.

------------------------------------------------------------------------
4ded6f2 | Dorian Krause | Fri, 26 Sep 2014 14:06:37 +0200

Merge branch 'master' of ssh://zam2136.zam.kfa-juelich.de:/srv/repos/psmgmt into pstest

------------------------------------------------------------------------
223b7ca | partec | Thu, 25 Sep 2014 13:55:55 +0200

New psslurm prototype version 12.

------------------------------------------------------------------------
985ba36 | Dorian Krause | Fri, 26 Sep 2014 14:05:19 +0200

Add new tests for ticket #103

------------------------------------------------------------------------
3275e63 | Dorian Krause | Fri, 26 Sep 2014 14:03:28 +0200

Rename exit-code -> exit-code-1

------------------------------------------------------------------------
b84e17a | Dorian Krause | Fri, 26 Sep 2014 14:03:12 +0200

Add srun-c-{1,2,3,4} tests

------------------------------------------------------------------------
113fa36 | Dorian Krause | Wed, 24 Sep 2014 11:25:59 +0200

Add mpi-segfault test program

------------------------------------------------------------------------
1748f82 | Dorian Krause | Wed, 24 Sep 2014 11:12:32 +0200

Add misc folder

This commit adds a misc folder contains programs/tools that are
used as part of the psslurm testing efforts but do not fit anywhere
else.

------------------------------------------------------------------------
fbc4920 | Dorian Krause | Wed, 24 Sep 2014 11:02:42 +0200

Merge branch 'master' of ssh://zam2136.zam.kfa-juelich.de:/srv/repos/psmgmt into pstest

------------------------------------------------------------------------
9dd4771 | partec | Mon, 22 Sep 2014 10:12:34 +0200

Merge branch 'pstest' of /srv/repos/kraused/psmgmt

------------------------------------------------------------------------
52dedff | partec | Mon, 22 Sep 2014 10:12:13 +0200

New psslurm prototype version 11.

------------------------------------------------------------------------
00dc339 | partec | Thu, 11 Sep 2014 12:18:07 +0200

New psslurm prototype version 10.

------------------------------------------------------------------------
45a4279 | Dorian Krause | Wed, 24 Sep 2014 11:00:18 +0200

Add a README file

------------------------------------------------------------------------
1b87de1 | Dorian Krause | Wed, 24 Sep 2014 11:00:12 +0200

Add new test sstat-1

------------------------------------------------------------------------
4c68e56 | Dorian Krause | Wed, 24 Sep 2014 09:25:35 +0200

Add new test scontrol-show-slurmd

------------------------------------------------------------------------
9dfd448 | Dorian Krause | Wed, 24 Sep 2014 08:25:20 +0200

Add test for ticket 116 based on Slurm testsuite

------------------------------------------------------------------------
fdb4f0d | Dorian Krause | Wed, 24 Sep 2014 08:25:12 +0200

Add test for ticket 108 based on Slurm testsuite

------------------------------------------------------------------------
9549068 | Dorian Krause | Wed, 24 Sep 2014 08:25:05 +0200

Add test for ticket 106 based on Slurm testsuite

------------------------------------------------------------------------
d7d8366 | Dorian Krause | Wed, 24 Sep 2014 08:25:01 +0200

Add test for ticket 105 based on Slurm testsuite

------------------------------------------------------------------------
3e3dd78 | Dorian Krause | Wed, 24 Sep 2014 08:24:56 +0200

Add test for ticket 104 based on Slurm testsuite

------------------------------------------------------------------------
e2e35e5 | Dorian Krause | Tue, 23 Sep 2014 16:38:46 +0200

Delete temporary vim file from repository

------------------------------------------------------------------------
5c986ea | Dorian Krause | Tue, 23 Sep 2014 16:38:37 +0200

Add tests for srun -B

------------------------------------------------------------------------
5ed5063 | Dorian Krause | Tue, 23 Sep 2014 08:11:56 +0200

Add new tests signal-2 and signal-3

------------------------------------------------------------------------
e1186c9 | Dorian Krause | Tue, 23 Sep 2014 07:35:15 +0200

Rename test signal to signal-1

------------------------------------------------------------------------
f2be342 | Dorian Krause | Sun, 21 Sep 2014 13:14:48 +0200

Add new test ticket-132

------------------------------------------------------------------------
7f27f1b | Dorian Krause | Thu, 18 Sep 2014 14:22:36 +0200

regtest.py: Give reasonable exit code

This commit changes regtest.py such that a non-zero exit code is
given if no tests are executed.

------------------------------------------------------------------------
6a990c2 | Dorian Krause | Thu, 18 Sep 2014 07:39:44 +0200

Add new test mem_bind-none (ticket #75)

------------------------------------------------------------------------
a2db2a5 | Dorian Krause | Wed, 17 Sep 2014 13:09:40 +0200

regtest.py: Add new --nocolors option

Using --nocolors the colored output can be suppressed which is
useful if the output of regtest.py should be processed further
by tools.

------------------------------------------------------------------------
4c3931a | Dorian Krause | Thu, 18 Sep 2014 15:26:54 +0200

Merge branch 'master' of zam2136:/srv/repos/kraused/psmgmt into pstest

------------------------------------------------------------------------
0607b4d | Dorian Krause | Thu, 4 Sep 2014 09:59:48 +0200

Merge branch 'master' of zam2136:/srv/repos/kraused/psmgmt

------------------------------------------------------------------------
f240929 | Dorian Krause | Fri, 25 Jul 2014 12:46:38 +0200

Add test disable-status

------------------------------------------------------------------------
b88c3ae | Dorian Krause | Fri, 25 Jul 2014 12:45:31 +0200

regtest.py: Export outdir/key to frontend process

This commit adds the following environment variables to
the environment of the frontend process for batch jobs:
  - PSTEST_TESTKEY: key of the test
  - PSTEST_OUTDIR: output directory for the test

------------------------------------------------------------------------
107ee58 | Dorian Krause | Fri, 25 Jul 2014 10:27:05 +0200

Add signal test

------------------------------------------------------------------------
10cf3d9 | Dorian Krause | Fri, 25 Jul 2014 09:51:56 +0200

Add ticket-32 test

------------------------------------------------------------------------
5e21dc6 | Dorian Krause | Fri, 25 Jul 2014 09:30:11 +0200

Add ticket-26-[1-5] tests

------------------------------------------------------------------------
0d3a4b0 | Dorian Krause | Fri, 25 Jul 2014 08:53:07 +0200

Add job-arrays test (Ticket #28)

------------------------------------------------------------------------
135e9f0 | Dorian Krause | Fri, 25 Jul 2014 08:37:16 +0200

tests/ticket-69: Add flags

------------------------------------------------------------------------
e4ac57f | Dorian Krause | Fri, 25 Jul 2014 08:35:39 +0200

regtest.py: Add support for flags

By specifying the SUBMIT_NO_O_OPTION or SUBMIT_NO_E_OPTION flag
tests can disable to automatic addition of -o/-e flags to the
submission command line.

------------------------------------------------------------------------
5690dbe | Dorian Krause | Fri, 25 Jul 2014 08:34:01 +0200

regtest.py: return None in exec_test_interactive

In case of failure we return None (instead of going on).
This will ensure that the test is considered failed.

------------------------------------------------------------------------
d48671c | Dorian Krause | Fri, 25 Jul 2014 07:37:08 +0200

Add test ticket-33

------------------------------------------------------------------------
bc252c0 | Dorian Krause | Fri, 25 Jul 2014 07:25:25 +0200

Add test ticket-24

------------------------------------------------------------------------
62d4bc0 | Dorian Krause | Fri, 25 Jul 2014 07:12:00 +0200

Add test ticket-31

Due to the racy nature of the problem
this test needs to be repeated several
dozens of times to get a FAIL.

------------------------------------------------------------------------
743b673 | Dorian Krause | Thu, 24 Jul 2014 17:02:43 +0200

Add test ticket-30

------------------------------------------------------------------------
8ba5096 | Dorian Krause | Thu, 24 Jul 2014 16:22:37 +0200

tests/ticket-63: Bug fixes

------------------------------------------------------------------------
dbc6451 | Dorian Krause | Thu, 24 Jul 2014 16:11:30 +0200

Add ticket-63 test

------------------------------------------------------------------------
78272de | Dorian Krause | Thu, 24 Jul 2014 16:01:35 +0200

tests: Improve error reporting

------------------------------------------------------------------------
9b91908 | Dorian Krause | Thu, 24 Jul 2014 16:00:53 +0200

Add test stdin-fwd-none (Ticket #35)

------------------------------------------------------------------------
c2454e1 | Dorian Krause | Thu, 24 Jul 2014 15:51:59 +0200

tests/stdin-fwd-file: Add timeout

------------------------------------------------------------------------
a784011 | Dorian Krause | Thu, 24 Jul 2014 15:50:14 +0200

Add test stdin-fwd-file

------------------------------------------------------------------------
c1030b3 | Dorian Krause | Thu, 24 Jul 2014 15:18:53 +0200

tests: Fix references to the output directory

In order to allow repetition of tests, in commit
2f6c850bfb79329f5472f002c6d6f6060f8d3fba the output
directory was changed from "output" to a unique
"output-%s" % key file. This commit fixes arising
problems with tests.

------------------------------------------------------------------------
8f87abd | Dorian Krause | Thu, 24 Jul 2014 15:16:07 +0200

regtest.py: rename output -> stdout

------------------------------------------------------------------------
0a25673 | Dorian Krause | Thu, 24 Jul 2014 15:11:51 +0200

regtest.py: Don not raise Exception

For interactive jobs we do not expect the process to terminate
before we have figured out the jobid - After all the front end
process has not been started yet. This might happen though in
rare cases (I am not yet 100% sure when). In this case we should
not raise an Exception but try to go on.

------------------------------------------------------------------------
560d128 | Dorian Krause | Thu, 24 Jul 2014 15:09:23 +0200

regtest.py: Work around slurm bug

When adding -e slurm-%j.err to the srun command line, slurm will
correctly expand the filename but the scontrol output will still
equal slurm-%j.err. This commit adds a workaround for this issue.

------------------------------------------------------------------------
5f07a52 | Dorian Krause | Thu, 24 Jul 2014 15:08:25 +0200

regtest.py: Add -J key to submission line

By setting the job name to the test key it is relatively easy for
submission scripts to figure out the output directory using the
SLURM_JOB_NAME environment variable.

------------------------------------------------------------------------
125f49e | Dorian Krause | Thu, 24 Jul 2014 15:06:19 +0200

regtest.py: Handle @O placeholder in user strings

The @O placeholder is replaced by the output directory
of the job.

------------------------------------------------------------------------
9c9b18d | Dorian Krause | Thu, 24 Jul 2014 11:17:22 +0200

regtest.py: Bug fix

------------------------------------------------------------------------
b61893a | Dorian Krause | Thu, 24 Jul 2014 11:09:57 +0200

Add stderr-taskid-5 test

------------------------------------------------------------------------
88d2140 | Dorian Krause | Thu, 24 Jul 2014 11:02:30 +0200

regetst.py: Add -r/--repetitions option

For problems of racy nature it makes sense to repeat tests multiple
times. This commit adds this capability.
Supporting this feature requires a number of changes throughout the
code. In particular we cannot just use the "output" folder in the
test directory since multiple tests can be executed concurrently in
the same folder. We introduce a test key which uniquely identifies
each execution of a test. This also simplifies correlating output
with test results since the output folder is never moved.

------------------------------------------------------------------------
015b3f6 | Dorian Krause | Thu, 24 Jul 2014 09:57:34 +0200

Add timeout-exit-15 test

This test demonstrates the problem reported
in Ticket #70.

------------------------------------------------------------------------
25ba956 | Dorian Krause | Thu, 24 Jul 2014 09:51:51 +0200

regtest.py: Capture srun/sbatch exit code

So far regtest.py did not capture the exit code of the srun/sbatch
program. A comment stated that the scontrol output would contain
this information. This is howerver incorrect: The ExitCode reported
by scontrol is the exit code of the user application on the compute
node.
This commit implements this missing feature. The exit code is
provided to the evaluation process via the environment.

------------------------------------------------------------------------
4054ca9 | Dorian Krause | Thu, 24 Jul 2014 09:24:33 +0200

tests/ticket-42-2: Improve expect command series

------------------------------------------------------------------------
2e51d5a | Dorian Krause | Thu, 24 Jul 2014 09:23:41 +0200

Add srun-within-srun-2 test

------------------------------------------------------------------------
65cb084 | Dorian Krause | Thu, 24 Jul 2014 09:23:22 +0200

Rename test srun-within-srun -> srun-within-srun-1

------------------------------------------------------------------------
b7e4cd4 | Dorian Krause | Thu, 24 Jul 2014 08:55:30 +0200

Add ticket-42-2 test

------------------------------------------------------------------------
ce5af37 | Dorian Krause | Thu, 24 Jul 2014 08:55:19 +0200

Add ticket-42-1 test

------------------------------------------------------------------------
8f0b4da | Dorian Krause | Wed, 23 Jul 2014 15:46:32 +0200

Add ticket-40 test

------------------------------------------------------------------------
7eaffd5 | Dorian Krause | Wed, 23 Jul 2014 15:12:37 +0200

Add ticket-39 test

------------------------------------------------------------------------
7a6f782 | Dorian Krause | Wed, 23 Jul 2014 14:56:16 +0200

Add ticket-20 commit

------------------------------------------------------------------------
89c35ed | Dorian Krause | Wed, 23 Jul 2014 14:56:05 +0200

Add ticket-69 test

------------------------------------------------------------------------
62fa2db | Dorian Krause | Wed, 23 Jul 2014 13:50:49 +0200

regtest.py: Flush stdout

------------------------------------------------------------------------
3bb935f | Dorian Krause | Wed, 23 Jul 2014 13:50:40 +0200

Add simple-interactive test

------------------------------------------------------------------------
e568036 | Dorian Krause | Wed, 23 Jul 2014 13:23:56 +0200

test/pipes: Bug fix

Fix the permissions of echo.sh

------------------------------------------------------------------------
e8f06c5 | Dorian Krause | Wed, 23 Jul 2014 13:23:25 +0200

regtest.py: Bug fix for interactive tests

This commit fixes a hang seen when running
the srun-within-srun test.

------------------------------------------------------------------------
fd6d44b | Dorian Krause | Wed, 23 Jul 2014 13:22:16 +0200

regtest.py: Add -i option to ignore partitions

This commit introduces a new flag -i for regtest.py that
allows for disabling selected partitions.

------------------------------------------------------------------------
907ac56 | Dorian Krause | Wed, 23 Jul 2014 12:36:47 +0200

regtest.py: Improve handling of stdout/stderr

This commit contains several improvements to handling
of front end processes and the output of submitted
jobs. In particular we are now capturing srun output
and write them to a file if that is not done by the job
itself.

------------------------------------------------------------------------
83889bd | Dorian Krause | Wed, 23 Jul 2014 12:35:47 +0200

regtest.py: Add support for @D place-holder

@D is a place holder for the test root. This required
for jobs that need to use absolute paths.

------------------------------------------------------------------------
dbaab4e | Dorian Krause | Wed, 23 Jul 2014 12:34:19 +0200

regtest.py: Make sure BL is released

Wrap the prints by a try ... finally block to make sure
that we release the BL in any case.

------------------------------------------------------------------------
f7f978d | Dorian Krause | Wed, 23 Jul 2014 12:28:07 +0200

tests: Improve some asserts

The Assert()s that were raised when opening
the job output file failed have not been very
enlightening so far. This commit fixes that.

------------------------------------------------------------------------
78bac05 | Dorian Krause | Wed, 23 Jul 2014 11:45:06 +0200

tests: Rely on StdOut key being set

Recent versions of regtest.py make sure that
StdOut/StdErr are added to the scontrol dictionary
to simplify tests.

------------------------------------------------------------------------
b988939 | Dorian Krause | Wed, 23 Jul 2014 11:44:32 +0200

Add faulty-srun test

------------------------------------------------------------------------
20ea9dc | Dorian Krause | Wed, 23 Jul 2014 11:30:35 +0200

Add ticket-29 test

------------------------------------------------------------------------
f46df49 | Dorian Krause | Wed, 23 Jul 2014 10:28:28 +0200

Add ticket-68 test

------------------------------------------------------------------------
76b51fa | Dorian Krause | Wed, 23 Jul 2014 10:28:15 +0200

Add stdout-taskid-5 test

------------------------------------------------------------------------
c8b454e | Dorian Krause | Wed, 23 Jul 2014 09:45:51 +0200

regtest.py: Do not add -o if it is included in submit line

This commit changes the behavior of regest.py such that
-o flags on the submit command line are not clobbered.

------------------------------------------------------------------------
e15d8e7 | Dorian Krause | Tue, 22 Jul 2014 16:39:36 +0200

Add multiprog test

------------------------------------------------------------------------
97890c7 | Dorian Krause | Tue, 22 Jul 2014 16:37:41 +0200

Add ntasks-default test

------------------------------------------------------------------------
7f2d301 | Dorian Krause | Tue, 22 Jul 2014 16:01:50 +0200

Add stdin-fwd-5 test

------------------------------------------------------------------------
055e199 | Dorian Krause | Tue, 22 Jul 2014 15:55:02 +0200

Add stdin-fwd-all test

------------------------------------------------------------------------
4c4ff9e | Dorian Krause | Tue, 22 Jul 2014 14:45:02 +0200

tests: Whitespace changes

------------------------------------------------------------------------
00166c7 | Dorian Krause | Tue, 22 Jul 2014 14:44:50 +0200

Add srun-within-srun test

------------------------------------------------------------------------
fab887d | Dorian Krause | Tue, 22 Jul 2014 14:42:16 +0200

Add srun-env test

------------------------------------------------------------------------
2f4c0b0 | Dorian Krause | Tue, 22 Jul 2014 14:42:06 +0200

Add sbatch-env test

------------------------------------------------------------------------
be277b8 | Dorian Krause | Tue, 22 Jul 2014 14:40:07 +0200

Add prolog-epilog-rel test

------------------------------------------------------------------------
dc77ef8 | Dorian Krause | Tue, 22 Jul 2014 14:39:51 +0200

Add prolog-epilog-abs test

------------------------------------------------------------------------
e3d141f | Dorian Krause | Tue, 22 Jul 2014 14:39:19 +0200

Add pipes test

------------------------------------------------------------------------
3f2a578 | Dorian Krause | Tue, 22 Jul 2014 14:38:56 +0200

Add labels test

------------------------------------------------------------------------
f00d235 | Dorian Krause | Tue, 22 Jul 2014 14:38:31 +0200

Add hostname test

------------------------------------------------------------------------
f21cfe6 | Dorian Krause | Tue, 22 Jul 2014 13:44:56 +0200

regtest.py: Accept strings and split them yourself

For users it is simpler to specify commands as strings
rather than an array of strings. We can detect this
and simply split the command. Note that we use
issinstance(-, basestring) rather than isinstance(-, str)
since the JSON library returns unicode strings.

------------------------------------------------------------------------
fb727b5 | Dorian Krause | Tue, 22 Jul 2014 13:33:34 +0200

regtest.py: Drop -D argument

When specifying the -D argument, srun will not be
able to find the input script in the test directory
(sbatch copies the script). Therefore we drop the
-D argument. All scripts need to make sure that files
are created in the output directory.
This commit also changes the argument to -o such
that an absolute path is used.

------------------------------------------------------------------------
1db4003 | Dorian Krause | Tue, 22 Jul 2014 13:32:22 +0200

regtest.py: Bug fixes

This commit fixes two bugs in the function
exec_test_interactive. First, the second argument
should be the partition/reservation index. Second,
a non-negative return value of the srun command
should not rais an exception.

------------------------------------------------------------------------
2aeba55 | Dorian Krause | Tue, 22 Jul 2014 13:29:02 +0200

regtest.py: Improve formatting

Instead of using tabs we are padding strings with whitespaces
to guarantee a proper alignment (assuming an upper bound for
the name of tests.

------------------------------------------------------------------------
d50abac | Dorian Krause | Tue, 22 Jul 2014 10:42:03 +0200

regtest.py: Handle NODE_FAIL JobState

------------------------------------------------------------------------
68dea19 | Dorian Krause | Tue, 22 Jul 2014 07:09:47 +0200

regtest.py: Fix racy chdir

The os.chdir call lead to a race between different threads
since the current working directory is the same for all threads.
From time to time, the submit() call would fail because
sbatch/srun could not find the submission file. Further
investigation showed that the working directory had been
changed in the meantime.

------------------------------------------------------------------------
f92f143 | Dorian Krause | Mon, 21 Jul 2014 14:18:35 +0200

regtest.py: Read reservations from test description

In the current setup on Juropa 3 the psslurm partition
is only available in conjunction with the psslurm
reservation. Thus we need an option to specify an
accompanying reservation.

------------------------------------------------------------------------
e03731a | Dorian Krause | Tue, 15 Jul 2014 16:21:09 +0200

regtest.py: Add support for interactive jobs

This commit adds suport for interactive jobs.
The current solution is not as nice as what,
e.g., expect provides but is a good starting
point.

------------------------------------------------------------------------
579a027 | Dorian Krause | Tue, 15 Jul 2014 16:20:43 +0200

regtest.py: Whitespace changes for cleanup

------------------------------------------------------------------------
84176d1 | Dorian Krause | Tue, 15 Jul 2014 14:42:42 +0200

regtest.py: Fix coding issue

Fix long lines in regtest.py

------------------------------------------------------------------------
9091899 | Dorian Krause | Tue, 15 Jul 2014 14:38:44 +0200

regtest.py: Support comments in JSON files

JSON - as a format intended for data serialization -
does not support comments. This commit adds support
for Python/Bash style line comments as an extension
to the JSON format. The comments are simply stripped
of before parsing the content of descr.json.

------------------------------------------------------------------------
fac1b66 | Dorian Krause | Mon, 14 Jul 2014 08:15:27 +0200

regtest.py: Whitespace changes

------------------------------------------------------------------------
c3be16b | Dorian Krause | Mon, 14 Jul 2014 08:12:01 +0200

regtest.py: Treat srun output

In order to ensure that we do not block
indefinitely if the srun process produces
massive output we need to check from time
to time for available date in the buffers
and flush them (i.e., read from the pipe -
We drop all the values).

------------------------------------------------------------------------
3f13e28 | Dorian Krause | Mon, 14 Jul 2014 07:59:59 +0200

regtest.py: Bug fix

According to the specs of the
subprocess module, communicate
waits for a process to terminate.
This is not what we want when
executing srun.

------------------------------------------------------------------------
ba8d6c4 | Dorian Krause | Fri, 11 Jul 2014 16:28:09 +0200

regtest.py: Place srun output in the correct folder

------------------------------------------------------------------------
0704e8d | Dorian Krause | Fri, 11 Jul 2014 16:27:27 +0200

regtest.py: Fix poor-mans eval

When no evaluation procedure
is specified we just check that
all ExitCodes are the same. This
needs to be adapted now that
we support job arrays.

------------------------------------------------------------------------
20c695c | Dorian Krause | Fri, 11 Jul 2014 16:21:53 +0200

regtest.py: Add support for srun

This commit fixes regtest.py such that
batch jobs can not only be submitted
using sbatch but also via srun.

------------------------------------------------------------------------
af55300 | Dorian Krause | Fri, 11 Jul 2014 15:54:59 +0200

Rename regest.py to regtest.py

This commit fixes a typo in the
name of the regression testsuite
driver.

------------------------------------------------------------------------
4739c3a | Dorian Krause | Fri, 11 Jul 2014 15:19:17 +0200

regtest.py: Bug fix

------------------------------------------------------------------------
8b4e307 | Dorian Krause | Fri, 11 Jul 2014 15:18:49 +0200

regtest.py: Add new test to check_test_description

This commit adds additional checks for
interactive jobs.

------------------------------------------------------------------------
0dbfbb1 | Dorian Krause | Fri, 11 Jul 2014 15:06:20 +0200

regtest.py: Add new test checks

This commit adds additional checks
to check_test_description.

------------------------------------------------------------------------
b71beab | Dorian Krause | Fri, 11 Jul 2014 14:52:39 +0200

regtest.py: Check input test description

The commit adds the function check_test_description()
for checking the test description read from
the JSON file.

------------------------------------------------------------------------
8723a20 | Dorian Krause | Fri, 11 Jul 2014 14:27:33 +0200

regtest.py: Add support for job arrays

This commit adds support for the job array
feature of slurm. This requires capturing the
state of different array tasks. When job arrays
are used the scontrol output for all array
tasks are exported by adding the taskid to
the prefix (e.g., task 2 in partition batch
will use the prefix PSTEST_SCONTROL_BATCH_2_).

------------------------------------------------------------------------
61e839c | Dorian Krause | Fri, 11 Jul 2014 13:20:31 +0200

regtest.py: Add get_test_list function

This commit moves the logic for the
construction of the list of tests into
a separate function.

------------------------------------------------------------------------
2014ebd | Dorian Krause | Fri, 11 Jul 2014 13:18:44 +0200

regtest.py: Add -x option

-x/--excludes can be used to exclude
a list of tests from being executed.

------------------------------------------------------------------------
bbbf44f | Dorian Krause | Fri, 11 Jul 2014 13:15:20 +0200

regtest.py: Add -t option

-t/--tests can be used to specify
a list of tests that should be
performed.

------------------------------------------------------------------------
279ba0e | Dorian Krause | Fri, 11 Jul 2014 13:12:55 +0200

regtest.py: Add option -l

-l/--list can be used to
query the list of tests that
would be executed.

------------------------------------------------------------------------
c39a137 | Dorian Krause | Fri, 11 Jul 2014 12:57:20 +0200

regtest.py: Process tests in parallel

This commit updates the main loop such
that several tests can be executed
in parallel.

------------------------------------------------------------------------
001c9db | Dorian Krause | Fri, 11 Jul 2014 12:53:09 +0200

regtest.py: Cleanup

------------------------------------------------------------------------
9b9d856 | Dorian Krause | Fri, 11 Jul 2014 12:51:19 +0200

regtest.py: Add -d option

Instead of reading the tests directory
from the environment we use a default
computed from the path to bin/regexp.py.

Command line parsing is done with the
optparse module.

------------------------------------------------------------------------
1400605 | Dorian Krause | Fri, 11 Jul 2014 12:48:59 +0200

regtest.py: Do not move empty folder

If the output folder is empty we can
reuse it rather than moving it.

------------------------------------------------------------------------
ace29c0 | Dorian Krause | Fri, 11 Jul 2014 10:30:34 +0200

Add initial regest.py version

regtest.py is the driver for
the psslurm regression test suite.

------------------------------------------------------------------------
ce806e1 | Dorian Krause | Fri, 12 Sep 2014 15:21:45 +0200

regtest: Print summary information

This commit adds a summary feature to the regtest.py driver
code. At the end of a run (canceled or not) a summary line
is printed to stdout.

------------------------------------------------------------------------
612aa77 | Dorian Krause | Thu, 4 Sep 2014 09:42:18 +0200

tests: Various bug fixes

------------------------------------------------------------------------
7679749 | Dorian Krause | Tue, 2 Sep 2014 15:50:09 +0200

pstest: Update tests to use @P/PSTEST_PARTITION_CPUS

This commit updates tests that appear to be adaptable to use
this new feature of regtest.py. Note that some other tests,
notably the distribution-*, *bind-* and hint-* tests are bound
to the Juropa-3 system and can not be (easily) changed.

------------------------------------------------------------------------
b187c01 | Dorian Krause | Tue, 2 Sep 2014 15:49:21 +0200

pstest: helper: Add partitions_cpus() function

This commit adds the new function partitions_cpus() to query
the number of CPUs (in Slurm terminology) available on the compute
nodes in a partition.

------------------------------------------------------------------------
0b858ab | Dorian Krause | Tue, 2 Sep 2014 15:45:22 +0200

regtest: Allow size adaptable tests

Many tests that were written on the Juropa-3 system have hard-coded
assumptions on the number of cpus. This commit adds support for
tests that adapt the size of the submitted job based on the available
hardware. To this end, the hardware configuration (as seen by
Slurm) is queried using sinfo. srun commands can use @P on the
command line in the descr.json to reference the number of CPUs. In
sbatch jobs the environment variable PSTEST_PARTITION_CPUS is
available. The number of CPUs for each partition is also exported
for the evaluation script.
An additional new (related) feature is support for formula expansion.
Formulas encompassed by |...| in the submission line in the
description file of a test are evaluated using Python's eval()
function.

------------------------------------------------------------------------
d1ece19 | partec | Fri, 29 Aug 2014 11:21:20 +0200

New psslurm prototype version 9.

------------------------------------------------------------------------
61b3117 | partec | Tue, 26 Aug 2014 13:16:09 +0200

Merge branch 'pstest' of /srv/repos/kraused/psmgmt

------------------------------------------------------------------------
c424014 | Dorian Krause | Fri, 22 Aug 2014 16:44:48 +0200

Add new test exit-code

------------------------------------------------------------------------
0bae571 | Dorian Krause | Fri, 22 Aug 2014 16:25:41 +0200

regtest.py: Use scontrol --detail

This commit changes the call to scontrol to scontrol --detail
to capture the derived exit code.

------------------------------------------------------------------------
4379ba7 | Dorian Krause | Fri, 22 Aug 2014 16:18:05 +0200

Add new tests srun-immediate-timeout-{1..5}

------------------------------------------------------------------------
c7bc21d | Dorian Krause | Fri, 22 Aug 2014 16:17:52 +0200

Add new tests srun-v-timeout-{1..5}

------------------------------------------------------------------------
b1b2711 | Dorian Krause | Thu, 21 Aug 2014 10:53:03 +0200

Add new test lost-sruns

------------------------------------------------------------------------
e23fa6c | Dorian Krause | Tue, 19 Aug 2014 15:21:40 +0200

Add test line-count-7

------------------------------------------------------------------------
997ff17 | Dorian Krause | Tue, 19 Aug 2014 15:21:33 +0200

Add test debugger-test

------------------------------------------------------------------------
be0e3ef | Dorian Krause | Tue, 19 Aug 2014 13:15:57 +0200

Add new test line-count-6

------------------------------------------------------------------------
8c516e1 | Dorian Krause | Tue, 19 Aug 2014 13:12:18 +0200

Add test line-count-5

------------------------------------------------------------------------
c544a38 | Dorian Krause | Tue, 19 Aug 2014 13:09:36 +0200

line-count-2: Connect stderr with /dev/null

------------------------------------------------------------------------
da70954 | Dorian Krause | Tue, 19 Aug 2014 13:01:21 +0200

Add new test labels-2

------------------------------------------------------------------------
4cfb630 | Dorian Krause | Tue, 19 Aug 2014 13:01:10 +0200

Rename test labels -> labels-2

------------------------------------------------------------------------
9533f64 | Dorian Krause | Tue, 19 Aug 2014 09:34:25 +0200

Add test line-count-4

------------------------------------------------------------------------
e64b523 | Dorian Krause | Tue, 19 Aug 2014 09:34:23 +0200

Add test line-count-3

------------------------------------------------------------------------
1794f0e | Dorian Krause | Tue, 19 Aug 2014 09:34:20 +0200

Add test line-count-2

------------------------------------------------------------------------
aaa1791 | Dorian Krause | Tue, 19 Aug 2014 09:13:54 +0200

Remove unneeded file

------------------------------------------------------------------------
c114134 | Dorian Krause | Tue, 19 Aug 2014 08:31:37 +0200

Rename test line-count -> line-count-1

------------------------------------------------------------------------
d87828a | Dorian Krause | Tue, 19 Aug 2014 08:26:45 +0200

Add new test line-count

------------------------------------------------------------------------
b917cad | Dorian Krause | Tue, 19 Aug 2014 08:01:11 +0200

Add new test id

------------------------------------------------------------------------
12877f4 | Dorian Krause | Mon, 18 Aug 2014 15:38:13 +0200

Add new test ticket-71-6

------------------------------------------------------------------------
c1ca585 | Dorian Krause | Mon, 18 Aug 2014 15:37:12 +0200

Add docs/Known-Slurm-Bugs.txt

This commit adds a file in which we document known problems with
vanilla slurm that we collected in the development of the
testsuite.

------------------------------------------------------------------------
b06502a | partec | Mon, 25 Aug 2014 16:01:47 +0200

New psslurm prototype version 8.

------------------------------------------------------------------------
a7285a7 | partec | Mon, 25 Aug 2014 15:57:29 +0200

Merge branch 'pstest' of /srv/repos/kraused/psmgmt

------------------------------------------------------------------------
ee66938 | Dorian Krause | Wed, 13 Aug 2014 16:33:22 +0200

Add test for slurm_get_end_time()

------------------------------------------------------------------------
bbcfa0e | Dorian Krause | Wed, 13 Aug 2014 16:33:10 +0200

Add test for slurm_get_rem_time()

------------------------------------------------------------------------
7a69c9e | Dorian Krause | Wed, 13 Aug 2014 16:28:51 +0200

Add test format-A-2

------------------------------------------------------------------------
38dbdbd | Dorian Krause | Wed, 13 Aug 2014 16:28:48 +0200

Add test format-A-1

------------------------------------------------------------------------
94037a8 | Dorian Krause | Wed, 13 Aug 2014 16:28:20 +0200

Add test ticket-71-5

------------------------------------------------------------------------
37fa648 | Dorian Krause | Wed, 13 Aug 2014 16:28:14 +0200

Add test ticket-71-4

------------------------------------------------------------------------
a5e9dd6 | Dorian Krause | Wed, 13 Aug 2014 16:28:12 +0200

Add test ticket-71-3

------------------------------------------------------------------------
fb3f9ee | Dorian Krause | Wed, 13 Aug 2014 16:28:07 +0200

Add test ticket-71-2

------------------------------------------------------------------------
2e1b0cd | Dorian Krause | Wed, 13 Aug 2014 16:24:31 +0200

Rename test ticket-71 -> ticket-71-1

------------------------------------------------------------------------
783deae | Dorian Krause | Wed, 13 Aug 2014 16:24:18 +0200

Add test format-N-2

------------------------------------------------------------------------
c0d13f2 | Dorian Krause | Wed, 13 Aug 2014 16:24:05 +0200

Rename test format-N -> format-N-1

------------------------------------------------------------------------
90e41b3 | Dorian Krause | Tue, 12 Aug 2014 11:00:52 +0200

tests/slurm_pid2jobid: Fix incorrect error message

------------------------------------------------------------------------
44a0407 | Dorian Krause | Tue, 12 Aug 2014 08:51:35 +0200

Rename test ticket-91 -> slurm_pid2jobid

------------------------------------------------------------------------
7d068af | Dorian Krause | Tue, 12 Aug 2014 08:48:20 +0200

b/testsuite/helper.py: Use new algorithm to retrieve host list

This commit adds an improved algorithm for the generation of
host lists from the compress list format used by Slurm. This
version makes no assumption about the naming scheme of the cluster
compute nodes and more closely resembles the Slurm behavior.

------------------------------------------------------------------------
3eedfc6 | Dorian Krause | Mon, 11 Aug 2014 11:29:19 +0200

Add test ticket-91

------------------------------------------------------------------------
3c96a38 | Dorian Krause | Mon, 11 Aug 2014 10:57:13 +0200

regtest.py: Reorder tests

When running tests with repetition we want to avoid running the
same test a hundred times before moving on to the next one. As
an example, when running the testsuite with -r 3 and tests
    [a, b, c]
the old code would create the test list
    [a, a, a, b, b, b, c, c, c].
This commit changes the behavior such that the test list reads
    [a, b, c, a, b, c, a, b, c].

------------------------------------------------------------------------
acfad64 | Dorian Krause | Wed, 6 Aug 2014 14:10:48 +0200

Add test for %s in format strings

------------------------------------------------------------------------
04a4cbf | Dorian Krause | Wed, 6 Aug 2014 13:49:22 +0200

Add tests for %j in format strings

------------------------------------------------------------------------
ba18e65 | Dorian Krause | Wed, 6 Aug 2014 13:49:13 +0200

Add format-t-2 test

------------------------------------------------------------------------
5ac8b5f | Dorian Krause | Wed, 6 Aug 2014 13:23:10 +0200

Renamed format-t -> format-t-1

------------------------------------------------------------------------
37a45c9 | Dorian Krause | Wed, 6 Aug 2014 13:14:30 +0200

Add tests for %N, %n, %t and %u in format strings

------------------------------------------------------------------------
db6d22f | Dorian Krause | Wed, 6 Aug 2014 11:29:57 +0200

Add test for Ticket #83

------------------------------------------------------------------------
bddf2e1 | Dorian Krause | Wed, 6 Aug 2014 11:29:49 +0200

Add test for Ticket #82

------------------------------------------------------------------------
321d356 | Dorian Krause | Wed, 6 Aug 2014 08:04:51 +0200

regtest.py: Always sort tests

Even though we cannot guarantee any order of the results
due to the parallel processing and variable execution times
but it still makes sense to sort the tests beforehand since
the order of os.listdir() is seemingly random.

------------------------------------------------------------------------
98251af | Dorian Krause | Tue, 5 Aug 2014 15:47:32 +0200

regtest.py: Sort tests when listing them

This commit changes the behavior of regtest.py when invoked with
-l such that tests are sorted.

------------------------------------------------------------------------
5eba1fc | Dorian Krause | Tue, 5 Aug 2014 11:12:55 +0200

regtest.py: Use os.killpg instead of terminate

In order to properly cleanup frontend processes that may spawn
other processes we should send SIGTERM to the process group.

------------------------------------------------------------------------
45f2c38 | Dorian Krause | Tue, 5 Aug 2014 09:08:35 +0200

regtest.py: Fix colors

Recent changes to the output formatting changed the dark red
used to mark FAILed tests by a different red tone which is less
appropriate.

------------------------------------------------------------------------
7177ea6 | Dorian Krause | Tue, 5 Aug 2014 08:57:32 +0200

regtest.py: Improve readibility of test evaluation code

This commit streamlines the code used to detect test
failure. It also makes sure that the actual return value
of the exec_test_{batch,interactive} function is taken into
account (not just whether None == stats["scontrol"]).

------------------------------------------------------------------------
30f22ec | Dorian Krause | Tue, 5 Aug 2014 08:49:08 +0200

regtest.py: Add timeout support

This commit adds a new option -T/--timeout to the regtest.py
driver that allows to limit the maximal execution time of the
individual tests.

------------------------------------------------------------------------
6502544 | Dorian Krause | Tue, 5 Aug 2014 08:39:21 +0200

regtest.py: Improve return value of exec_test_{batch,interactive}

This commit changes the return value of exec_test_batch and
exec_test_interactive in case of failure such that information
about the cause of the failure can be inferred.

------------------------------------------------------------------------
aeac9c5 | Dorian Krause | Tue, 5 Aug 2014 08:29:25 +0200

regtest.py: Introduce print_test_outcome()

This commit adds a new function print_test_outcome() which is used
to generate the stdout output lines containing test names, keys
and the color-coded result.

------------------------------------------------------------------------
1df495e | Dorian Krause | Tue, 5 Aug 2014 08:20:43 +0200

regtest.py: Whitespace change

------------------------------------------------------------------------
9d20028 | Dorian Krause | Tue, 5 Aug 2014 08:18:06 +0200

regtest.py: Reorganize test evaluation and printout

This commit slightly alters the execution flow in the test
evaluation phase in preparation for upcoming changes that
will improve reporting about test results (in particular
reason for canceling)

------------------------------------------------------------------------
1bbbd48 | Dorian Krause | Tue, 5 Aug 2014 08:07:21 +0200

regtest.py: Add function catch_bugs_in_exec_test()

This commit moves commen debug tests into the function
catch_bugs_in_exec_test().

------------------------------------------------------------------------
b433ebe | Dorian Krause | Tue, 5 Aug 2014 07:56:41 +0200

regetest.py: Remove debug print statement

------------------------------------------------------------------------
320fc72 | Dorian Krause | Tue, 5 Aug 2014 07:53:41 +0200

regtest.py: Handle stalls due to unavailable resources

This commit adds logic that allows threads to terminate themselves
in the main loop. This is used to terminate the execution in case
the requested resources are not available due to downed/drained
compute nodes.

------------------------------------------------------------------------
a181fbb | Dorian Krause | Tue, 5 Aug 2014 07:42:33 +0200

regtest.py: Bug fix

Fix use of wrong variable name

------------------------------------------------------------------------
b53f4f0 | Dorian Krause | Tue, 5 Aug 2014 07:37:34 +0200

regtest.py: Write scancel stderr to logfile if any

If the scancel command writes to stderr we should capture that
output and add it to the logfile.

------------------------------------------------------------------------
da17c9e | Dorian Krause | Mon, 4 Aug 2014 15:41:18 +0200

regtest.py: Improve killability

This commit modifies the regtest.py workflow such that
SIGINT/SIGQUIT/SIGTERM are properly handled. To this end a new
member canceled of WorkerThread is introduced. If the member is
set to one threads will attempt to finish up their work as soon
as possible. In this way we can terminate the testsuite in a
clean fashion.

------------------------------------------------------------------------
5f2b26b | Dorian Krause | Mon, 4 Aug 2014 13:19:10 +0200

regtest.py: Let WorkerThread pass self to function

In preparation of upcoming changes that allow for clean canceling
of the testsuite this commit changes the WorkerThread.run()
function such that self is passed to the executed function. This
will allow querying state information stored in the WorkerThread
instance.

------------------------------------------------------------------------
ff8a508 | Dorian Krause | Mon, 4 Aug 2014 13:07:57 +0200

regtest.py: Compute loop iteration delay based on timing

This commit fixes the sleep() logic in the main loop such
that the actual loop time is (approximately) a multiple of
the requested delay.

------------------------------------------------------------------------
b95b7ff | Dorian Krause | Mon, 4 Aug 2014 12:53:49 +0200

regtest.py: Avoid infinite loop if job submission failed

If the submission fails the code is unable to retrieve the (non-
existing) job id from stdout/stderr and thus the current version
is going in an infinite loop. Fix this by allowing the loop to
terminate if the submit command terminated with a non-zero exit
code.

------------------------------------------------------------------------
a1a3002 | Dorian Krause | Mon, 4 Aug 2014 08:42:15 +0200

regtest.py: Add additional regexp in extract_jobid_if_possible

If nodes are down/drained and the job cannot start using the
"srun: job .* queued and waiting for resources" message is all we
have to figure out the job id.

------------------------------------------------------------------------
99dfcf1 | Dorian Krause | Mon, 4 Aug 2014 08:12:09 +0200

regtest.py: Copy stdout of frontend process for interactive jobs

For debugging of failing tests it is useful to have a transcript
of the stdout of the frontend process which steers the pty slave
in interactive jobs.

------------------------------------------------------------------------
66478ef | Dorian Krause | Mon, 4 Aug 2014 08:11:33 +0200

regtest.py: Move create_output_dir call site

We should create the test output directory only if
we are certain that the job is valid and will be performed.

------------------------------------------------------------------------
88db581 | Dorian Krause | Fri, 1 Aug 2014 16:35:09 +0200

regtest.py: Improve interactive job handling

The frontend process should not terminate before the submission
command finished. This is signaled via SIGUSR1.
We observed failures on the batch partition that seem to be fixed
by this commit.

------------------------------------------------------------------------
a9c0553 | Dorian Krause | Fri, 1 Aug 2014 10:48:31 +0200

regtest.py: Bug fix

We need to create a deep copy of the test dictionary.

------------------------------------------------------------------------
84d8615 | Dorian Krause | Fri, 1 Aug 2014 07:42:42 +0200

regtest.py: Add debug/logging support

This commit introduces a new -D/--debug option for regtest.py that
can be used to obtain verbose logging information about the work
of the test driver.

------------------------------------------------------------------------
a170429 | Dorian Krause | Thu, 31 Jul 2014 16:49:03 +0200

regtest.py: Write empty output files if necessary

It simplifies the testing if we know that the stdout/stderr file
is present even if the captured stdout/stderr is empty.

------------------------------------------------------------------------
97b680c | Dorian Krause | Thu, 31 Jul 2014 16:48:36 +0200

tests/ticket-20: Whitespace changes

------------------------------------------------------------------------
9de2707 | Dorian Krause | Thu, 31 Jul 2014 16:48:16 +0200

tests/ticket-71: Remove unnecesary regular expression

------------------------------------------------------------------------
ad3f1ec | Dorian Krause | Thu, 31 Jul 2014 16:42:15 +0200

tests: Remove unnecessary imports of re module

------------------------------------------------------------------------
801fbd1 | Dorian Krause | Thu, 31 Jul 2014 16:42:09 +0200

tests/ticket-77: Use new testsuite module

------------------------------------------------------------------------
7681be5 | Dorian Krause | Thu, 31 Jul 2014 16:42:07 +0200

tests/ticket-71: Use new testsuite module

------------------------------------------------------------------------
2ce0365 | Dorian Krause | Thu, 31 Jul 2014 16:36:30 +0200

tests/ticket-69: Use new testsuite module

------------------------------------------------------------------------
be82787 | Dorian Krause | Thu, 31 Jul 2014 16:35:06 +0200

tests/ticket-68: Use new testsuite module

------------------------------------------------------------------------
f766179 | Dorian Krause | Thu, 31 Jul 2014 16:32:49 +0200

tests/ticket-63: Use new testsuite module

------------------------------------------------------------------------
b5b29b1 | Dorian Krause | Thu, 31 Jul 2014 16:31:31 +0200

tests/ticket-42-*: Use new testsuite module

------------------------------------------------------------------------
04ff9a4 | Dorian Krause | Thu, 31 Jul 2014 16:29:26 +0200

tests/ticket-41: Use new testsuite module

------------------------------------------------------------------------
0003b2f | Dorian Krause | Thu, 31 Jul 2014 16:28:33 +0200

tests/ticket-39: Use new testsuite module

------------------------------------------------------------------------
84e7848 | Dorian Krause | Thu, 31 Jul 2014 16:27:35 +0200

tests/ticket-40: Use new testsuite module

------------------------------------------------------------------------
9ee255b | Dorian Krause | Thu, 31 Jul 2014 16:25:07 +0200

tests/ticket-32: Use new testsuite module

------------------------------------------------------------------------
811a363 | Dorian Krause | Thu, 31 Jul 2014 16:24:57 +0200

tests/ticket-33: Use new testsuite module

------------------------------------------------------------------------
355ba08 | Dorian Krause | Thu, 31 Jul 2014 16:24:52 +0200

tests/ticket-31: Use new testsuite module

------------------------------------------------------------------------
05ffe9c | Dorian Krause | Thu, 31 Jul 2014 16:24:45 +0200

tests/ticket-30: Use new testsuite module

------------------------------------------------------------------------
eaa4dbb | Dorian Krause | Thu, 31 Jul 2014 16:15:50 +0200

tests/ticket-29: Use new testsuite module

------------------------------------------------------------------------
812e208 | Dorian Krause | Thu, 31 Jul 2014 16:13:28 +0200

tests/ticket-26-*: Use new testsuite module

------------------------------------------------------------------------
fc176cc | Dorian Krause | Thu, 31 Jul 2014 16:13:14 +0200

tests/ticket-20: Use new testsuite module

------------------------------------------------------------------------
eee5798 | Dorian Krause | Thu, 31 Jul 2014 16:10:17 +0200

tests/ticket-24: Use new testsuite module

------------------------------------------------------------------------
04c9877 | Dorian Krause | Thu, 31 Jul 2014 16:01:47 +0200

tests/timeout-exit-15: Use new testsuite module

------------------------------------------------------------------------
610f933 | Dorian Krause | Thu, 31 Jul 2014 16:01:29 +0200

lib/testsuite/helper.py: Add function submit_exit_code()

------------------------------------------------------------------------
1f5245e | Dorian Krause | Thu, 31 Jul 2014 15:53:54 +0200

tests/wait: Use new testsuite module

------------------------------------------------------------------------
ada132f | Dorian Krause | Thu, 31 Jul 2014 15:50:13 +0200

tests/stress-1: Use new testsuite module

------------------------------------------------------------------------
c382bb6 | Dorian Krause | Thu, 31 Jul 2014 15:46:53 +0200

tests/disable-status: Use new testsuite module

------------------------------------------------------------------------
069b75f | Dorian Krause | Thu, 31 Jul 2014 15:22:17 +0200

lib/testsuite/helper.py: Bug fix

------------------------------------------------------------------------
9b6c74b | Dorian Krause | Thu, 31 Jul 2014 15:18:58 +0200

tests/stdout-taskid-5: Use new testsuite module

------------------------------------------------------------------------
e94f831 | Dorian Krause | Thu, 31 Jul 2014 14:56:21 +0200

tests/stdin-fwd-*: Use new testsuite module

------------------------------------------------------------------------
b2c35cf | Dorian Krause | Thu, 31 Jul 2014 13:36:15 +0200

tests/stderr-taskid-5: Use new testsuite module

------------------------------------------------------------------------
81f017c | Dorian Krause | Thu, 31 Jul 2014 13:33:34 +0200

tests/srun-within-srun-2: Use new testsuite module

------------------------------------------------------------------------
1a56e7a | Dorian Krause | Thu, 31 Jul 2014 13:33:32 +0200

tests/srun-within-srun-1: Use new testsuite module

------------------------------------------------------------------------
3590174 | Dorian Krause | Thu, 31 Jul 2014 13:27:48 +0200

lib/testsuite/helper.py: Add fproc_exit_code()

This commit adds a new function fproc_exit_code() that returns
the exit code of the frontend process.

------------------------------------------------------------------------
b614f92 | Dorian Krause | Thu, 31 Jul 2014 13:19:46 +0200

tests/srun-within-sbatch-env: Use new testsuite module

------------------------------------------------------------------------
272f0c3 | Dorian Krause | Thu, 31 Jul 2014 13:17:38 +0200

lib/testsuite/helper.py: Add additional functions

------------------------------------------------------------------------
153c731 | Dorian Krause | Thu, 31 Jul 2014 13:17:08 +0200

tests/srun-maxnodes: Use new testsuite module

------------------------------------------------------------------------
3d7ca7e | Dorian Krause | Thu, 31 Jul 2014 13:13:34 +0200

tests/sbatch-env: Bug fix

------------------------------------------------------------------------
4a04bf3 | Dorian Krause | Thu, 31 Jul 2014 13:13:31 +0200

tests/srun-env: Use new testsuite module

------------------------------------------------------------------------
2a44bfe | Dorian Krause | Thu, 31 Jul 2014 13:10:25 +0200

regtest.py: Take process id into account when generating the key

When running the same test multiple time in a tight loop it might
happend that the same key is generated twice. This commit fixes
this undesirable behavior by adding the process id to the string
from which the test key is generated. Different instances of
regtest.py that run in parallel will have different process ids
and thus a different key is generated.

------------------------------------------------------------------------
115408b | Dorian Krause | Thu, 31 Jul 2014 13:03:32 +0200

tests/simple-interactive: Use new testsuite module

------------------------------------------------------------------------
14db8ac | Dorian Krause | Thu, 31 Jul 2014 12:42:46 +0200

tests/signal: Use new testsuite module

------------------------------------------------------------------------
3a32d61 | Dorian Krause | Thu, 31 Jul 2014 11:50:39 +0200

tests/sgather: Use new testsuite module

------------------------------------------------------------------------
0d892f0 | Dorian Krause | Thu, 31 Jul 2014 11:50:36 +0200

tests/sbcast: Use new testsuite module

------------------------------------------------------------------------
b909f1b | Dorian Krause | Thu, 31 Jul 2014 11:45:47 +0200

tests/sbatch-env: Use new testsuite module

------------------------------------------------------------------------
32141d3 | Dorian Krause | Thu, 31 Jul 2014 10:58:54 +0200

tests/relative: Use new testsuite module

------------------------------------------------------------------------
c4f7044 | Dorian Krause | Thu, 31 Jul 2014 10:58:47 +0200

tests/prolog-epilog-*: Use new testsuite module

------------------------------------------------------------------------
1884e25 | Dorian Krause | Thu, 31 Jul 2014 10:46:39 +0200

tests/preserve-env*: Use new testsuite module

------------------------------------------------------------------------
afd6a59 | Dorian Krause | Thu, 31 Jul 2014 10:42:06 +0200

tests/pipes: Use new testsuite module

------------------------------------------------------------------------
b217602 | Dorian Krause | Thu, 31 Jul 2014 10:39:28 +0200

tests/multiprog: Use new testsuite module

------------------------------------------------------------------------
eb26558 | Dorian Krause | Thu, 31 Jul 2014 10:39:02 +0200

tests/ntasks-default: Use new testsuite module

------------------------------------------------------------------------
b63a62c | Dorian Krause | Thu, 31 Jul 2014 10:38:28 +0200

tests/open-mode: Use new testsuite module

------------------------------------------------------------------------
8b213cb | Dorian Krause | Thu, 31 Jul 2014 10:33:12 +0200

tests/labels: Use new testsuite module

------------------------------------------------------------------------
faea631 | Dorian Krause | Thu, 31 Jul 2014 10:32:03 +0200

tests/accounting-*: Use new testsuite module

------------------------------------------------------------------------
e4a1a0b | Dorian Krause | Thu, 31 Jul 2014 10:27:19 +0200

tests/job-arrays: Use new testsuite module

------------------------------------------------------------------------
f07b6f2 | Dorian Krause | Thu, 31 Jul 2014 10:23:16 +0200

tests/*buffered-std*: Use new testsuite module

------------------------------------------------------------------------
89dd1ff | Dorian Krause | Thu, 31 Jul 2014 10:23:04 +0200

tests/faulty-srun: Use new testsuite module

------------------------------------------------------------------------
cccb91f | Dorian Krause | Thu, 31 Jul 2014 09:38:37 +0200

tests/hint-*: Use new testsuite module

------------------------------------------------------------------------
56fdf00 | Dorian Krause | Thu, 31 Jul 2014 09:38:16 +0200

Ignore *.pyc files in lib/testsuite

------------------------------------------------------------------------
0a56588 | Dorian Krause | Thu, 31 Jul 2014 09:33:20 +0200

regtest.py: Stop ignoring unused arguments

So far, unused arguments have been ignored by regtest.py. If a user
wrote "python bin/regtest.py hostname" all tests have been executed
which is painful if they really meant to say
"python bin/regtest.py -t hostname". With this commit regtest.py will
bark and fail in this case.

------------------------------------------------------------------------
32a0ae5 | Dorian Krause | Thu, 31 Jul 2014 09:32:53 +0200

regtest.py: Add new option -m

The option -m allows for selecting tests based on a regular
expression.

------------------------------------------------------------------------
425d50d | Dorian Krause | Thu, 31 Jul 2014 09:28:34 +0200

scripts/gen-propagate-tests.py: Use new testsuite module

This should have come with
commit a4dbdda3479f8122ebe9a9fd3a59095617887bd6

------------------------------------------------------------------------
c2688bc | Dorian Krause | Thu, 31 Jul 2014 09:27:44 +0200

tests/distribution-*: Use new testsuite module

------------------------------------------------------------------------
6b20bf3 | Dorian Krause | Thu, 31 Jul 2014 09:23:11 +0200

lib/testsuite/helper.py: Fix bug

The code in job_node_list() contains a security guard for the
case that the cluster node naming scheme does not conform to
the assumptions made in the code. This check falsely triggered
on Juropa-3 for node lists like "j3c[001-002]" due to a missing
"\[" in the regular expression.

------------------------------------------------------------------------
d93f29f | Dorian Krause | Thu, 31 Jul 2014 09:10:06 +0200

tests/propagate-*: Use new testsuite module

------------------------------------------------------------------------
6892d39 | Dorian Krause | Thu, 31 Jul 2014 09:04:55 +0200

tests/{cpu,mem}-bind-*: Use testsuite module

------------------------------------------------------------------------
e843eef | Dorian Krause | Thu, 31 Jul 2014 08:39:31 +0200

lib/testsuite/helper.py: Add job_stdout/job_stderr functions

------------------------------------------------------------------------
5095470 | Dorian Krause | Thu, 31 Jul 2014 08:38:18 +0200

lib/testsuite/test.py: Fix bug

This commit fixes a bug due to a missing global declaration. This
resulted in failed tests being reported as passed by the driver.

------------------------------------------------------------------------
6808f42 | Dorian Krause | Thu, 31 Jul 2014 08:15:24 +0200

lib/testsuite/test.py: Protect RETVAL

This commit renames RETVAL to _RETVAL to avoid access to it
from the evaluation scripts.

------------------------------------------------------------------------
5b0c175 | Dorian Krause | Thu, 31 Jul 2014 08:10:33 +0200

tests/hostname: Use testsuite module

------------------------------------------------------------------------
2836bb3 | Dorian Krause | Thu, 31 Jul 2014 08:09:45 +0200

Add testsuite Python module

The testsuite Python module is intended to streamline the existing
tests and reduce boiler-plate code.

------------------------------------------------------------------------
edc8e94 | Dorian Krause | Thu, 31 Jul 2014 07:31:40 +0200

regtest.py: Bug fix

Fix a bug that lead to dropped stderr content if stdout was empty.

------------------------------------------------------------------------
b125f70 | Dorian Krause | Thu, 31 Jul 2014 07:20:34 +0200

regtest.py: Do not drop stdout/stderr

We append the stdout/stderr content if the slurm job output file
already exists.
This commit will break a number of tests.

------------------------------------------------------------------------
1c48faf | Dorian Krause | Thu, 31 Jul 2014 07:18:26 +0200

regtest.py: Add safeguards

This commit adds additional safeguards to ensure that a test does
not terminate until the Slurm job is done (e.g., COMPLETED or
FAILED). This is intended to address a problem observed by ParTec
on their test cluster (Ticket #31); the root cause of the problem
has not been identified, though.

------------------------------------------------------------------------
f4ebc23 | Dorian Krause | Wed, 30 Jul 2014 15:25:22 +0200

regtest.py: Fix issue on ParTec test cluster

Due to differences in the slurm SchedParameter options the ParTec
test cluster behaves differently then Juropa-3 and does not provide
the information used in the code to extract the jobid.
This commit fixes this problem by enforcing verbose output from
the submission command. At the same time the main loop has been
reorganized to function like a state machine which simplifies the
code significantly.

------------------------------------------------------------------------
619401d | Dorian Krause | Wed, 30 Jul 2014 10:41:36 +0200

Add {un,}buffered-stderr tests

------------------------------------------------------------------------
ece6740 | Dorian Krause | Wed, 30 Jul 2014 10:17:20 +0200

regtest.py: Handle message about lack of resources

This commit changes regtest.py such that it can handle
the message
"srun: Required node not available (down or drained)"
emitted by srun if the requested resources are currently
unavailable because all nodes are down or drained.

------------------------------------------------------------------------
6baa308 | Dorian Krause | Wed, 30 Jul 2014 10:15:25 +0200

tests: Rename buffered/unbuffered tests

This commit renames the following tests
  - buffered -> buffered-stdout
  - unbuffered -> unbuffered-stdout

------------------------------------------------------------------------
524b99f | Dorian Krause | Wed, 30 Jul 2014 10:15:02 +0200

tests/ticket-26-{1..5}: Fix ulimit.sh permissions

------------------------------------------------------------------------
9f856fe | Dorian Krause | Tue, 29 Jul 2014 15:22:29 +0200

tests: Fix minor bugs

------------------------------------------------------------------------
feac19e | Dorian Krause | Tue, 29 Jul 2014 14:31:55 +0200

tests/pipes: Improvements

------------------------------------------------------------------------
c962879 | Dorian Krause | Tue, 29 Jul 2014 13:33:01 +0200

regtest.py: Fix fproc environment for interactive jobs

This commit makes sure that the environment of frontend processes
that control interactive sessions is probably set up.

------------------------------------------------------------------------
5a5673c | Dorian Krause | Tue, 29 Jul 2014 12:49:12 +0200

Add tests for --hint option

------------------------------------------------------------------------
9944bba | Dorian Krause | Tue, 29 Jul 2014 12:48:59 +0200

scripts/gen-distribution-tests.py: Bug fix

------------------------------------------------------------------------
5399176 | Dorian Krause | Tue, 29 Jul 2014 11:36:02 +0200

Minor fix for scripts

------------------------------------------------------------------------
2c47372 | Dorian Krause | Tue, 29 Jul 2014 11:35:45 +0200

Add --propagate=... tests

------------------------------------------------------------------------
ce5a9a1 | Dorian Krause | Tue, 29 Jul 2014 10:54:50 +0200

tests/srun-within-sbatch-env: Bug fix

------------------------------------------------------------------------
1bf1088 | Dorian Krause | Tue, 29 Jul 2014 10:49:44 +0200

Add test srun-maxnodes

------------------------------------------------------------------------
dc50fb7 | Dorian Krause | Tue, 29 Jul 2014 10:17:51 +0200

Reduce the number of distribution-plane tests

------------------------------------------------------------------------
961db97 | Dorian Krause | Tue, 29 Jul 2014 10:10:01 +0200

Add ticket-77 test

------------------------------------------------------------------------
5c2c01b | Dorian Krause | Tue, 29 Jul 2014 09:31:53 +0200

Add tests for -m/--distribution srun option

------------------------------------------------------------------------
87581e5 | Dorian Krause | Mon, 28 Jul 2014 15:31:32 +0200

tests: Add missing file in sbatch-env

------------------------------------------------------------------------
d610d59 | Dorian Krause | Mon, 28 Jul 2014 15:25:24 +0200

tests: Replace sbatch-env

This commit move sbatch-env to srun-within-sbatch-env
and adds a new version of the sbatch-env test.

------------------------------------------------------------------------
4a46194 | Dorian Krause | Mon, 28 Jul 2014 15:13:05 +0200

Add stress-1 test

------------------------------------------------------------------------
9af9839 | Dorian Krause | Mon, 28 Jul 2014 15:02:07 +0200

tests/open-mode/eval.py: Add message to Assert statements

------------------------------------------------------------------------
6788aaf | Dorian Krause | Mon, 28 Jul 2014 14:26:32 +0200

Add test relative

------------------------------------------------------------------------
48b0edd | Dorian Krause | Mon, 28 Jul 2014 14:14:50 +0200

Add open-mode test

------------------------------------------------------------------------
414610a | Dorian Krause | Mon, 28 Jul 2014 13:58:36 +0200

Add tests for buffered/unbuffered I/O

------------------------------------------------------------------------
b47b0ac | Dorian Krause | Mon, 28 Jul 2014 12:30:12 +0200

Add wait test (Ticket #73)

------------------------------------------------------------------------
ad68a14 | Dorian Krause | Mon, 28 Jul 2014 09:33:07 +0200

tests/batch-env/eval.py: Print environment to stdout

------------------------------------------------------------------------
2fda62f | Dorian Krause | Mon, 28 Jul 2014 09:32:52 +0200

Add preserve-env tests

------------------------------------------------------------------------
f9c5c3c | Dorian Krause | Mon, 28 Jul 2014 08:57:05 +0200

Add two tests for accounting data

------------------------------------------------------------------------
32c3473 | Dorian Krause | Mon, 28 Jul 2014 07:41:30 +0200

Add script used to generate affinity tests

------------------------------------------------------------------------
a6a9853 | Dorian Krause | Mon, 28 Jul 2014 07:41:20 +0200

Add cpu_bind and mem_bind tests

------------------------------------------------------------------------
90919e5 | Dorian Krause | Fri, 25 Jul 2014 15:52:48 +0200

Add test ticket-41

The test can be used to produce the situation documented in
Ticket #41 but due to the lack of timeouts in regtest.py one
has to be careful not to stall the test execution.

------------------------------------------------------------------------
b02d482 | Dorian Krause | Fri, 25 Jul 2014 15:11:04 +0200

Add test mem_bind-verbose

------------------------------------------------------------------------
e262904 | Dorian Krause | Fri, 25 Jul 2014 14:36:08 +0200

Add test cpu_bind-verbose (Ticket #44)

------------------------------------------------------------------------
e9e83df | Dorian Krause | Fri, 25 Jul 2014 14:29:30 +0200

regtest.py: Add support for salloc

The sgather/sbcast tests use salloc for job submission/allocation.

------------------------------------------------------------------------
263d1a9 | Dorian Krause | Fri, 25 Jul 2014 14:29:19 +0200

tests/sgather: Bug fix

------------------------------------------------------------------------
de0b84a | Dorian Krause | Fri, 25 Jul 2014 14:29:08 +0200

Add sbcast test

------------------------------------------------------------------------
65cfd88 | Dorian Krause | Fri, 25 Jul 2014 14:20:20 +0200

Add sgather test

------------------------------------------------------------------------
39bdde6 | Dorian Krause | Fri, 25 Jul 2014 13:46:27 +0200

Add test ticket-71

------------------------------------------------------------------------
5af183d | partec | Thu, 14 Aug 2014 16:26:58 +0200

New psslurm prototype version 7.

------------------------------------------------------------------------
def1270 | Dorian Krause | Fri, 25 Jul 2014 12:46:38 +0200

Add test disable-status

------------------------------------------------------------------------
1dd0f9e | Dorian Krause | Fri, 25 Jul 2014 12:45:31 +0200

regtest.py: Export outdir/key to frontend process

This commit adds the following environment variables to
the environment of the frontend process for batch jobs:
  - PSTEST_TESTKEY: key of the test
  - PSTEST_OUTDIR: output directory for the test

------------------------------------------------------------------------
c8d6965 | Dorian Krause | Fri, 25 Jul 2014 10:27:05 +0200

Add signal test

------------------------------------------------------------------------
31e9a75 | Dorian Krause | Fri, 25 Jul 2014 09:51:56 +0200

Add ticket-32 test

------------------------------------------------------------------------
a6eb735 | Dorian Krause | Fri, 25 Jul 2014 09:30:11 +0200

Add ticket-26-[1-5] tests

------------------------------------------------------------------------
d457cb2 | Dorian Krause | Fri, 25 Jul 2014 08:53:07 +0200

Add job-arrays test (Ticket #28)

------------------------------------------------------------------------
2b7d43e | Dorian Krause | Fri, 25 Jul 2014 08:37:16 +0200

tests/ticket-69: Add flags

------------------------------------------------------------------------
3c57341 | Dorian Krause | Fri, 25 Jul 2014 08:35:39 +0200

regtest.py: Add support for flags

By specifying the SUBMIT_NO_O_OPTION or SUBMIT_NO_E_OPTION flag
tests can disable to automatic addition of -o/-e flags to the
submission command line.

------------------------------------------------------------------------
8c1a9d5 | Dorian Krause | Fri, 25 Jul 2014 08:34:01 +0200

regtest.py: return None in exec_test_interactive

In case of failure we return None (instead of going on).
This will ensure that the test is considered failed.

------------------------------------------------------------------------
712bbf3 | Dorian Krause | Fri, 25 Jul 2014 07:37:08 +0200

Add test ticket-33

------------------------------------------------------------------------
063fc39 | Dorian Krause | Fri, 25 Jul 2014 07:25:25 +0200

Add test ticket-24

------------------------------------------------------------------------
1fc9878 | Dorian Krause | Fri, 25 Jul 2014 07:12:00 +0200

Add test ticket-31

Due to the racy nature of the problem
this test needs to be repeated several
dozens of times to get a FAIL.

------------------------------------------------------------------------
9061a9d | Dorian Krause | Thu, 24 Jul 2014 17:02:43 +0200

Add test ticket-30

------------------------------------------------------------------------
34e36e8 | Dorian Krause | Thu, 24 Jul 2014 16:22:37 +0200

tests/ticket-63: Bug fixes

------------------------------------------------------------------------
6057c26 | Dorian Krause | Thu, 24 Jul 2014 16:11:30 +0200

Add ticket-63 test

------------------------------------------------------------------------
3851e68 | Dorian Krause | Thu, 24 Jul 2014 16:01:35 +0200

tests: Improve error reporting

------------------------------------------------------------------------
7ac9018 | Dorian Krause | Thu, 24 Jul 2014 16:00:53 +0200

Add test stdin-fwd-none (Ticket #35)

------------------------------------------------------------------------
a44f5e5 | Dorian Krause | Thu, 24 Jul 2014 15:51:59 +0200

tests/stdin-fwd-file: Add timeout

------------------------------------------------------------------------
c9e82dd | Dorian Krause | Thu, 24 Jul 2014 15:50:14 +0200

Add test stdin-fwd-file

------------------------------------------------------------------------
444f4b6 | Dorian Krause | Thu, 24 Jul 2014 15:18:53 +0200

tests: Fix references to the output directory

In order to allow repetition of tests, in commit
2f6c850bfb79329f5472f002c6d6f6060f8d3fba the output
directory was changed from "output" to a unique
"output-%s" % key file. This commit fixes arising
problems with tests.

------------------------------------------------------------------------
917c06f | Dorian Krause | Thu, 24 Jul 2014 15:16:07 +0200

regtest.py: rename output -> stdout

------------------------------------------------------------------------
a6aab48 | Dorian Krause | Thu, 24 Jul 2014 15:11:51 +0200

regtest.py: Don not raise Exception

For interactive jobs we do not expect the process to terminate
before we have figured out the jobid - After all the front end
process has not been started yet. This might happen though in
rare cases (I am not yet 100% sure when). In this case we should
not raise an Exception but try to go on.

------------------------------------------------------------------------
5459dae | Dorian Krause | Thu, 24 Jul 2014 15:09:23 +0200

regtest.py: Work around slurm bug

When adding -e slurm-%j.err to the srun command line, slurm will
correctly expand the filename but the scontrol output will still
equal slurm-%j.err. This commit adds a workaround for this issue.

------------------------------------------------------------------------
96092fa | Dorian Krause | Thu, 24 Jul 2014 15:08:25 +0200

regtest.py: Add -J key to submission line

By setting the job name to the test key it is relatively easy for
submission scripts to figure out the output directory using the
SLURM_JOB_NAME environment variable.

------------------------------------------------------------------------
e39127c | Dorian Krause | Thu, 24 Jul 2014 15:06:19 +0200

regtest.py: Handle @O placeholder in user strings

The @O placeholder is replaced by the output directory
of the job.

------------------------------------------------------------------------
6f3bead | Dorian Krause | Thu, 24 Jul 2014 11:17:22 +0200

regtest.py: Bug fix

------------------------------------------------------------------------
85734ad | Dorian Krause | Thu, 24 Jul 2014 11:09:57 +0200

Add stderr-taskid-5 test

------------------------------------------------------------------------
99446c4 | Dorian Krause | Thu, 24 Jul 2014 11:02:30 +0200

regetst.py: Add -r/--repetitions option

For problems of racy nature it makes sense to repeat tests multiple
times. This commit adds this capability.
Supporting this feature requires a number of changes throughout the
code. In particular we cannot just use the "output" folder in the
test directory since multiple tests can be executed concurrently in
the same folder. We introduce a test key which uniquely identifies
each execution of a test. This also simplifies correlating output
with test results since the output folder is never moved.

------------------------------------------------------------------------
cf3ef14 | Dorian Krause | Thu, 24 Jul 2014 09:57:34 +0200

Add timeout-exit-15 test

This test demonstrates the problem reported
in Ticket #70.

------------------------------------------------------------------------
760b629 | Dorian Krause | Thu, 24 Jul 2014 09:51:51 +0200

regtest.py: Capture srun/sbatch exit code

So far regtest.py did not capture the exit code of the srun/sbatch
program. A comment stated that the scontrol output would contain
this information. This is howerver incorrect: The ExitCode reported
by scontrol is the exit code of the user application on the compute
node.
This commit implements this missing feature. The exit code is
provided to the evaluation process via the environment.

------------------------------------------------------------------------
84d95db | Dorian Krause | Thu, 24 Jul 2014 09:24:33 +0200

tests/ticket-42-2: Improve expect command series

------------------------------------------------------------------------
9a33ee5 | Dorian Krause | Thu, 24 Jul 2014 09:23:41 +0200

Add srun-within-srun-2 test

------------------------------------------------------------------------
ec4b291 | Dorian Krause | Thu, 24 Jul 2014 09:23:22 +0200

Rename test srun-within-srun -> srun-within-srun-1

------------------------------------------------------------------------
c13ca4f | Dorian Krause | Thu, 24 Jul 2014 08:55:30 +0200

Add ticket-42-2 test

------------------------------------------------------------------------
5785448 | Dorian Krause | Thu, 24 Jul 2014 08:55:19 +0200

Add ticket-42-1 test

------------------------------------------------------------------------
84d1b03 | Dorian Krause | Wed, 23 Jul 2014 15:46:32 +0200

Add ticket-40 test

------------------------------------------------------------------------
34542d2 | Dorian Krause | Wed, 23 Jul 2014 15:12:37 +0200

Add ticket-39 test

------------------------------------------------------------------------
6aa98f5 | Dorian Krause | Wed, 23 Jul 2014 14:56:16 +0200

Add ticket-20 commit

------------------------------------------------------------------------
a88bc57 | Dorian Krause | Wed, 23 Jul 2014 14:56:05 +0200

Add ticket-69 test

------------------------------------------------------------------------
3fcc474 | Dorian Krause | Wed, 23 Jul 2014 13:50:49 +0200

regtest.py: Flush stdout

------------------------------------------------------------------------
d95a236 | Dorian Krause | Wed, 23 Jul 2014 13:50:40 +0200

Add simple-interactive test

------------------------------------------------------------------------
ce5f1a8 | Dorian Krause | Wed, 23 Jul 2014 13:23:56 +0200

test/pipes: Bug fix

Fix the permissions of echo.sh

------------------------------------------------------------------------
9eca84c | Dorian Krause | Wed, 23 Jul 2014 13:23:25 +0200

regtest.py: Bug fix for interactive tests

This commit fixes a hang seen when running
the srun-within-srun test.

------------------------------------------------------------------------
453d659 | Dorian Krause | Wed, 23 Jul 2014 13:22:16 +0200

regtest.py: Add -i option to ignore partitions

This commit introduces a new flag -i for regtest.py that
allows for disabling selected partitions.

------------------------------------------------------------------------
746c6ce | Dorian Krause | Wed, 23 Jul 2014 12:36:47 +0200

regtest.py: Improve handling of stdout/stderr

This commit contains several improvements to handling
of front end processes and the output of submitted
jobs. In particular we are now capturing srun output
and write them to a file if that is not done by the job
itself.

------------------------------------------------------------------------
46a46fb | Dorian Krause | Wed, 23 Jul 2014 12:35:47 +0200

regtest.py: Add support for @D place-holder

@D is a place holder for the test root. This required
for jobs that need to use absolute paths.

------------------------------------------------------------------------
933ccb8 | Dorian Krause | Wed, 23 Jul 2014 12:34:19 +0200

regtest.py: Make sure BL is released

Wrap the prints by a try ... finally block to make sure
that we release the BL in any case.

------------------------------------------------------------------------
bcb588f | Dorian Krause | Wed, 23 Jul 2014 12:28:07 +0200

tests: Improve some asserts

The Assert()s that were raised when opening
the job output file failed have not been very
enlightening so far. This commit fixes that.

------------------------------------------------------------------------
6ff7689 | Dorian Krause | Wed, 23 Jul 2014 11:45:06 +0200

tests: Rely on StdOut key being set

Recent versions of regtest.py make sure that
StdOut/StdErr are added to the scontrol dictionary
to simplify tests.

------------------------------------------------------------------------
acd2abf | Dorian Krause | Wed, 23 Jul 2014 11:44:32 +0200

Add faulty-srun test

------------------------------------------------------------------------
93f3abc | Dorian Krause | Wed, 23 Jul 2014 11:30:35 +0200

Add ticket-29 test

------------------------------------------------------------------------
8093086 | Dorian Krause | Wed, 23 Jul 2014 10:28:28 +0200

Add ticket-68 test

------------------------------------------------------------------------
f9ba1e1 | Dorian Krause | Wed, 23 Jul 2014 10:28:15 +0200

Add stdout-taskid-5 test

------------------------------------------------------------------------
8eddb45 | Dorian Krause | Wed, 23 Jul 2014 09:45:51 +0200

regtest.py: Do not add -o if it is included in submit line

This commit changes the behavior of regest.py such that
-o flags on the submit command line are not clobbered.

------------------------------------------------------------------------
1cd13cf | Dorian Krause | Tue, 22 Jul 2014 16:39:36 +0200

Add multiprog test

------------------------------------------------------------------------
f155d46 | Dorian Krause | Tue, 22 Jul 2014 16:37:41 +0200

Add ntasks-default test

------------------------------------------------------------------------
49554cc | Dorian Krause | Tue, 22 Jul 2014 16:01:50 +0200

Add stdin-fwd-5 test

------------------------------------------------------------------------
d7a3fec | Dorian Krause | Tue, 22 Jul 2014 15:55:02 +0200

Add stdin-fwd-all test

------------------------------------------------------------------------
0e4db0f | Dorian Krause | Tue, 22 Jul 2014 14:45:02 +0200

tests: Whitespace changes

------------------------------------------------------------------------
f8099da | Dorian Krause | Tue, 22 Jul 2014 14:44:50 +0200

Add srun-within-srun test

------------------------------------------------------------------------
a7f65c5 | Dorian Krause | Tue, 22 Jul 2014 14:42:16 +0200

Add srun-env test

------------------------------------------------------------------------
7268f8e | Dorian Krause | Tue, 22 Jul 2014 14:42:06 +0200

Add sbatch-env test

------------------------------------------------------------------------
79a5b4d | Dorian Krause | Tue, 22 Jul 2014 14:40:07 +0200

Add prolog-epilog-rel test

------------------------------------------------------------------------
bfe04ad | Dorian Krause | Tue, 22 Jul 2014 14:39:51 +0200

Add prolog-epilog-abs test

------------------------------------------------------------------------
244f753 | Dorian Krause | Tue, 22 Jul 2014 14:39:19 +0200

Add pipes test

------------------------------------------------------------------------
58a3286 | Dorian Krause | Tue, 22 Jul 2014 14:38:56 +0200

Add labels test

------------------------------------------------------------------------
96bc9c8 | Dorian Krause | Tue, 22 Jul 2014 14:38:31 +0200

Add hostname test

------------------------------------------------------------------------
7b56875 | Dorian Krause | Tue, 22 Jul 2014 13:44:56 +0200

regtest.py: Accept strings and split them yourself

For users it is simpler to specify commands as strings
rather than an array of strings. We can detect this
and simply split the command. Note that we use
issinstance(-, basestring) rather than isinstance(-, str)
since the JSON library returns unicode strings.

------------------------------------------------------------------------
70a4887 | Dorian Krause | Tue, 22 Jul 2014 13:33:34 +0200

regtest.py: Drop -D argument

When specifying the -D argument, srun will not be
able to find the input script in the test directory
(sbatch copies the script). Therefore we drop the
-D argument. All scripts need to make sure that files
are created in the output directory.
This commit also changes the argument to -o such
that an absolute path is used.

------------------------------------------------------------------------
5618aeb | Dorian Krause | Tue, 22 Jul 2014 13:32:22 +0200

regtest.py: Bug fixes

This commit fixes two bugs in the function
exec_test_interactive. First, the second argument
should be the partition/reservation index. Second,
a non-negative return value of the srun command
should not rais an exception.

------------------------------------------------------------------------
fa8bfad | Dorian Krause | Tue, 22 Jul 2014 13:29:02 +0200

regtest.py: Improve formatting

Instead of using tabs we are padding strings with whitespaces
to guarantee a proper alignment (assuming an upper bound for
the name of tests.

------------------------------------------------------------------------
86c0bbe | Dorian Krause | Tue, 22 Jul 2014 10:42:03 +0200

regtest.py: Handle NODE_FAIL JobState

------------------------------------------------------------------------
63e5953 | Dorian Krause | Tue, 22 Jul 2014 07:09:47 +0200

regtest.py: Fix racy chdir

The os.chdir call lead to a race between different threads
since the current working directory is the same for all threads.
From time to time, the submit() call would fail because
sbatch/srun could not find the submission file. Further
investigation showed that the working directory had been
changed in the meantime.

------------------------------------------------------------------------
43cbb32 | Dorian Krause | Mon, 21 Jul 2014 14:18:35 +0200

regtest.py: Read reservations from test description

In the current setup on Juropa 3 the psslurm partition
is only available in conjunction with the psslurm
reservation. Thus we need an option to specify an
accompanying reservation.

------------------------------------------------------------------------
ce6d17b | Dorian Krause | Tue, 15 Jul 2014 16:21:09 +0200

regtest.py: Add support for interactive jobs

This commit adds suport for interactive jobs.
The current solution is not as nice as what,
e.g., expect provides but is a good starting
point.

------------------------------------------------------------------------
21fcfe2 | Dorian Krause | Tue, 15 Jul 2014 16:20:43 +0200

regtest.py: Whitespace changes for cleanup

------------------------------------------------------------------------
2eefcac | Dorian Krause | Tue, 15 Jul 2014 14:42:42 +0200

regtest.py: Fix coding issue

Fix long lines in regtest.py

------------------------------------------------------------------------
0b59d02 | Dorian Krause | Tue, 15 Jul 2014 14:38:44 +0200

regtest.py: Support comments in JSON files

JSON - as a format intended for data serialization -
does not support comments. This commit adds support
for Python/Bash style line comments as an extension
to the JSON format. The comments are simply stripped
of before parsing the content of descr.json.

------------------------------------------------------------------------
1be3c08 | Dorian Krause | Mon, 14 Jul 2014 08:15:27 +0200

regtest.py: Whitespace changes

------------------------------------------------------------------------
b77cf68 | Dorian Krause | Mon, 14 Jul 2014 08:12:01 +0200

regtest.py: Treat srun output

In order to ensure that we do not block
indefinitely if the srun process produces
massive output we need to check from time
to time for available date in the buffers
and flush them (i.e., read from the pipe -
We drop all the values).

------------------------------------------------------------------------
a69425c | Dorian Krause | Mon, 14 Jul 2014 07:59:59 +0200

regtest.py: Bug fix

According to the specs of the
subprocess module, communicate
waits for a process to terminate.
This is not what we want when
executing srun.

------------------------------------------------------------------------
afde07b | Dorian Krause | Fri, 11 Jul 2014 16:28:09 +0200

regtest.py: Place srun output in the correct folder

------------------------------------------------------------------------
40aaed2 | Dorian Krause | Fri, 11 Jul 2014 16:27:27 +0200

regtest.py: Fix poor-mans eval

When no evaluation procedure
is specified we just check that
all ExitCodes are the same. This
needs to be adapted now that
we support job arrays.

------------------------------------------------------------------------
f073f33 | Dorian Krause | Fri, 11 Jul 2014 16:21:53 +0200

regtest.py: Add support for srun

This commit fixes regtest.py such that
batch jobs can not only be submitted
using sbatch but also via srun.

------------------------------------------------------------------------
c6f000a | Dorian Krause | Fri, 11 Jul 2014 15:54:59 +0200

Rename regest.py to regtest.py

This commit fixes a typo in the
name of the regression testsuite
driver.

------------------------------------------------------------------------
f5d95e8 | Dorian Krause | Fri, 11 Jul 2014 15:19:17 +0200

regtest.py: Bug fix

------------------------------------------------------------------------
4cb4763 | Dorian Krause | Fri, 11 Jul 2014 15:18:49 +0200

regtest.py: Add new test to check_test_description

This commit adds additional checks for
interactive jobs.

------------------------------------------------------------------------
7a5e416 | Dorian Krause | Fri, 11 Jul 2014 15:06:20 +0200

regtest.py: Add new test checks

This commit adds additional checks
to check_test_description.

------------------------------------------------------------------------
9e1845d | Dorian Krause | Fri, 11 Jul 2014 14:52:39 +0200

regtest.py: Check input test description

The commit adds the function check_test_description()
for checking the test description read from
the JSON file.

------------------------------------------------------------------------
9101cb2 | Dorian Krause | Fri, 11 Jul 2014 14:27:33 +0200

regtest.py: Add support for job arrays

This commit adds support for the job array
feature of slurm. This requires capturing the
state of different array tasks. When job arrays
are used the scontrol output for all array
tasks are exported by adding the taskid to
the prefix (e.g., task 2 in partition batch
will use the prefix PSTEST_SCONTROL_BATCH_2_).

------------------------------------------------------------------------
6b61999 | Dorian Krause | Fri, 11 Jul 2014 13:20:31 +0200

regtest.py: Add get_test_list function

This commit moves the logic for the
construction of the list of tests into
a separate function.

------------------------------------------------------------------------
d0fb315 | Dorian Krause | Fri, 11 Jul 2014 13:18:44 +0200

regtest.py: Add -x option

-x/--excludes can be used to exclude
a list of tests from being executed.

------------------------------------------------------------------------
35f6fd0 | Dorian Krause | Fri, 11 Jul 2014 13:15:20 +0200

regtest.py: Add -t option

-t/--tests can be used to specify
a list of tests that should be
performed.

------------------------------------------------------------------------
b52b1a6 | Dorian Krause | Fri, 11 Jul 2014 13:12:55 +0200

regtest.py: Add option -l

-l/--list can be used to
query the list of tests that
would be executed.

------------------------------------------------------------------------
55ecf16 | Dorian Krause | Fri, 11 Jul 2014 12:57:20 +0200

regtest.py: Process tests in parallel

This commit updates the main loop such
that several tests can be executed
in parallel.

------------------------------------------------------------------------
fc56e1a | Dorian Krause | Fri, 11 Jul 2014 12:53:09 +0200

regtest.py: Cleanup

------------------------------------------------------------------------
f53dccd | Dorian Krause | Fri, 11 Jul 2014 12:51:19 +0200

regtest.py: Add -d option

Instead of reading the tests directory
from the environment we use a default
computed from the path to bin/regexp.py.

Command line parsing is done with the
optparse module.

------------------------------------------------------------------------
ddfc457 | Dorian Krause | Fri, 11 Jul 2014 12:48:59 +0200

regtest.py: Do not move empty folder

If the output folder is empty we can
reuse it rather than moving it.

------------------------------------------------------------------------
e7b1d8c | Dorian Krause | Fri, 11 Jul 2014 10:30:34 +0200

Add initial regest.py version

regtest.py is the driver for
the psslurm regression test suite.

------------------------------------------------------------------------
1f61512 | partec | Wed, 13 Aug 2014 11:30:53 +0200

New psslurm prototype version 4.

------------------------------------------------------------------------
