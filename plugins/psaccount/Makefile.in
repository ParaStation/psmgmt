###################################################### -*- Makefile -*- #####
#                  ParaStation
#        Copyright (c) 2011 Cluster Competence Center GmbH, Munich
#############################################################################
#
# $Id$
#
# @author
#         Michael Rauh <rauh@par-tec.com>
#############################################################################

SRCDIR = @abs_srcdir@
TOPSRCDIR = @abs_top_srcdir@
LIB_DIRNAME:=@LIB_DIRNAME@

INSTALL = @INSTALL@

################################

export LIBNAME := psaccount
export LIBOBJS := psaccount.o psaccountlog.o psaccountcollect.o psaccountclient.o \
		helper.o psaccountproc.o psaccountcomm.o psaccountjob.o \
		psaccountinter.o
export LIBVPATH := $(SRCDIR)
export LIBINC = -I$(TOPSRCDIR)/include
export LIBINC += -I$(TOPSRCDIR)/bin/daemon
export LIBDSTDIR = ../..

################################

#only static
all lib: sharedlib

sharedlib staticlib: %: %.dir
	$(MAKE) -C $@.dir -f ../../Makefile.$@

sharedlib.dir staticlib.dir:
	$(INSTALL) -d $@

clean distclean: sharedlib.dir staticlib.dir
	$(MAKE) -C sharedlib.dir -f ../../Makefile.sharedlib $@
	rmdir sharedlib.dir
	$(MAKE) -C staticlib.dir -f ../../Makefile.staticlib $@
	rmdir staticlib.dir
