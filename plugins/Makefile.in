#                                                       -*- Makefile -*-
# ParaStation
#
# Copyright (C) 2011 ParTec Cluster Competence Center GmbH, Munich
#
# This file may be distributed under the terms of the Q Public License
# as defined in the file LICENSE.QPL included in the packaging of this
# file.
#
# Authors:      Michael Rauh <rauh@par-tec.com>
#

SUBDIRS := psaccount psresport

.PHONY: all clean distclean
all clean distclean: $(SUBDIRS)

.PHONY: $(SUBDIRS)
$(SUBDIRS): 
	$(MAKE) -C $@ $(TARGET)

#
# install plugins 
#
INSTALL = @INSTALL@
INSTFLAGS_NOEXEC = -m 644

DISTDIR := $(DESTDIR)$(DISTPATH)
PLUGINDIR := $(DISTDIR)/plugins
DIST_plugin := psaccount.so psresport.so

$(PLUGINDIR)/%.so: %.so
	$(INSTALL) -D $< $@

.PHONY: install
install: $(patsubst %,$(PLUGINDIR)/%,$(DIST_plugin))
