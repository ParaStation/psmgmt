###################################################### -*- Makefile -*- #####
#                  ParaStation3
#        Copyright (c) 2002 ParTec AG Karlsruhe
#        All rights reserved.
#############################################################################
#
# $Id: Makefile.in,v 1.17 2002/11/27 15:57:38 hauke Exp $
#
# @author
#         Jens Hauke <hauke@par-tec.de>
#############################################################################
#Create Only mcp's:
#>make mcp
#Create mcp pshal and kernelmodule:
#>make all
#Create pshal and kernelmodule:
#>make allbutmcp
#or simple
#>make
#
#On Linux use KDIR to set Kerneldir and optionalOSSUF for extra info like SMP
#>make KDIR=/usr/src/linux-2.2.16 OSSUF=_SMP
#
#On Problems with .kernelrelease call "make include/linux/version.h" as
# root inside Kerneldir

PSM_OSDIR := @PSM_OSDIR@

SUBDIRS := lib kern/mcp $(PSM_OSDIR) bin docu dist dist_fe dist_docu
ifeq ($(JAVA_ENABLED),yes)
SUBDIRS += dist_gui
endif

all: psm lib bin
.PHONY: all psm docu $(SUBDIRS)
.PHONY: dist_gui

mcp:
	$(MAKE) -C kern/mcp
psm:	mcp
	$(MAKE) -C $(PSM_OSDIR)

lib:
	$(MAKE) -C lib

bin:
	$(MAKE) -C bin bin

docu:
	$(MAKE) -C docu

clean:
	@for i in $(SUBDIRS) ; do \
		$(MAKE) -C $$i clean ;\
	done

dist:
	$(MAKE) -C dist
dist_fe:
	$(MAKE) -C dist_fe
dist_docu:
	$(MAKE) -C dist_docu
dist_gui:
	$(MAKE) -C dist_gui
