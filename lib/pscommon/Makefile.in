###################################################### -*- Makefile -*- #####
#                  ParaStation
#        Copyright (c) 2002-2003 ParTec AG Karlsruhe
#        All rights reserved.
#############################################################################
#
# $Id: Makefile.in,v 1.7 2004/01/22 15:08:48 eicker Exp $
#
# @author
#         Jens Hauke <hauke@par-tec.de>
#         Norbert Eicker <eicker@par-tec.de>
#############################################################################

# Use absolute paths !!!
SRCDIR := $(shell cd @srcdir@;pwd)
TOPSRCDIR := @TOP_SRCDIR@

################################

export LIBNAME := pscommon
# Dont forget to change the objectlist also in libpsi!
export LIBOBJS := pscommon.o psprotocol.o pstask.o pspartition.o
export LIBVPATH := $(SRCDIR)
export LIBINC = -I$(TOPSRCDIR)/include
export LIBDSTDIR = ../..

################################

#only static
all lib: staticlib

sharedlib staticlib: sharedlib.dir staticlib.dir
	$(MAKE) -C $@.dir -f ../../Makefile.$@

sharedlib.dir staticlib.dir:
	mkdir -p $@

realclean clean: sharedlib.dir staticlib.dir
	$(MAKE) -C sharedlib.dir -f ../../Makefile.sharedlib $@
	$(MAKE) -C staticlib.dir -f ../../Makefile.staticlib $@
