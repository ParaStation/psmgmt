#                                                       -*- Makefile -*-
# ParaStation
#
# Copyright (C) 2002-2004 ParTec AG, Karlsruhe
# Copyright (C) 2005-2008 ParTec Cluster Competence Center GmbH, Munich
#
# This file may be distributed under the terms of the Q Public License
# as defined in the file LICENSE.QPL included in the packaging of this
# file.
#
# Authors:      Jens Hauke <hauke@par-tec.com>
#               Norbert Eicker <eicker@par-tec.com>
#

SRCDIR = @abs_srcdir@
TOPSRCDIR = @abs_top_srcdir@

INSTALL = @INSTALL@

################################

export LIBNAME := pscommon
# Dont forget to change the objectlist also in libpsi!
export LIBOBJS := logging.o pscommon.o psprotocol.o pstask.o pspartition.o \
		pscpu.o
export LIBVPATH := $(SRCDIR)
export LIBINC = -I$(TOPSRCDIR)/include
export LIBDSTDIR = ../..

################################

#only static
all lib: staticlib

sharedlib staticlib: %: %.dir
	$(MAKE) -C $@.dir -f ../../Makefile.$@

sharedlib.dir staticlib.dir:
	$(INSTALL) -d $@

clean distclean: sharedlib.dir staticlib.dir
	$(MAKE) -C sharedlib.dir -f ../../Makefile.sharedlib $@
	rmdir sharedlib.dir
	$(MAKE) -C staticlib.dir -f ../../Makefile.staticlib $@
	rmdir staticlib.dir
