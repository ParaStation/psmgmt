# -*- Makefile -*-

CFLAGS += -O2 @CFLAG_WALL@ @CFLAG_G@ @CFLAG_COMPAT@
PSM_OSDIR := @PSM_OSDIR@
CPPFLAGS += -I@top_srcdir@/include -I@top_srcdir@/$(PSM_OSDIR) @CPPFLAG_MMD@

PSIOBJS := psi.o psilog.o psienv.o psispawn.o info.o logger.o 
PSIDEPS := $(PSIOBJS:.o=@DEPEXTENSION@)

RANLIB := @RANLIB@

VPATH += @srcdir@

all: ../libpsi.a

../libpsi.a: $(PSIOBJS) ../libpscommon.a
	cp ../libpscommon.a $@
	$(AR) rcv $@ $(PSIOBJS)
	$(RANLIB) $@

clean:
	$(RM) $(PSIDEPS) $(PSIOBJS) 


-include $(PSIDEPS)

