###################################################### -*- Makefile -*- #####
#                  ParaStation
#        Copyright (c) 2002-2004 ParTec AG, Karlsruhe
#        Copyright (c) 2005 Cluster Competence Center GmbH, Munich
#############################################################################
#
# $Id$
#
# @author
#         Jens Hauke <hauke@par-tec.de>
#         Norbert Eicker <eicker@par-tec.de>
#############################################################################

SRCDIR = @abs_srcdir@
TOPSRCDIR = @abs_top_srcdir@

INSTALL = @INSTALL@

################################

export LIBNAME := psi
export LIBOBJS := psi.o psilog.o psienv.o psispawn.o psipartition.o psiinfo.o
export LIBVPATH := $(SRCDIR)
export LIBINC = -I$(TOPSRCDIR)/include
export LIBDSTDIR = ../..
# Objects from libpscommon:
export LIBOBJS += pscommon.o psprotocol.o pstask.o pspartition.o
export LIBVPATH += $(SRCDIR)/../pscommon

################################

all lib: sharedlib staticlib

sharedlib staticlib: sharedlib.dir staticlib.dir
	$(MAKE) -C $@.dir -f ../../Makefile.$@

sharedlib.dir staticlib.dir:
	$(INSTALL) -d $@

clean distclean: sharedlib.dir staticlib.dir
	$(MAKE) -C sharedlib.dir -f ../../Makefile.sharedlib $@
	$(MAKE) -C staticlib.dir -f ../../Makefile.staticlib $@
